/*! fielddb - v2.27.0 - 2014-10-31
* https://github.com/OpenSourceFieldlinguistics/FieldDB/issues/milestones?state=closed
* Copyright (c) 2014 
	cesine <cesine@yahoo.com>
	trisapeace <trisapeace@gmail.com>
	hisakonog <hisakonog@gmail.com>
	Emmy Cathcart <maryellencathcart@gmail.com>
	Tobin Skinner <tobin.skinner@gmail.com>
	Yuliya Manyakina <yulia.manyakina@gmail.com>
	Elise <elise.mcclay@gmail.com>
	Josh Horner <josh.horner@gmail.com>
	gretchenmcc <gretchen.mcculloch@gmail.com>
	jrwdunham <jrwdunham@gmail.com>
	ghazan <gay.hazan@gmail.com>
	Fieldlinguist <info@fieldlinguist.com>
	zazoo <kimdan.ng@gmail.com>
	louisa-bielig <louisa.bielig@gmail.com>
	lingllama <lingllama@lingsync.org>
	geekrax <rakshit@thetechtime.com>
	Yogurt1206 <sunx4@miamioh.edu>
	Pablo Duboue <pablo.duboue@gmail.com>
	Oriana <oriana.kilbourn-ceron@mail.mcgill.ca>
 Licensed Apache 2.0 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("q"),e={fieldDBtype:"CORS",debugMode:!1,debug:function(a,b,c){this.debugMode&&console.log(a,b,c)},warn:function(a){console.warn("CORS-WARN: "+a)},bug:function(a){console.warn("CORS-BUG: "+a)},render:function(){this.debug("Render requested but this object has no render defined.")}};e.supportCORSandIE=function(a,b){var c;try{c=new XMLHttpRequest}catch(d){this.warn("XMLHttpRequest is not defined, nothign will happen.",d),c={}}return"withCredentials"in c?c.open(a,b,!0):"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(a,b)):c=null,c},e.makeCORSRequest=function(a){var b,c=this,e=d.defer();return a.method||(a.method=a.type||"GET"),a.url||this.bug("There was an error. Please report this."),a.data||(a.data=""),"GET"===a.method&&a.data&&(a.dataToSend=JSON.stringify(a.data).replace(/,/g,"&").replace(/:/g,"=").replace(/"/g,"").replace(/[}{]/g,""),a.url=a.url+"?"+a.dataToSend),(b=this.supportCORSandIE(a.method,a.url))?(b.setRequestHeader("Content-type","application/json"),a.withCredentials!==!1&&(b.withCredentials=!0),b.onload=function(d,f,g){var h=b.responseJSON||b.responseText||b.response;if(c.debug("Response from CORS request to "+a.url+": "+h),b.status>=400)return c.warn("The request was unsuccesful "+b.statusText),void e.reject(h);if(h){try{h=JSON.parse(h)}catch(d){c.debug("Response was already json.",d)}e.resolve(h)}else c.bug("There was no content in the server's response text. Please report this."),c.warn(d,f,g),e.reject(d)},b.onerror=function(b,d,f){c.debug(b,d,f),c.bug("There was an error making the CORS request to "+a.url+" from "+window.location.href+" the app will not function normally. Please report this."),e.reject(b)},a.data?b.send(JSON.stringify(a.data)):b.send(),e.promise):(this.bug("CORS not supported, your browser is unable to contact the database."),d.nextTick(function(){e.reject("CORS not supported, your browser is unable to contact the database.")}),e.promise)},c.CORS=e},{q:76}],2:[function(a,b,c){var d=a("diacritic"),e=a("./FieldDBObject").FieldDBObject,f=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},g=function(a){this._fieldDBtype||(this._fieldDBtype="Collection"),this.debug("Constructing a collection"),a||(a={}),"[object Array]"===Object.prototype.toString.call(a)&&(a={collection:a});for(var b in a)a.hasOwnProperty(b)&&"collection"!==b&&(this[b]=a[b]);if(!this.primaryKey){var c="id";this.debug("  Using default primary key of "+c),this.primaryKey=c}a.collection&&(this.collection=a.collection),this.debug("  array of length "+this.collection.length),Object.apply(this,arguments)};g.prototype=Object.create(Object.prototype,{constructor:{value:g},fieldDBtype:{get:function(){return this._fieldDBtype},set:function(a){a!==this.fieldDBtype&&this.warn("Using type "+this.fieldDBtype+" when the incoming object was "+a)}},debugMode:{get:function(){return void 0===this.perObjectDebugMode?!1:this.perObjectDebugMode},set:function(a){return a!==this.perObjectDebugMode?null===a||void 0===a?void delete this.perObjectDebugMode:void(this.perObjectDebugMode=a):void 0}},debug:{value:function(){return e.prototype.debug.apply(this,arguments)}},verboseMode:{get:function(){return void 0===this.perObjectVerboseMode?!1:this.perObjectVerboseMode},set:function(a){return a!==this.perObjectVerboseMode?null===a||void 0===a?void delete this.perObjectVerboseMode:void(this.perObjectVerboseMode=a):void 0}},verbose:{value:function(){return e.prototype.verbose.apply(this,arguments)}},bug:{value:function(){return e.prototype.bug.apply(this,arguments)}},confirm:{value:function(){return e.prototype.confirm.apply(this,arguments)}},warn:{value:function(){return e.prototype.warn.apply(this,arguments)}},todo:{value:function(){return e.prototype.todo.apply(this,arguments)}},collection:{get:function(){return this._collection||(this._collection=[]),this._collection},set:function(a){if(a!==this._collection){a||(a=[]);for(var b in a)a.hasOwnProperty(b)&&(a[b]||this.warn(b+" is undefined on this member of the collection",a),this.add(a[b]));return this._collection}}},getKeys:{value:function(){var a=this;return this.collection.map(function(b){return a.getSanitizedDotNotationKey(b)})}},find:{value:function(a,b,c){var d,g,h,i=[];if(a&&b?(d=b,g=a):a&&!b&&(d=a),g=g||this.primaryKey||"id",this.debug("find is searchingFor",d),!d)return i;if("[object Array]"===Object.prototype.toString.call(d)&&(this.bug("User is using find on an array... ths is best re-coded to use search or something else.",d),this.todo("User is using find on an array... ths is best re-coded to use search or something else. Instead running find only on the first item in the array."),d=d[0]),"object"==typeof d&&!(d instanceof RegExp)){if(0===Object.keys(d).length)return i;var j=d[this.primaryKey];j||!this.INTERNAL_MODELS||!this.INTERNAL_MODELS.item||"function"!=typeof this.INTERNAL_MODELS.item||d instanceof this.INTERNAL_MODELS.item?j||d instanceof e?j||this.bug("This searchingFor is a object, and has no key. this is a problem. ",d):d=new e(d):d=new this.INTERNAL_MODELS.item(d),j=d[this.primaryKey],d=j}this[d]&&i.push(this[d]),c&&(d=new RegExp(".*"+d+".*","i"),h=new RegExp(".*"+this.sanitizeStringForPrimaryKey(d)+".*","i"),this.debug("fuzzy ",d,h)),d&&d.test&&"function"==typeof d.test||(d&&d.indexOf&&0!==d.indexOf("/")&&(d=f(d)),d=new RegExp("^"+d+"$")),this.debug("searchingFor",d);for(var k in this.collection)this.collection.hasOwnProperty(k)&&(d.test(this.collection[k][g])?i.push(this.collection[k]):c&&h.test(this.collection[k][g])&&i.push(this.collection[k]));return i}},fuzzyFind:{value:function(a,b){return this.find(a,b,!0)}},set:{value:function(a,b,c,d){if(c=c||this.primaryKey||"id",(null===d||void 0===d)&&(d=this.inverted),b&&this[a]&&(b===this[a]||"function"==typeof this[a].equals&&this[a].equals(b)))return this.debug("Not setting "+a+", it  was already the same in the collection"),this[a];(null===b||void 0===b)&&this.remove(a,c);for(var e in this.collection)if(this.collection.hasOwnProperty(e)&&this.collection[e][c]===a)return this.debug("found a match in the _collection, ",this.collection[e].equals),(this.collection[e]!==b||"function"==typeof this.collection[e].equals&&!this.collection[e].equals(b))&&(this.warn("Overwriting an existing _collection member "+a+" at index "+e+" (they have the same key but are not equal, nor the same object) "),this.warn("Overwriting ",this.collection[e],"->",b),this.collection[e]=b),b;return-1===["collection","primaryKey","find","set","add","inverted","toJSON","length","encrypted","confidential","decryptedMode"].indexOf(a)?(this[a]=b,"function"==typeof a.toLowerCase&&(this[a.toLowerCase().replace(/_/g,"")]=b)):this.warn("An item was added to the collection which has a reserved word for its key... dot notation will not work to retreive this object, but find() will work. ",b),d?this.collection.unshift(b):this.collection.push(b),b}},length:{get:function(){return this.collection?this.collection.length:0}},getSanitizedDotNotationKey:{value:function(a){if(!this.primaryKey)throw this.warn("The primary key is undefined, nothing can be added!",this),"The primary key is undefined, nothing can be added!";var b=a[this.primaryKey];if(!b)return void this.warn("This object is missing a value for the prmary key "+this.primaryKey+"... it will be hard to find in the collection.",a);"function"==typeof b.trim&&(b=b.trim());var c=b;return b=this.sanitizeStringForPrimaryKey(b),b!==c&&this.warn("The sanitized the dot notation key of this object is not the same as its primaryKey: "+c+" -> "+b),b}},add:{value:function(a){this.INTERNAL_MODELS&&this.INTERNAL_MODELS.item&&a&&a.constructor!==this.INTERNAL_MODELS.item&&(this.INTERNAL_MODELS.item.fieldDBtype&&"Document"===this.INTERNAL_MODELS.item.fieldDBtype?"object"===a.constructor?(this.warn("this is going to be a FieldDBObject, even though its supposed to be a Document.",a),a=new e(a)):this.debug("this is "+a[this.primaryKey]+" already some sort of an object.",a.fieldDBtype):(this.debug("casting an item to match the internal model",this.INTERNAL_MODELS.item,a),a=new this.INTERNAL_MODELS.item(a)));var b=this.getSanitizedDotNotationKey(a);if(!b)throw this.warn("The primary key "+this.primaryKey+" is undefined on this object, it cannot be added! ",a),"The primary key is undefined on this object, it cannot be added! "+a;return this.debug("adding "+b),this.set(b,a),this[b]}},push:{value:function(a){this.set(this.getSanitizedDotNotationKey(a),a,null,!1)}},unshift:{value:function(a){this.set(this.getSanitizedDotNotationKey(a),a,null,!0)}},remove:{value:function(a,b){b&&this.todo("remove optionalKeyToIdentifyItem "+b);var c,d,e=[],f=[],g=this;if("[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]),a.map(function(a){f=f.concat(g.find(a))}),this.debug("requested remove of ",f),0===f.length)return this.warn("Didn't remove object(s) which were not in the collection.",f),e;for(c=0;c<f.length;c++)f[c]&&f[c]!=={}?(d=this.getSanitizedDotNotationKey(f[c]),d||this.warn("This item had no primary key, it will only be removed from the collection. ",f[c]),this[d]&&(this.debug("removed dot notation for ",d),delete this[d]),this[d.toLowerCase().replace(/_/g,"")]&&(this.debug("removed dot notation for ",d.toLowerCase().replace(/_/g,"")),delete this[d.toLowerCase().replace(/_/g,"")])):this.debug("skipping ",f[c]);for(c=this.collection.length-1;c>=0;c--)if(f.indexOf(this.collection[c])>-1&&-1===e.indexOf(this.collection[c])){var h=this.collection.splice(c,1);e=e.concat(h);for(var i=0;i<h.length;i++)if("object"==typeof a[0]&&"function"==typeof h[i].equals){for(var j=!1,k=0;k<a.length;k++)h[i].equals(a[k])&&(j=!0);j||(this.warn("One of the requested removal items dont match what was removed "),this.debug("One of the requested removal items dont match what was removed ",a,"-> ",h[i]))}}return 0===e.length&&this.warn("Didn't remove object(s) which were not in the collection.",f),this.removedCollection=this.removedCollection||[],this.removedCollection=this.removedCollection.concat(e),e}},indexOf:{value:function(a){if(!this._collection||0===this.collection.length)return-1;for(var b=0;b<this._collection.length;b++){var c=a[this.primaryKey];if(!c){if(a=this.find(a),!(a&&a.length>0))return-1;a=a[0],c=a[this.primaryKey]}if(this._collection[b][this.primaryKey]===c)return b}return-1}},reorder:{value:function(a,b){if("object"==typeof a&&(a=this.indexOf(a)),b>=this._collection.length)for(var c=b-this._collection.length;c--+1;)this._collection.push(void 0);this._collection.splice(b,0,this._collection.splice(a,1)[0])}},toJSON:{value:function(a,b){b&&this.todo("removeEmptyAttributes is not implemented: "+b);var c=this,d=this._collection.map(function(a){return"function"==typeof a.toJSON?(c.debug("This item has a toJSON, which we will call instead"),a.toJSON()):a});return d}},clone:{value:function(a){a&&this.todo("includeEvenEmptyAttributes is not implemented: "+a);var b=JSON.parse(JSON.stringify(this.toJSON()));return b}},map:{get:function(){if(this._collection&&"function"==typeof this._collection.map){var a=this;return function(b){return this._collection.map.apply(a._collection,[b])}}return void 0}},sanitizeStringForPrimaryKey:{value:function(a){return this.debug("sanitizeStringForPrimaryKey "+a),a?a.trim?(a=d.clean(a),a=a.trim().replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_/,"").replace(/_$/,""),this.camelCased(a)):"number"==typeof a?parseInt(a,10):null:null}},capitalizeFirstCharacterOfPrimaryKeys:{value:{get:function(){return void 0===this._capitalizeFirstCharacterOfPrimaryKeys?!1:this._capitalizeFirstCharacterOfPrimaryKeys},set:function(a){this._capitalizeFirstCharacterOfPrimaryKeys=a}}},camelCased:{value:function(a){return a?(a.replace&&(a=a.replace(/_([a-zA-Z])/g,function(a){return a[1].toUpperCase()}),a=this.capitalizeFirstCharacterOfPrimaryKeys?a[0].toUpperCase()+a.substring(1,a.length):a[0].toLowerCase()+a.substring(1,a.length)),a):null}},merge:{value:function(a,b,c){var d,e,f,g,h=this;return"self"===a?(this.debug("Merging into myself. "),d=this):d=a,e=this,c||(c=""),b&&0!==b.length?(d._collection.map(function(i){var j=i[d.primaryKey].toLowerCase(),k=b[j],l=e[j];if(!l&&"function"==typeof i.constructor){var m=i.toJSON?i.toJSON():i;l=new i.constructor(m);var n=e.find(l);0===n.length?e.add(l):(l=n[0],h.debug("resultItem was already in the resultCollection  ",n,l))}if(i!==d[j]&&h.bug(" Looking at an anItem that doesnt match the aCollection's member of "+j),void 0===k)h.debug(j+" was missing in new collection"),e[j]=i;else if(i===k||"function"==typeof i.equals&&i.equals(k))h.debug(j+" were equal.",i,k),l!==i&&(e[j]=i);else if(i&&i!==[]&&0!==i.length&&i!=={})if("[object Array]"===Object.prototype.toString.call(i)&&"[object Array]"===Object.prototype.toString.call(k))h.debug(j+" was an array, concatinating with the new value",i," ->",k),l=i.concat(k),h.debug("  ",l);else if("function"==typeof l.merge){g="self"===a?a:i,h.debug("Requesting merge of internal property "+j+" using method: "+g);var o=l.merge(g,k,c);h.debug("after internal merge ",o),h.debug("after internal merge ",l)}else f=c,-1===c.indexOf("overwrite")?h.confirm("I found a conflict for "+j+", Do you want to overwrite it from "+JSON.stringify(i)+" -> "+JSON.stringify(k)).then(function(){h.warn("IM HERE HERE"),h.warn("Overwriting contents of "+j+" (this may cause disconnection in listeners)"),h.debug("Overwriting  ",i," ->",k),e[j]=k},function(){h.debug("Not Overwriting  ",i," ->",k),e[j]=i}):(h.warn("Overwriting contents of "+j+" (this may cause disconnection in listeners)"),h.debug("Overwriting  ",i," ->",k),e[j]=k);else h.debug(j+" was previously empty, taking the new value"),e[j]=k}),b._collection.map(function(a){var c=a[d.primaryKey],f=d[c];if(a!==b[c]&&h.bug(" Looking at an anItem that doesnt match the anotherCollection's member of "+c),void 0===f){h.debug(c+" was missing in target, adding it");var g=e.find(a);0===g.length?e.add(a):(a=g[0],h.debug("anotherItem was already in the resultCollection ",g,a))}else void 0===a?(h.debug(c+" was oddly undefined"),e[c]=f):f===a||"function"==typeof f.equals&&f.equals(a)?e[c]=f:a&&a!==[]&&0!==a.length&&a!=={}?h.debug(c+" existed in both and are not equal, and so have already been merged above."):(h.warn(c+" was empty in the new collection, so it was replaced with an empty anItem."),e[c]=a)}),e):(this.debug("The new collection was empty, not merging.",b),e)}},encrypted:{get:function(){},set:function(a){this._collection&&(void 0===this._collection.map&&this.warn("This collection isn't an array, this is odd",this),this._collection.map(function(b){b.encrypted=a}))}},confidential:{get:function(){},set:function(a){this._collection&&(void 0===this._collection.map&&this.warn("This collection isn't an array, this is odd",this),this._collection.map(function(b){b.confidential=a}))}},decryptedMode:{get:function(){},set:function(a){this._collection&&(void 0===this._collection.map&&this.warn("This collection isn't an array, this is odd",this),this._collection.map(function(b){b.decryptedMode=a}))}},dbname:{get:function(){},set:function(a){this._collection&&(void 0===this._collection.map&&this.warn("This collection isn't an array, this is odd",this),this._collection.map(function(b){b.dbname=a}))}}}),c.Collection=g},{"./FieldDBObject":4,diacritic:75}],3:[function(a,b,c){var d=a("q"),e=a("./CORS").CORS,f=f||{};f.CORS=e,f.setXMLHttpRequestLocal=function(a){f.CORS=a},f.connection={localCouch:{connected:!1,url:"https://localhost:6984",couchUser:null},centralAPI:{connected:!1,url:"https://localhost:3181/v2",fieldDBUser:null}},f.connect=function(){var a=d.defer();if(this.timestamp&&this.connection.couchUser&&this.connection.fieldDBUser&&Date.now()-this.timestamp<1e3)return console.log("connection information is not old."),d.nextTick(function(){a.resolve(this.connection)}),a.promise;var b=d.defer(),c=d.defer(),e=[b.promise,c.promise],g=this;return f.CORS.makeCORSRequest({method:"GET",dataType:"json",url:g.connection.localCouch.url+"/_session"}).then(function(a){return this.timestamp=Date.now(),console.log(a),a&&a.userCtx?(g.connection.localCouch.connected=!0,g.connection.localCouch.timestamp=Date.now(),g.connection.localCouch.couchUser=a.userCtx,void(a.userCtx.name||f.CORS.makeCORSRequest({method:"POST",dataType:"json",data:{name:"public",password:"none"},url:g.connection.localCouch.url+"/_session"}).then(function(){console.log("Logged the user in as the public user so they can only see public info."),b.resolve(a)}).fail(function(a){console.log("The public user doesnt exist on this couch...",a),b.reject(a)}))):(g.connection.localCouch.connected=!1,g.connection.localCouch.timestamp=Date.now(),void b.reject({eror:'Recieved an odd response from the local couch. Can"t contact the local couchdb, it might be off or it might not be installed. This device can work online only.'}))}).fail(function(a){this.timestamp=Date.now(),console.log(a),g.connection.localCouch.connected=!1,g.connection.localCouch.timestamp=Date.now(),b.reject(a)}),f.CORS.makeCORSRequest({method:"GET",dataType:"json",url:g.connection.centralAPI.url+"/users"}).then(function(a){return this.timestamp=Date.now(),console.log("FieldDBConnection",a),a&&a.user?(g.connection.centralAPI.connected=!0,g.connection.centralAPI.timestamp=Date.now(),g.connection.localCouch.user=a.user,void(a.user.username||f.CORS.makeCORSRequest({method:"POST",dataType:"json",data:{username:"public",password:"none"},url:g.connection.centralAPI.url+"/users"}).then(function(){console.log("Logged the user in as the public user so they can only see public info."),c.resolve(a)}).fail(function(a){console.log('The public user doesn"t exist on this couch...',a),c.reject(a)}))):(g.connection.centralAPI.connected=!1,g.connection.centralAPI.timestamp=Date.now(),void c.reject({eror:'Received an odd response from the api. Can"t contact the api server. This is a bug which must be reported.'}))}).fail(function(a){this.timestamp=Date.now(),console.log(a),g.connection.centralAPI.connected=!1,g.connection.centralAPI.timestamp=Date.now(),c.reject(a)}),d.allSettled(e).then(function(b){console.log(b),a.resolve(this.connection)}),a.promise},c&&(c.FieldDBConnection=f)},{"./CORS":1,q:76}],4:[function(a,b,c){var d,e=a("__browserify_process"),f=a("./CORS").CORS,g=a("diacritic"),h=a("q");try{d=a("./../package.json")}catch(i){console.log("failed to load package.json",i),d={version:"2.2.0"}}var j=function(a){this._fieldDBtype||(this._fieldDBtype="FieldDBObject"),this.verbose("In parent an json",a),a&&a.confidential&&this.INTERNAL_MODELS.confidential&&(this.confidential=new this.INTERNAL_MODELS.confidential(a.confidential)),this.INTERNAL_MODELS&&this.debug("parsing with ",this.INTERNAL_MODELS);var b=[];for(var c in a)a.hasOwnProperty(c)&&(this.debug("JSON: "+c),a[c]&&this.INTERNAL_MODELS&&this.INTERNAL_MODELS[c]&&"function"==typeof this.INTERNAL_MODELS[c]&&a[c].constructor!==this.INTERNAL_MODELS[c]?"string"==typeof a[c]&&this.INTERNAL_MODELS[c].constructor&&"ContextualizableObject"===this.INTERNAL_MODELS[c].prototype.fieldDBtype?(this.warn("this member "+c+" is supposed to be a ContextualizableObject but it is a string, not converting it into a ContextualizableObject",a[c]),b.push(c)):(this.debug("Parsing model: "+c),a[c]=new this.INTERNAL_MODELS[c](a[c])):b.push(c),this[c]=a[c]);b.length>0&&this.debug("simpleModels",b.join(", ")),Object.apply(this,arguments),this.id||(this.dateCreated=Date.now()),this.render||(this.render=function(a){this.warn("Rendering, but the render was not injected for this "+this.fieldDBtype,a)})};j.software={},j.hardware={},j.DEFAULT_STRING="",j.DEFAULT_OBJECT={},j.DEFAULT_ARRAY=[],j.DEFAULT_COLLECTION=[],j.DEFAULT_VERSION="v"+d.version,j.DEFAULT_DATE=0,j.bug=function(a){try{alert(a)}catch(b){console.warn(this.fieldDBtype.toUpperCase()+" BUG: "+a)}},j.warn=function(a,b,c,d){console.warn(this.fieldDBtype.toUpperCase()+" WARN: "+a),b&&console.warn(b),c&&console.warn(c),d&&console.warn(d)},j.confirm=function(a,b){var c=h.defer(),d=this;return h.nextTick(function(){var e;d.alwaysConfirmOkay&&(console.warn(d.fieldDBtype.toUpperCase()+" NOT ASKING USER: "+a+" \nThe code decided that they would probably yes and it wasnt worth asking."),e=d.alwaysConfirmOkay);try{e=confirm(a)}catch(f){console.warn(d.fieldDBtype.toUpperCase()+" ASKING USER: "+a+" pretending they said "+d.alwaysConfirmOkay),e=d.alwaysConfirmOkay}e?c.resolve({message:a,optionalLocale:b,response:e}):c.reject({message:a,optionalLocale:b,response:e})}),c.promise},j.uuidGenerator=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return Date.now()+(a()+a()+a()+a()+a()+a()+a()+a())},j.getHumanReadableTimestamp=function(){var a=new Date,b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),f=a.getMinutes();return 10>c&&(c="0"+c),10>d&&(d="0"+d),10>e&&(e="0"+e),10>f&&(f="0"+f),b+"-"+c+"-"+d+"_"+e+"."+f},j.prototype=Object.create(Object.prototype,{constructor:{value:j},fieldDBtype:{configurable:!0,get:function(){return this._fieldDBtype},set:function(a){a!==this.fieldDBtype&&this.debug("Using type "+this.fieldDBtype+" when the incoming object was "+a)}},debugMode:{get:function(){return void 0===this.perObjectDebugMode?!1:this.perObjectDebugMode},set:function(a){return a!==this.perObjectDebugMode?null===a||void 0===a?void delete this.perObjectDebugMode:void(this.perObjectDebugMode=a):void 0}},debug:{value:function(a,b,c,d){try{if(navigator&&"Microsoft Internet Explorer"===navigator.appName)return}catch(e){}this.debugMode&&(console.log(this.fieldDBtype.toUpperCase()+" DEBUG: "+a),b&&console.log(b),c&&console.log(c),d&&console.log(d))}},verboseMode:{get:function(){return void 0===this.perObjectVerboseMode?!1:this.perObjectVerboseMode},set:function(a){return a!==this.perObjectVerboseMode?null===a||void 0===a?void delete this.perObjectVerboseMode:void(this.perObjectVerboseMode=a):void 0}},verbose:{value:function(a,b,c,d){this.verboseMode&&this.debug(a,b,c,d)}},bug:{value:function(a){if(this.bugMessage){if(this.bugMessage.indexOf(a)>-1)return void this.warn("Not repeating bug message: "+a);this.bugMessage+=";;; "}else this.bugMessage="";this.bugMessage=this.bugMessage+a,j.bug.apply(this,arguments)}},alwaysConfirmOkay:{get:function(){return void 0===this.perObjectAlwaysConfirmOkay?!1:this.perObjectAlwaysConfirmOkay},set:function(a){return a!==this.perObjectAlwaysConfirmOkay?null===a||void 0===a?void delete this.perObjectAlwaysConfirmOkay:void(this.perObjectAlwaysConfirmOkay=a):void 0}},confirm:{value:function(a){return this.confirmMessage?this.confirmMessage+="\n":this.confirmMessage="",this.confirmMessage=this.confirmMessage+a,j.confirm.apply(this,arguments)}},warn:{value:function(a){this.warnMessage?this.warnMessage+=";;; ":this.warnMessage="",this.warnMessage=this.warnMessage+a,j.warn.apply(this,arguments)}},todo:{value:function(a,b,c,d){console.warn(this.fieldDBtype.toUpperCase()+" TODO: "+a),b&&console.warn(b),c&&console.warn(c),d&&console.warn(d)}},save:{value:function(b){var c=h.defer(),d=this;if(this.fetching)return void d.warn("Fetching is in process, can't save right now...");if(this.saving)return void d.warn("Save was already in process...");this.saving=!0,this.version=j.DEFAULT_VERSION;try{j.software=j.software||{},j.software.appCodeName=navigator.appCodeName,j.software.appName=navigator.appName,j.software.appVersion=navigator.appVersion,j.software.cookieEnabled=navigator.cookieEnabled,j.software.doNotTrack=navigator.doNotTrack,j.software.hardwareConcurrency=navigator.hardwareConcurrency,j.software.language=navigator.language,j.software.languages=navigator.languages,j.software.maxTouchPoints=navigator.maxTouchPoints,j.software.onLine=navigator.onLine,j.software.platform=navigator.platform,j.software.product=navigator.product,j.software.productSub=navigator.productSub,j.software.userAgent=navigator.userAgent,j.software.vendor=navigator.vendor,j.software.vendorSub=navigator.vendorSub,navigator&&navigator.geolocation&&"function"==typeof navigator.geolocation.getCurrentPosition&&navigator.geolocation.getCurrentPosition(function(a){d.debug("recieved position information"),j.software.location=a.coords})}catch(g){this.debug("Error loading software ",g),j.software=j.software||{},j.software.version=e.version,j.software.appVersion="PhantomJS unknown";try{var i=a,k=i("os");j.hardware=j.hardware||{},j.hardware.endianness=k.endianness(),j.hardware.platform=k.platform(),j.hardware.hostname=k.hostname(),j.hardware.type=k.type(),j.hardware.arch=k.arch(),j.hardware.release=k.release(),j.hardware.totalmem=k.totalmem(),j.hardware.cpus=k.cpus().length}catch(g){this.debug(" hardware is unknown.",g),j.hardware=j.hardware||{},j.software.appVersion="Device unknown"}}if(!b){b={name:"",username:"unknown"};try{if(j.application&&j.application.corpus&&j.application.corpus.connectionInfo){var l=j.application.corpus.connectionInfo;b.username=l.userCtx.name}}catch(g){this.warn("Can't get the corpus connection info to guess who saved this.",g)}}if("function"==typeof b.toJSON){var m=b.toJSON();m.name=b.name,b=m}else b.name=b.name;if(this._rev){this._dateModified=Date.now();var n=this.modifiedByUser||{};this.fields&&this.fields.modifiedbyuser?n=this.fields.modifiedbyuser:this.modifiedByUser||(this.modifiedByUser=n),this.modifiedByUsers&&(n={json:{users:this.modifiedByUsers}},delete this.modifiedByUsers),n.value=n.value?n.value+", ":"",n.value+=b.name||b.username,n.json=n.json||{},n.users&&(n.json.users=n.users,delete n.users),n.json.users=n.json.users||[],b.software=j.software,b.hardware=j.hardware,n.json.users.push(b)}else{this._dateCreated=Date.now();var o=this.enteredByUser||{};this.fields&&this.fields.enteredbyuser?o=this.fields.enteredbyuser:this.enteredByUser||(this.enteredByUser=o),o.value=b.name||b.username,o.json=o.json||{},o.json.user=b,o.json.software=j.software;try{o.json.hardware=Android?Android.deviceDetails:j.hardware}catch(g){this.debug("Cannot detect the hardware used for this save.",g),o.json.hardware=j.hardware}}if(j.software&&j.software.location){var p;this.location?p=this.location:this.fields&&this.fields.location&&(p=this.fields.location),p&&(p.json=p.json||{},p.json.previousLocations=p.json.previousLocations||[],p.json&&p.json.location&&p.json.location.latitude&&p.json.previousLocations.push(p.json.location),this.debug("overwriting location ",p),p.json.location=j.software.location,p.value=p.json.location.latitude+","+p.json.location.longitude)}this.debug("saving   ",this);var q=this.id?"/"+this.id:"";q=this.url+q;var r=this.toJSON();return f.makeCORSRequest({type:this.id?"PUT":"POST",dataType:"json",url:q,data:r}).then(function(a){d.debug("saved ",a),d.saving=!1,a.id?(d.id=a.id,d.rev=a.rev,c.resolve(d)):c.reject(a)},function(a){d.debug(a),d.saving=!1,c.reject(a)}).catch(function(a){d.debug(a),d.saving=!1,c.reject(a)}),c.promise}},"delete":{value:function(a){return this.trash(a)}},trash:{value:function(a){return this.trashed="deleted",a&&(this.trashedReason=a),this.todo("consider using a confirm to ask for a reason for deleting the item"),this.save()}},undelete:{value:function(a){return this.trashed="restored",a&&(this.untrashedReason=a),this.todo("consider using a confirm to ask for a reason for undeleting the item"),this.save()}},saveToGit:{value:function(a){var b=h.defer(),c=this;return h.nextTick(function(){c.todo("If in nodejs, write to file and do a git commit with optional user's email who modified the file and push ot a branch with that user's username"),c.debug("Commit to be used: ",a),b.resolve(c)}),b.promise}},equals:{value:function(a){for(var b in this)if(this.hasOwnProperty(b)&&"function"!=typeof this[b])if(this[b]&&"function"==typeof this[b].equals){if(!this[b].equals(a[b]))return this.debug("  "+b+": ",this[b]," not equal ",a[b]),!1}else if(this[b]===a[b])this.debug(b+": "+this[b]+" equals "+a[b]);else if(JSON.stringify(this[b])===JSON.stringify(a[b]))this.debug(b+": "+this[b]+" equals "+a[b]);else{if(void 0===a[b])return this.debug(b+": "+this[b]+" not equal "+a[b]),!1;if("_dateCreated"!==b&&"perObjectDebugMode"!==b)return this.debug(b+": ",this[b]," not equal ",a[b]),!1}else this.debug("skipping equality of "+b);return"function"!=typeof a.equals||void 0!==this.dontRecurse||(this.dontRecurse=!0,a.dontRecurse=!0,a.equals(this))?(delete this.dontRecurse,delete a.dontRecurse,!0):!1}},merge:{value:function(a,b,c){var d,e,f,g,h,i;if("self"===a?(this.debug("Merging properties into myself. "),d=this):d=a,e=this,c||(c=""),d.id&&b.id&&d.id!==b.id)return this.warn("Refusing to merge these objects, they have different ids: "+d.id+"  and "+b.id),this.debug("Refusing to merge"+d.id+"  and "+b.id,d,b),null;if(d.dbname&&b.dbname&&d.dbname!==b.dbname)if(c.indexOf("keepDBname")>-1)this.warn("Permitting a merge of objects from different databases: "+d.dbname+"  and "+b.dbname),this.debug("Merging ",d,b);else if(-1===c.indexOf("changeDBname"))return this.warn("Refusing to merge these objects, they come from different databases: "+d.dbname+"  and "+b.dbname),this.debug("Refusing to merge"+d.dbname+"  and "+b.dbname,d,b),null;var j=function(a,f){a.confirm("I found a conflict for "+f+", Do you want to overwrite it from "+JSON.stringify(d[f])+" -> "+JSON.stringify(b[f])).then(function(){"_dbname"===f&&c.indexOf("keepDBname")>-1?a.warn(" Keeping _dbname of "+e.dbname):(a.warn("Async Overwriting contents of "+f+" (this may cause disconnection in listeners)"),a.debug("Async Overwriting  ",d[f]," ->",b[f]),e[f]=b[f])},function(){e[f]=d[f]})};for(f in b)if(b.hasOwnProperty(f)&&"function"!=typeof d[f]&&"dateCreated"!==f)if(void 0===b[f])this.debug(f+" was missing in new object"),e[f]=d[f];else if(d[f]===b[f])this.debug(f+" were equal."),e[f]=d[f];else if(d[f]&&d[f]!==[]&&0!==d[f].length&&d[f]!=={})if("[object Array]"===Object.prototype.toString.call(d[f])&&"[object Array]"===Object.prototype.toString.call(b[f]))this.debug(f+" was an array, concatinating with the new value",d[f]," ->",b[f]),e[f]=d[f].concat(b[f]),this.debug("  ",e[f]);else{if(!e[f]&&"function"==typeof d[f].constructor){var k=d[f].toJSON?d[f].toJSON():d[f];e[f]=new d[f].constructor(k)}if(e[f]&&"function"==typeof e[f].merge){i="self"===a?a:d[f],this.debug("Requesting merge of internal property "+f+" using method: "+i);var l=e[f].merge(i,b[f],c);this.debug("after internal merge ",l),this.debug("after internal merge ",e[f])}else h=c,this.debug("Requested with "+c+" "+c.indexOf("overwrite")),-1===c.indexOf("overwrite")&&j(this,f),h?"_dbname"===f&&c.indexOf("keepDBname")>-1?this.warn(" Keeping _dbname of "+e.dbname):(this.warn("Overwriting contents of "+f+" (this may cause disconnection in listeners)"),this.debug("Overwriting  ",d[f]," ->",b[f]),e[f]=b[f]):e[f]=d[f]}else g=!0,this.debug(f+" was previously empty, taking the new value"),e[f]=b[f];else this.debug("  merge: ignoring "+f);return e}},fetch:{value:function(a){var b,c=h.defer(),d=this;return(b=this.id)?(this.fetching=!0,f.makeCORSRequest({type:"GET",dataType:"json",url:a+"/"+d.dbname+"/"+b}).then(function(a){d.fetching=!1,d.loaded=!0,d.merge("self",a,"overwrite"),c.resolve(d)},function(a){d.fetching=!1,d.debug(a),c.reject(a)}),c.promise):(h.nextTick(function(){c.reject({error:"Cannot fetch if there is no id"})}),c.promise)}},INTERNAL_MODELS:{value:{_id:j.DEFAULT_STRING,_rev:j.DEFAULT_STRING,dbname:j.DEFAULT_STRING,version:j.DEFAULT_STRING,dateCreated:j.DEFAULT_DATE,dateModified:j.DEFAULT_DATE,comments:j.DEFAULT_COLLECTION}},application:{get:function(){return j.application}},id:{get:function(){return this._id||j.DEFAULT_STRING},set:function(a){if(a!==this._id){if(!a)return void delete this._id;a.trim&&(a=a.trim()),this._id=a}}},rev:{get:function(){return this._rev||j.DEFAULT_STRING
},set:function(a){if(a!==this._rev){if(!a)return void delete this._rev;a.trim&&(a=a.trim()),this._rev=a}}},dbname:{get:function(){return this._dbname||j.DEFAULT_STRING},set:function(a){if(a!==this._dbname){if(this._dbname)throw"This is the "+this._dbname+". You cannot change the dbname of a corpus, you must create a new object first.";if(!a)return void delete this._dbname;a.trim&&(a=a.trim()),this._dbname=a}}},pouchname:{get:function(){return this.debug("pouchname is deprecated, use dbname instead."),this.dbname},set:function(a){this.debug("Pouchname is deprecated, please use dbname instead."),this.dbname=a}},version:{get:function(){return this._version||j.DEFAULT_VERSION},set:function(a){a!==this._version&&(a||(a=j.DEFAULT_VERSION),a.trim&&(a=a.trim()),this._version=a)}},dateCreated:{get:function(){return this._dateCreated||j.DEFAULT_DATE},set:function(a){if(a!==this._dateCreated){if(!a)return void delete this._dateCreated;if(a.replace)try{a=a.replace(/["\\]/g,""),a=new Date(a),a=a.getTime()}catch(b){this.warn("Upgraded dateCreated"+a)}this._dateCreated=a}}},dateModified:{get:function(){return this._dateModified||j.DEFAULT_DATE},set:function(a){if(a!==this._dateModified){if(!a)return void delete this._dateModified;if(a.replace)try{a=a.replace(/["\\]/g,""),a=new Date(a),a=a.getTime()}catch(b){this.warn("Upgraded dateModified"+a)}this._dateModified=a}}},comments:{get:function(){return this._comments||j.DEFAULT_COLLECTION},set:function(a){if(a!==this._comments){if(!a)return void delete this._comments;"function"==typeof this.INTERNAL_MODELS.comments&&"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.comments(a)),this._comments=a}}},isEmpty:{value:function(a){var b=!this[a]||this[a]===j.DEFAULT_COLLECTION||this[a]===j.DEFAULT_ARRAY||this[a]===j.DEFAULT_OBJECT||this[a]===j.DEFAULT_STRING||this[a]===j.DEFAULT_DATE||void 0!==this[a].length&&0===this[a].length||this[a]==={};return b}},toJSON:{value:function(a,b){var c,d,e={fieldDBtype:this.fieldDBtype};if(this.fetching)throw"Cannot get json while object is fetching itself";this.version=this.version;for(c in this)this.hasOwnProperty(c)&&"function"!=typeof this[c]&&(d=c.replace(/^_/,""),("id"===d||"rev"===d)&&(d="_"+d),(!b||b&&!this.isEmpty(c))&&(e[d]=this[c]&&"function"==typeof this[c].toJSON?this[c].toJSON(a,b):this[c]));if(a)for(c in this.INTERNAL_MODELS)!e[c]&&this.INTERNAL_MODELS&&(e[c]=this.INTERNAL_MODELS[c]&&"function"==typeof this.INTERNAL_MODELS[c]&&"function"==typeof(new this.INTERNAL_MODELS[c]).toJSON?(new this.INTERNAL_MODELS[c]).toJSON(a,b):this.INTERNAL_MODELS[c]);return e._id||delete e._id,e._rev||delete e._rev,e.dbname&&(e.pouchname=e.dbname,this.debug("Serializing pouchname for backward compatability until prototype can handle dbname")),delete e.saving,delete e.fetching,delete e.loaded,delete e.decryptedMode,delete e.bugMessage,delete e.warnMessage,delete e.perObjectDebugMode,delete e.perObjectAlwaysConfirmOkay,delete e.application,delete e.contextualizer,"private_corpuses"!==this._collection?(delete e.confidential,delete e.confidentialEncrypter):this.warn("serializing confidential in this object "+this._collection),this.api&&(e.api=this.api),e}},clone:{value:function(a){a&&this.warn(a+" TODO includeEvenEmptyAttributes is not used ");var b,c=JSON.parse(JSON.stringify(this.toJSON()));c.datumFields&&c.datumFields.relatedData?b=c.datumFields.relatedData.json.relatedData||[]:c.relatedData?b=c.relatedData:c.relatedData=b=[];var d=c._id;return c._rev&&(d=d+"?rev="+c._rev),b.push({URI:d,relation:"clonedFrom"}),delete c._id,delete c._rev,c}},contextualizer:{get:function(){return this.application&&this.application.contextualizer?this.application.contextualizer:void 0}},sanitizeStringForFileSystem:{value:function(a,b){return this.debug("sanitizeStringForPrimaryKey "+a),a?((void 0===b||"-"===b)&&(b="_"),a.trim?(a=g.clean(a),this.debug("sanitizeStringForPrimaryKey "+a),a=a.trim().replace(/[^-a-zA-Z0-9]+/g,b).replace(/^_/,"").replace(/_$/,""),this.debug("sanitizeStringForPrimaryKey "+a),a):"number"==typeof a?parseInt(a,10):null):null}},sanitizeStringForPrimaryKey:{value:function(a,b){return this.debug("sanitizeStringForPrimaryKey "+a),a?(a.replace&&(a=a.replace(/-/g,"_")),a=this.sanitizeStringForFileSystem(a,b),a&&"number"!=typeof a?this.camelCased(a):void 0):null}},camelCased:{value:function(a){return a?(a.replace&&(a=a.replace(/_([a-zA-Z])/g,function(a){return a[1].toUpperCase()}),a=a[0].toLowerCase()+a.substring(1,a.length)),a):null}}}),c.FieldDBObject=j},{"./../package.json":79,"./CORS":1,__browserify_process:64,diacritic:75,q:76}],5:[function(a,b,c){var d=d||{};d.routes=d.routes||[],d.routes.push({path:"/:team/:corpusid/import/:importType",angularRoute:{templateUrl:"views/import-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid/import",angularRoute:{redirectTo:"/:team/:corpusid/import/data"}}),d.routes.push({path:"/:team/:corpusid/reports/:reportType",angularRoute:{templateUrl:"views/reports-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid/speakers/:speakerType",angularRoute:{templateUrl:"views/speakers-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid/participants",angularRoute:{templateUrl:"views/participants-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid/consultants",angularRoute:{templateUrl:"views/consultants-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid/sessions",angularRoute:{templateUrl:"views/sessions-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid/datalists",angularRoute:{templateUrl:"views/datalists-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid/data",angularRoute:{templateUrl:"views/all-data-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid/search/:searchQuery",angularRoute:{templateUrl:"views/search-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid/:docid",angularRoute:{templateUrl:"views/data-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team/:corpusid",angularRoute:{templateUrl:"views/corpus-page.html",controller:"OverrideYourControllerHere"}}),d.routes.push({path:"/:team",angularRoute:{templateUrl:"views/team-page.html",controller:"OverrideYourControllerHere"}}),d.otherwise={redirectTo:"/"},c&&(c.Router=d)},{}],6:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=function(a){this._fieldDBtype||(this._fieldDBtype="Activity"),this.debug("Constructing Activity ",a),d.apply(this,arguments),this.timestamp||(this.timestamp=Date.now()),this.verbicon||(this.verbicon=this.verbicon)};e.uuidGenerator=d.uuidGenerator,e.prototype=Object.create(d.prototype,{constructor:{value:e},build:{value:function(a){this.timestamp=Date.now(),this.user={gravatar:a.gravatar,username:a.username}}},api:{value:"/activities"},defaults:{value:{verb:{create:{verb:"added",verbmask:"did something",verbicon:"icon-plus",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},record:{verb:"recorded",verbmask:"did something",verbicon:"icon-microphone",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},video:{verb:"videoed",verbmask:"did something",verbicon:"icon-video-camera",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},photo:{verb:"photographed",verbmask:"did something",verbicon:"icon-camera",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},requestedRecognition:{verb:"used speech recognier",verbmask:"did something",verbicon:"icon-microphone",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},recievedRecognition:{verb:"recieved an ASR result",verbmask:"did something",verbicon:"icon-refresh",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},share:{verb:"added",verbmask:"added",verbicon:"icon-key",directobject:"someone",directobjecturl:"",directobjectmask:"someone",directobjecticon:"icon-user",indirectobject:"as a role",indirectobjecturl:"#team",indirectobjectmask:"as a role",indirectobjecticon:"icon-cloud"},"import":{verb:"imported",verbmask:"did something",verbicon:"icon-folder-open",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},view:{verb:"viewed",verbmask:"did something",verbicon:"icon-eye",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},download:{verb:"downloaded",verbmask:"did something",verbicon:"icon-download",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},modify:{verb:"modified",verbmask:"did something",verbRevisionBefore:"itemrevbefore",verbRevisionAfter:"itemrevafter",verbicon:"icon-pencil",directobject:"something",directobjectId:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjectId:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},remove:{verb:"removed",verbmask:"did something",verbicon:"icon-times-circle",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},"delete":{verb:"deleted",verbmask:"did something",verbicon:"icon-plus",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"},login:{verb:"logged in",verbmask:"did something",verbicon:"icon-check",directobject:"something",indirectobject:"to something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-cloud"}},context:{prototype:"via Offline App",spreadsheet:"via Spreadsheet App",learnx:"via LearnX App",speechrecognitiontrainer:"via Kartuli Speech Recognizer",bot:"via Futon Bot"}}},INTERNAL_MODELS:{value:{}},getDefaultForVerb:{value:function(a){return a.replace&&a.replace(/ed$/,""),this.defaults.verb[a]?this.defaults.verb[a]:a.indexOf("log")>-1&&a.indexOf("in")>-1?this.defaults.verb.login:a.indexOf("dele")>-1?this.defaults.verb.delete:a.indexOf("remov")>-1?this.defaults.verb.remove:a.indexOf("modif")>-1?this.defaults.verb.modify:a.indexOf("downloa")>-1?this.defaults.verb.download:a.indexOf("view")>-1?this.defaults.verb.view:a.indexOf("import")>-1?this.defaults.verb.import:a.indexOf("shar")>-1?this.defaults.verb.share:a.indexOf("ASR result")>-1?this.defaults.verb.recievedRecognition:a.indexOf("used speech recognier")>-1?this.defaults.verb.requestedRecognition:a.indexOf("phot")>-1?this.defaults.verb.photo:a.indexOf("video")>-1?this.defaults.verb.video:a.indexOf("recor")>-1?this.defaults.verb.record:a.indexOf("add")>-1&&a.indexOf("creat")>-1?this.defaults.verb.create:{verb:"did something",verbmask:"did something",verbicon:"icon-bell",directobject:"something",directobjecturl:"",directobjectmask:"to something",directobjecticon:"icon-circle-o",indirectobject:"in something",indirectobjecturl:"",indirectobjectmask:"in something",indirectobjecticon:"icon-square-o"}}},verb:{get:function(){return this._verb},set:function(a){a!==this._verb&&(a=this.makeLinksOpenNewWindows(a),a&&(this._verb=a))}},verbicon:{get:function(){return this._verbicon?this._verbicon:this.getDefaultForVerb(this.verb).verbicon},set:function(a){a!==this._verbicon&&(a=this.makeLinksOpenNewWindows(a),a&&(this._verbicon=a))}},directobject:{get:function(){return this._directobject},set:function(a){a!==this._directobject&&(a=this.makeLinksOpenNewWindows(a),a&&(this._directobject=a))}},indirectobject:{get:function(){return this._indirectobject},set:function(a){a!==this._indirectobject&&(a=this.makeLinksOpenNewWindows(a),a&&(this._indirectobject=a))}},context:{get:function(){return this._context},set:function(a){a!==this._context&&(a=this.makeLinksOpenNewWindows(a),a&&(this._context=a))}},makeLinksOpenNewWindows:{value:function(a){return a.replace&&(a=a.replace("href=","target='_blank' href=")),a}},timestamp:{get:function(){return this._timestamp},set:function(a){if(a!==this._timestamp){if(!a)return void delete this._timestamp;(""+a).indexOf("Z")>-1&&(a=new Date(a).getTime()),this._timestamp=a}}},save:{value:function(){return this.debug("Customizing activity save "),d.prototype.save.apply(this,arguments)}},toJSON:{value:function(a,b){this.debug("Customizing activity toJSON ",a,b),this.verb=this.verb,this.directobject=this.directobject,this.indirectobject=this.indirectobject,this.context=this.context;var c=d.prototype.toJSON.apply(this,arguments);return this.debug(c),c}}}),c.Activity=e},{"./../FieldDBObject":4}],7:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=a("./../activity/Activity").Activity,f=a("./../FieldDBObject").FieldDBObject,g=a("./../corpus/Corpus").Corpus,h=a("./../data_list/DataList").DataList,i=a("./../import/Import").Import,j=a("./../search/Search").Search,k=a("./../FieldDBObject").FieldDBObject,l=a("./../Router").Router,m=a("./../user/User").User,n=a("./../user/UserMask").UserMask,o=a("./../user/Team").Team,p=a("./../locales/Contextualizer").Contextualizer,q=a("q"),r=function(a){this._fieldDBtype||(this._fieldDBtype="App"),this.debug("Constructing App ",a),d.apply(this,arguments),d.application&&(this.warn("You shouldn't declare two apps at one time. Overwriting previous app."),this.debug("previous app",d.application)),d.application=this,this.speakersList=this.speakersList||new h({title:{"default":"locale_All_Speakers"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"speakers"}),this.consultantsList=this.consultantsList||new h({title:{"default":"locale_All_Language_Consultants"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"consultants"}),this.participantsList=this.participantsList||new h({title:{"default":"locale_All_Participants"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"participants"}),this.usersList=this.usersList||new h({title:{"default":"locale_All_Users"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"users"}),this.sessionsList=this.sessionsList||new h({title:{"default":"locale_All_Elicitation_Sessions"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"sessions"}),this.datalistsList=this.datalistsList||new h({title:{"default":"locale_All_Datalists"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"datalists"}),this.datumsList=this.datumsList||new h({title:{"default":"locale_All_Data"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"datums"}),this.commentsList=this.commentsList||new h({title:{"default":"All Comments"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"comments"}),this.responsesList=this.responsesList||new h({title:{"default":"List of Responses"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"responses"}),this.experimentsList=this.experimentsList||new h({title:{"default":"List of Experiment Results"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"experiments"}),this.reportsList=this.reportsList||new h({title:{"default":"List of Reports"},description:{"default":"This list was automatically generated by looking in the corpus."},api:"reports"}),this.importer=this.importer||null,this.search=this.search||null,this.currentDoc=this.currentDoc||null,this.team=this.team||null,this.corpus=this.corpus||null,this.thisyear=(new Date).getFullYear();var b=this;q.nextTick(function(){b.warn("An app of type "+b.fieldDBtype+" has become automagically available to all fielddb objects")})};r.prototype=Object.create(d.prototype,{constructor:{value:r},authentication:{get:function(){return this._authentication||d.DEFAULT_OBJECT},set:function(a){if(a!==this._authentication){if(!a)return void delete this._authentication;a&&this.INTERNAL_MODELS&&this.INTERNAL_MODELS.authentication&&"function"==typeof this.INTERNAL_MODELS.authentication&&a.constructor!==this.INTERNAL_MODELS.authentication&&(this.debug("Parsing model: "+a),a=new this.INTERNAL_MODELS.authentication(a)),this._authentication=a}}},contextualizer:{get:function(){return this._contextualizer},set:function(a){if(a!==this._contextualizer){if(!a)return void delete this._contextualizer;a&&this.INTERNAL_MODELS&&this.INTERNAL_MODELS.contextualizer&&"function"==typeof this.INTERNAL_MODELS.contextualizer&&a.constructor!==this.INTERNAL_MODELS.contextualizer&&(this.debug("Parsing model: ",a),a=new this.INTERNAL_MODELS.contextualizer(a),a.loadDefaults()),this._contextualizer=a}}},contextualize:{value:function(a){return this._contextualizer?this._contextualizer.contextualize(a):"object"==typeof a||a.default?a.default:a}},prefs:{get:function(){return this.corpus&&this.corpus.prefs?this.corpus.prefs:this.authentication&&this.authentication.user&&this.authentication.user.prefs?this.authentication.user.prefs:void 0}},enterDecryptedMode:{value:function(a){var b=q.defer(),c=this;return q.nextTick(function(){this.corpus&&"function"==typeof this.corpus.login?this.corpus.login(a).then(function(){c.decryptedMode=!0,b.resolve(!0)},function(a){b.reject(a)}):b.reject("User is not authenticated. Please log in.")}),b.promise}},load:{value:this.fetch},fetch:{value:function(){var a=this;if(!this.loadTheAppForTheFirstTime){a.debug("Loading encrypted user"),a.status="Loading encrypted user...";var b=localStorage.getItem("encryptedUser");a.authentication.loadEncryptedUser(b,function(b,c){a.debug("loadEncryptedUser",b,c),a.status="Turning on continuous sync with your team server...",a.replicateContinuouslyWithCouch(function(){a.debug("Creating backbone objects"),a.status="Building dashboard objects...",a.createAppFieldDBObjects(a.couchConnection.pouchname,function(){a.debug("Loading the backbone objects"),a.status="Loading dashboard objects...",a.loadFieldDBObjectsByIdAndSetAsCurrentDashboard(a.authentication.userPrivate.mostRecentIds,function(){a.debug("Starting the app"),a.startApp(function(){a.showHelpOrNot(),a.stopSpinner(),a.router.renderDashboardOrNot(!0)})})})})})}try{window.onbeforeunload=this.warnUserAboutSavedSyncedStateBeforeUserLeaves}catch(c){this.warn("Cannot prevent the user from exiting if there are unsaved changes.")}}},INTERNAL_MODELS:{value:{corpus:g,contextualizer:p,authentication:f,currentSession:k,currentDataList:h,search:j}},changePouch:{value:function(a,b){if(!a||void 0===a)return void this.debug("App.changePouch couchConnection must be supplied.");if(this.debug("App.changePouch setting couchConnection: ",a),this.set("couchConnection",a),d.couch.urlPrefix=this.getCouchUrl(this.couchConnection,""),this.isChromeApp)d.couch_connector.config.base_url=this.getCouchUrl(a,""),d.couch_connector.config.db_name=a.pouchname;else try{var c=window.location.pathname.replace(/^\//,"").split("/"),e=c[0];"corpus"===e&&(e=c[1]),d.couch_connector.config.db_name=e}catch(f){this.bug("Couldn't set the databse name off of the url, please report this.")}"function"==typeof b&&b()}},createAppFieldDBObjects:{value:function(a,b){null===a&&(a="default"),"default"===d.couch_connector.config.db_name&&this.bug("The app doesn't know which database its in. This is a problem."),void 0===this.authentication.userPublic&&this.authentication.set("userPublic",new n({pouchname:a})),void 0===this.authentication.userPrivate&&this.authentication.set("userPrivate",new m);var c=new g({pouchname:a});this.set("corpus",c),this.set("currentSession",new k({pouchname:a})),this.set("currentDataList",new h({pouchname:a})),this.set("search",new j({pouchname:a})),"function"==typeof b&&b()}},startApp:{value:function(a){this.render(),"function"==typeof this.router&&(this.router=new l,this.router.renderDashboardOrNot(!0),d.history.start(),"function"==typeof a&&(this.debug("Calling back the startApps callback"),a()))}},loading:{get:function(){return this._loading||this.fetching||!1},set:function(a){a!==this._loading&&(a=!!a,a===!0&&(this.status="Loading dashboard"),this.loading=a)}},stopSpinner:{value:function(){this.loading=!1}},backUpUser:{value:function(a){var b=this;("public"===b.authentication.userPrivate.username||"lingllama"===b.authentication.userPrivate.username)&&"function"==typeof a&&a(),this.saveAndInterConnectInApp(function(){b.authentication.syncUserWithServer(function(){b.view&&b.toastUser("Backed up your user preferences with your authentication server, if you log into another device, your preferences will load.","alert-info","Backed-up:"),"function"==typeof a&&a()})})}},logUserIntoTheirCorpusServer:{value:function(a,b,c,e,f){var g=this;if((null===a||void 0===a)&&(a=this.couchConnection),(null===a||void 0===a)&&this.bug("Bug: i couldnt log you into your couch database."),this.isTouchDBApp())return Android.setCredentialsAndReplicate(a.pouchname,b,c,a.domain),this.debug("Not getting a session token from the users corpus server since this is touchdb on android which has no idea of tokens."),void("function"==typeof e&&e());var h=this.getCouchUrl(a,"/_session"),i={};i.name=b,i.password=c,this.debug("Contacting your corpus server ",a,h),this.couch.login({name:b,password:c,success:function(a){a||g.bug("There was a problem logging you into your backup database, please report this."),g.view&&g.toastUser("I logged you into your team server automatically, your syncs will be successful.","alert-info","Online Mode:"),g.isChromeApp,"function"==typeof e&&e(a)},error:function(a){g.debug("serverResults",a),g.timeout(function(){d.couch.login({name:b,password:c,success:function(a){g.view&&g.toastUser("I logged you into your team server automatically, your syncs will be successful.","alert-info","Online Mode:"),g.isChromeApp,"function"==typeof e&&e(a)},error:function(a){g.view&&g.toastUser("I couldn't log you into your corpus. What does this mean? This means you can't upload data to train an auto-glosser or visualize your morphemes. You also can't share your data with team members. If your computer is online and you are using the Chrome Store app, then this probably the side effect of a bug that we might not know about... please report it to us :) "+g.contextualizer.contactUs+" If you're offline you can ignore this warning, and sync later when you're online. ","alert-danger","Offline Mode:"),"function"==typeof f&&f("I couldn't log you into your corpus."),g.debug(a),g.authentication.set("staleAuthentication",!0)}})},5e3)}})}},getCouchUrl:{value:function(a,b){return a?this.debug("Using the couchConnection passed in,",a,this.couchConnection):(a=this.couchConnection,this.debug("Using the apps ccouchConnection",a)),a||this.bug("The couch url cannot be guessed. It must be provided by the App. Please report this bug."),this.getCouchUrl(a,b)},replicateContinuouslyWithCouch:function(a,b){var c=this;return c.pouch?void c.pouch(function(d,e){var f=c.getCouchUrl();d?(c.debug("Opening db error",d),"function"==typeof b?b():(this.bug("Opening DB error"+JSON.stringify(d)),c.debug("Opening DB error"+JSON.stringify(d)))):(c.debug("Opening db success",e),c.bug("TODO check to see if  needs a slash if replicating with pouch on "+f),c.replicateFromCorpus(e,f,function(){c.replicateToCorpus(e,f)},function(){c.replicateToCorpus(e,f)}),"function"==typeof a&&a())}):(c.debug("Not replicating, no pouch ready."),void("function"==typeof a&&a()))}},replicateOnlyFromCorpus:{value:function(a,b,c){var d=this;return d.pouch?void d.pouch(function(a,e){var f=d.getCouchUrl();a?(d.debug("Opening db error",a),"function"==typeof c?c():(d.bug("Opening DB error"+JSON.stringify(a)),d.debug("Opening DB error"+JSON.stringify(a)))):e.replicate.from(f,{continuous:!1},function(a,e){d.debug("Replicate from "+f,e,a),a?"function"==typeof c?c():(d.bug("Corpus replicate from error"+JSON.stringify(a)),d.debug("Corpus replicate from error"+JSON.stringify(a))):(d.debug("Corpus replicate from success",e),"function"==typeof b&&b())})}):(d.debug("Not replicating, no pouch ready."),void("function"==typeof b&&b()))}},replicateToCorpus:{value:function(a,b,c,d){var e=this;a.replicate.to(b,{continuous:!0},function(a,f){e.debug("Replicated to "+b),e.debug(f),e.debug(a),a?(e.debug("replicate to db  error",a),"function"==typeof d?d():(e.bug("Database replicate to error"+JSON.stringify(a)),e.debug("Database replicate to error"+JSON.stringify(a)))):(e.debug("Database replicate to success",f),"function"==typeof c?c():e.debug("Database replicating"+JSON.stringify(e.couchConnection)))})}},replicateFromCorpus:{value:function(a,b,c,d){var e=this;a.replicate.from(b,{continuous:!0},function(a,f){e.debug("Replicated from "+b),e.debug(f),e.debug(a),a?(e.debug("replicate from db  error",a),"function"==typeof d?d():(e.bug("Database replicate from error"+JSON.stringify(a)),e.debug("Database replicate from error"+JSON.stringify(a)))):(e.debug("Database replicate from success",f),"function"==typeof c?c():e.debug("Database replicating"+JSON.stringify(e.couchConnection)))})}},processRouteParams:{value:function(a){var b=this;if(!a)return void this.warn("Route params are undefined, not loading anything");if(this.routeParams=a,a.importType?(b.debug("Creating an importer"),this.importer=this.importer||new i({importType:a.importType})):a.reportType?this.reportsList.filter=function(b){return a.reportType.match(b.fieldDBtype.toLowerCase())?!0:!1}:a.speakerType?this.speakersList.filter=function(b){return a.speakerType.match(b.fieldDBtype.toLowerCase())?!0:!1}:a.searchQuery?this.search=this.search||new j({searchKeywords:a.searchQuery}):a.docid&&(this.doc&&this.doc.save&&this.doc.bug("Switching to another document without saving..."),this.doc=new d({id:a.docid})),a.team&&(this.team&&this.team.save&&this.team.bug("Switching to another team without saving..."),this.team=new o({username:a.team}),a.corpusid)){if(this.currentCorpusDashboard=this.team.validateUsername(a.team).username+"/"+this.team.sanitizeStringForFileSystem(a.corpusid).toLowerCase(),this.currentCorpusDashboardDBname=this.team.validateUsername(a.team).username+"-"+this.team.sanitizeStringForFileSystem(a.corpusid).toLowerCase(),this.currentCorpusDashboardDBname.split("-").length<2)return void(this.status="Please try another url of the form teamname/corpusname "+this.currentCorpusDashboardDBname+" is not valid.");this.team.dbname=this.currentCorpusDashboardDBname,this.corpus&&this.corpus.save&&this.corpus.bug("Switching to another corpus without saving..."),this.corpus&&this.currentCorpusDashboardDBname===this.corpus.dbname||(this.corpus=new g({dbname:this.currentCorpusDashboardDBname}))}this.team&&!this.team.gravatar&&(this.team.status="Loading team details.",this.team.fetch(g.prototype.BASE_DB_URL).then(function(a){b.debug('Suceeded to download team"s public details.',a),b.status=b.team.status="Loaded team details.",b.render()},function(a){b.debug("Failed to download team details.",a),b.status=b.team.status="Failed to download team details.",b.render()})),this.corpus&&!this.corpus.title&&(this.corpus.status="Loading corpus details.",this.corpus.loadOrCreateCorpusByPouchName(this.corpus.dbname).then(function(a){b.debug("Suceeded to download corpus details.",a),b.status=b.corpus.status="Loaded corpus details.",b.application.importer&&(b.application.importer.corpus=b.corpus),b.render()},function(a){b.debug("Failed to download corpus details.",a),b.status=b.corpus.status="Failed to download corpus details. Are you sure this is the corpus you wanted to see: "+b.corpus.dbname,b.loginDetails.username=b.team.username,b.render()}).catch(function(a){b.warn("catch error",a)}))}},router:{value:l},showHelpOrNot:{value:function(){var a=this,b=this.authentication.userPrivate.username;if("public"!==b){var c=localStorage.getItem(b+"helpShownCount")||0,d=localStorage.getItem(b+"helpShownTimestamp")||0;if(0===d)return a.helpCountReason="Just in case you were wondering what all those buttons are for, check out Gretchen's Illustrated Guide to your dashboard! ",a.helpCount=3-c,localStorage.setItem(b+"helpShownCount",++c),localStorage.setItem(b+"helpShownTimestamp",Date.now()),void a.timeout(function(){a.router.navigate("help/illustratedguide",{trigger:!0})},6e4);var e=Date.now()-d;e>432e6&&0!==d&&(c=0,a.helpCountReason="Welcome back! It's been more than 5 days since you opened the app. "),c>3||(a.helpCount=3-c,localStorage.setItem(b+"helpShownCount",++c),localStorage.setItem(b+"helpShownTimestamp",Date.now()),a.router.navigate("help/illustratedguide",{trigger:!0}))}}},warnUserAboutSavedSyncedStateBeforeUserLeaves:{value:function(a){this.debug("warnUserAboutSavedSyncedStateBeforeUserLeaves",a);var b="";return this.view&&(this.view.totalUnsaved.length>=1&&(b="You have unsaved changes, click cancel to save them. \n\n"),this.view.totalUnsaved.length>=1&&(b+="You have unsynced changes, click cancel and then click the sync button to sync them. This is only important if you want to back up your data or if you are sharing your data with a team. \n\n")),""===b?void 0:"Either you haven't been using the app and Chrome wants some of its memory back, or you want to leave the app.\n\n"+b}},addActivity:{value:function(a){var b=this;a.verb=a.verb.replace("href=","target='_blank' href="),a.directobject=a.directobject.replace("href=","target='_blank' href="),a.indirectobject=a.indirectobject.replace("href=","target='_blank' href="),a.context=a.context.replace("href=","target='_blank' href="),b.debug("Saving activity: ",a);var c=new e(a),d=this.couchConnection,f=d.pouchname+"-activity_feed";"team"!==a.teamOrPersonal&&(f=this.authentication.userPrivate.username+"-activity_feed",c.attributes.user.set("gravatar",this.authentication.userPrivate.gravatar)),"team"===a.teamOrPersonal?b.currentCorpusTeamActivityFeed.addActivity(a):b.currentUserActivityFeed.addActivity(a)}},saveAndInterConnectInApp:{value:function(a,b){var c=this;b||(b=function(){c.bug("There was a bug/problem in the saveAndInterConnectInApp in App.js, somewhere along the save call. The Session is saved first, if it succeeds, then the datalist, then the corpus. The failure is somewhere along there.")}),c.currentSession.saveAndInterConnectInApp(function(){c.currentDataList.saveAndInterConnectInApp(function(){c.corpus.saveAndInterConnectInApp(function(){c.authentication.saveAndInterConnectInApp(function(){c.authentication.staleAuthentication=!0,c.view&&c.toastUser("Your dashboard has been saved, you can exit the app at anytime and return to this state.","alert-success","Exit at anytime:"),"function"==typeof a&&a()
},b)},b)},b)},b)}},subscribers:{value:{any:[]}},subscribe:{value:function(a,b,c){a=a||"any",b="function"==typeof b?b:c[b],"undefined"==typeof this.subscribers[a]&&(this.subscribers[a]=[]),this.subscribers[a].push({fn:b,context:c||this})}},unsubscribe:{value:function(a,b,c){this.visitSubscribers("unsubscribe",a,b,c)}},publish:{value:function(a,b){this.visitSubscribers("publish",a,b)}},visitSubscribers:{value:function(a,b,c,d){var e=b||"any",f=this.subscribers[e];if(!f||0===f.length)return void this.debug(e+": There were no subscribers.");var g,h=f?f.length-1:0,i=f?f.length:0;if("publish"===a){for(g=0;i>g;g++)f[g]&&f[g].fn.call(f[g].context,c);this.debug("Visited "+f.length+" subscribers.")}else for(g=h;g>=0;g--)try{if(f[g].context||this.debug("This subscriber has no context. should we remove it? "+g),f[g].context===d){var j=f.splice(g,1);this.debug("Removed subscriber "+g+" from "+b,j)}else this.debug(b+" keeping subscriber "+g,f[g].context)}catch(k){this.debug("problem visiting Subscriber "+g,f)}}},isAndroidApp:{get:function(){try{return navigator.userAgent.indexOf("OfflineAndroidApp")>-1}catch(a){return this.warn("Cant determine app type isAndroidApp, "+a),!1}}},isAndroid4:{get:function(){try{return navigator.userAgent.indexOf("Android 4")>-1}catch(a){return this.warn("Cant determine app type isAndroid4, "+a),!1}}},isChromeApp:{get:function(){try{return window.location.href.indexOf("chrome-extension")>-1}catch(a){return this.warn("Cant determine app type isChromeApp, "+a),!1}}},isCouchApp:{get:function(){try{return window.location.href.indexOf("_design/pages")>-1}catch(a){return this.warn("Cant determine app type isCouchApp, "+a),!1}}},isTouchDBApp:{get:function(){try{return window.location.href.indexOf("localhost:8128")>-1}catch(a){return this.warn("Cant determine app type isTouchDBApp, "+a),!1}}},isNodeJSApp:{get:function(){try{return void 0!==window.location.href}catch(a){return!0}}},isBackboneCouchDBApp:{get:function(){return!1}},isOnlineOnly:{get:function(){return!this.isAndroidApp&&!this.isChromeApp}}}),c.App=r},{"./../FieldDBObject":4,"./../Router":5,"./../activity/Activity":6,"./../corpus/Corpus":16,"./../data_list/DataList":22,"./../import/Import":41,"./../locales/Contextualizer":43,"./../search/Search":48,"./../user/Team":54,"./../user/User":55,"./../user/UserMask":56,q:76}],8:[function(a,b,c){var d=a("./App").App,e=function(a){this._fieldDBtype||(this._fieldDBtype="PsycholinguisticsApp"),this.debug("Constructing PsycholinguisticsApp ",a),d.apply(this,arguments)};e.prototype=Object.create(d.prototype,{constructor:{value:e},hasParticipants:{get:function(){return this.participantsList&&this.participantsList.docs&&this.participantsList.docs.length?this.participantsList.docs.length>0:!1}}}),c.PsycholinguisticsApp=e},{"./App":7}],9:[function(a,b,c){var d=a("./HTML5Audio").HTML5Audio,e=a("./HTML5Audio").HTML5Audio,f=function(a){this._fieldDBtype||(this._fieldDBtype="AudioPlayer"),this.options&&console.log("AudioPlayer was created with options but it doesnt accept options",a),console.log(d),console.log(e.play),this.mediaController=new d,Object.apply(this,arguments)};f.prototype=Object.create(Object.prototype,{constructor:{value:f},isPlaying:{configurable:!0,get:function(){return this.mediaController.isPlaying}},isPaused:{configurable:!0,get:function(){return this.mediaController.isPaused}},audioPlayStartTime:{configurable:!0,get:function(){return this.mediaController.audioPlayStarted?this.mediaController.audioPlayStarted:0}},isCordova:{configurable:!0,get:function(){try{return Media||console.log("We are most likely in Cordova, using Cordova instead of HTML5 audio"),!0}catch(a){return console.log("We are most likely not in Cordova, using HTML5 audio"),!1}}},getDuration:{configurable:!0,value:function(a){return a&&this.src.indexOf(a)>-1&&this.mediaController.src.indexOf(a)>-1?this.mediaController.duration||0:(console.log("Duration wasn't clear, so returning 0"),0)}},src:{configurable:!0,get:function(){return this._src},set:function(a){if(!a||!a.trim()||a.trim()!==this._src){if(console.log("Changed audio source: "+a),this.isCordova&&"Cordova"!==this.mediaController.library)this._src=a,this.mediaController=e;else if(this._src=a.match(/^[^:]+:\/\//)?a:document.location.href.replace(document.location.pathname,"/"+a),!this.mediaController._audioElement)if(document.getElementById(this._src))this.mediaController._audioElement=document.getElementById(this._src);else{var b=document.createElement("audio");b.setAttribute("id",this._src),document.body.appendChild(b),this.mediaController._audioElement=b}this.mediaController.src=this._src,console.log("Set the src in core/audio-player "+this._src)}}},play:{configurable:!0,value:function(a,b){a&&(this.src=a),this.mediaController?(console.log("this.mediaController.play "+this._src),this.mediaController.play(this._src,b)):console.log("couldnt play "+this._src)}},pause:{configurable:!0,value:function(){this.mediaController&&this.mediaController.pause()}},togglePause:{configurable:!0,value:function(){console.log("togglePause"),this.mediaController&&(this.mediaController.isPaused?(console.log("   playing"),this.mediaController.play()):(console.log("   paused"),this.mediaController.pause()))}},stop:{configurable:!0,value:function(){this.mediaController&&this.mediaController.stop()}},addEvent:{configurable:!0,value:function(a,b,c){this.mediaController&&this.mediaController.addAudioEventAtTimePeriod(a,b,c)}}}),c.AudioPlayer=f},{"./HTML5Audio":12}],10:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=a("./AudioPlayer").AudioPlayer,f=function(a){this._fieldDBtype||(this._fieldDBtype="AudioVideo"),this.debug("Constructing AudioVideo length: ",a),d.apply(this,arguments)},g="https://localhost:6984";f.prototype=Object.create(d.prototype,{constructor:{value:f},BASE_SPEECH_URL:{get:function(){return g},set:function(a){g=a}},api:{value:"speech"},id:{get:function(){return this._URL||d.DEFAULT_STRING},set:function(a){if(a!==this._URL){if(!a)return void delete this._URL;a.trim&&(a=a.trim()),this._URL=a}}},URL:{get:function(){if(!this._URL&&this.filename){var a=this.url?this.url:this.BASE_SPEECH_URL;return a+"/"+this.dbname+"/"+this.filename}return this._URL||d.DEFAULT_STRING},set:function(a){if(a!==this._URL){if(!a)return void delete this._URL;a.trim&&(a=a.trim()),this._URL=a,this.audioPlayer&&(this.audioPlayer.src=a)}}},play:{value:function(a,b,c){console.log("playing",this,a,b,c),this.audioPlayer=this.audioPlayer||new e,this.audioPlayer.play(this.URL)}},type:{get:function(){return!this._type&&this.filename&&(this._type="audio/"+this.filename.split(".").pop()),this._type||d.DEFAULT_STRING},set:function(a){a!==this._type&&(this.warn("type cannot be set, it is automatically determined from the filename. Not using: "+a),this.filename&&(a="audio/"+this.filename.split(".").pop(),this._type=a))}},toJSON:{value:function(a,b){this.debug("Customizing toJSON ",a,b);var c=d.prototype.toJSON.apply(this,arguments);return delete c.audioPlayer,c}}}),c.AudioVideo=f},{"./../FieldDBObject":4,"./AudioPlayer":9}],11:[function(a,b,c){var d=a("./../Collection").Collection,e=a("./AudioVideo").AudioVideo,f=function(a){this._fieldDBtype||(this._fieldDBtype="AudioVideos"),this.debug("Constructing AudioVideos length: ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"URL"},INTERNAL_MODELS:{value:{item:e}},play:{value:function(a){console.log("playing"),a||(a=0),this._collection&&this._collection[a]&&this._collection[a].play()}}}),c.AudioVideos=f},{"./../Collection":2,"./AudioVideo":10}],12:[function(a,b,c){var d=function(a){this._fieldDBtype||(this._fieldDBtype="HTML5Audio"),this.options&&console.log("HTML5Audio was created with options but it doesnt accept options",a),Object.apply(this,arguments)};d.prototype=Object.create(Object.prototype,{constructor:{value:d},src:{configurable:!0,get:function(){return this._src},set:function(a){a&&a.trim()&&a.trim()===this._src||(this._src=a,console.log("Changed audio source"+a))}},matchesSource:{value:function(a){return this._src.indexOf(a)>-1}},handleSrcChange:{value:function(a,b){console.log("Handle audio source change ",a,b)}},duration:{configurable:!0,get:function(){return this._audioElement&&this._audioElement.duration?this._audioElement.duration:0}},play:{value:function(a,b){if(a&&(this.src=a),console.log("Requesting play of audio file "+a),this._audioElement){var c;if(c=this._audioElement.children&&this._audioElement.children[0]&&this._audioElement.children[0].src?this._audioElement.children[0]:this._audioElement,c.src===this.src&&this.isPaused)return this._audioElement.play(),this.isPaused=!1,void(this.isPlaying=!0);c.src&&c.src===this.src||(c.src=this.src);var d=this,e=Date.now(),f=this._audioElement;f.removeEventListener("ended",window.audioEndListener),f.removeEventListener("canplaythrough",window.actuallyPlayAudio);var g=this.src;window.audioEndListener=function(){f.removeEventListener("ended",window.audioEndListener),console.log("audiourl is done "+g),d.isPlaying=!1,d.isPaused=!1;for(var a=0;a<d.endAudioEvents.length;a++){var b=d.endAudioEvents[a].whatShouldHappen;d.matchesSource(d.endAudioEvents[a].audioFile)&&console.log("Dispatching "+b)}},window.actuallyPlayAudio=function(){if(f.removeEventListener("canplaythrough",window.actuallyPlayAudio),b){var a=Date.now()-e,c=b-a;c>0?window.setTimeout(function(){d._audioElement.play(),d.isPlaying=!0,d.isPaused=!1,d.audioPlayStarted=Date.now()},c):(console.warn("Audio was "+c+" late."),d._audioElement.play(),d.isPlaying=!0,d.isPaused=!1,d.audioPlayStarted=Date.now())}else d._audioElement.play(),d.isPlaying=!0,d.isPaused=!1,d.audioPlayStarted=Date.now()},console.log("Requested play of audio file when canplaythrough "+c),f.addEventListener("ended",window.audioEndListener),f.addEventListener("canplaythrough",window.actuallyPlayAudio),4===f.readyState&&window.actuallyPlayAudio.apply(f,[])}else console.warn("there was no audio element to play")}},pause:{value:function(){this._audioElement&&(this._audioElement.pause(),this.isPaused=!0)}},stop:{value:function(){this._audioElement&&(this._audioElement.pause(),this._audioElement.currentTime=0)}},audioEvents:{configurable:!0,value:[]},endAudioEvents:{configurable:!0,value:[]},audioTimeUpdateFunction:{configurable:!0,value:function(){if(console.log(this.currentTime),this.audioEvents)for(var a=0;a<this.audioEvents.length;a++)this.currentTime>this.audioEvents[a].startTime-.15&&this.currentTime<this.audioEvents[a].endTime&&this.audioEvents[a].whatShouldHappen.call()}},addAudioEventAtTimePeriod:{value:function(a,b,c){this._audioElement&&this._audioElement.removeEventListener("timeupdate",this.audioTimeUpdateFunction),c||(c=b+1e3);var d=a.substring(a.indexOf(":::")).replace(":::","");a=a.replace(":::"+d,""),"end"===b?this.endAudioEvents.push({whatShouldHappen:a,audioFile:d}):this.audioEvents.push({startTime:b,endTime:c,whatShouldHappen:a,audioFile:d}),this._audioElement&&this._audioElement.addEventListener("timeupdate",this.audioTimeUpdateFunction)}}}),c.HTML5Audio=d},{}],13:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=function(a){this._fieldDBtype||(this._fieldDBtype="Comment"),this.debug("Constructing Comment ",a),d.apply(this,arguments)};e.prototype=Object.create(d.prototype,{constructor:{value:e},build:{value:function(a){this.timestamp=Date.now(),this.gravatar=a.gravatar,this.username=a.username}},timestamp:{get:function(){return this._timestamp},set:function(a){if(a!==this._timestamp){if(!a)return void delete this._timestamp;(""+a).indexOf("Z")>-1&&(a=new Date(a).getTime()),this._timestamp=a}}},edit:{value:function(a){this.text=a,this.timestampModified=Date.now()}},commentCreatedActivity:{value:function(a){var b=this.text;return[{verb:"commented",verbicon:"icon-comment",directobjecticon:"",directobject:"'"+b+"'",indirectobject:a,teamOrPersonal:"team",context:" via Offline App."},{verb:"commented",verbicon:"icon-comment",directobjecticon:"",directobject:"'"+b+"'",indirectobject:a,teamOrPersonal:"personal",context:" via Offline App."}]}}}),c.Comment=e},{"./../FieldDBObject":4}],14:[function(a,b,c){var d=a("./../Collection").Collection,e=a("./Comment").Comment,f=function(a){this._fieldDBtype||(this._fieldDBtype="Comments"),this.debug("Constructing Comments ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"timestamp"},INTERNAL_MODELS:{value:{item:e}},insertNewCommentFromObject:{value:function(a){a.timestamp=Date.now(),this.add(new e(a))}}}),c.Comments=f},{"./../Collection":2,"./Comment":13}],15:[function(a,b,c){var d=a("crypto-js/aes"),e=a("crypto-js/enc-utf8"),f=a("./../FieldDBObject").FieldDBObject;try{window.atob||console.log("ATOB is not defined, loading from npm")}catch(g){console.log(g),window={},window.atob=a("atob"),window.btoa=a("btoa")}var h=function(a){this._fieldDBtype||(this._fieldDBtype="Confidential"),this.debug("Constructing Confidential: ",a),a&&a.filledWithDefaults&&(this.fillWithDefaults(),delete a.filledWithDefaults),f.apply(this,arguments)};h.secretKeyGenerator=f.uuidGenerator,h.prototype=Object.create(f.prototype,{constructor:{value:h},decryptedMode:{value:!1},encrypt:{value:function(a){"object"==typeof a&&(a=JSON.stringify(a),this.debug("Converted object to string before encryption"));var b=d.encrypt(a,this.secretkey);return this.verbose(this.secretkey,b.toString(),window.btoa(b.toString())),"confidential:"+window.btoa(b.toString())}},decrypt:{value:function(a){var b=a;if(void 0!==this.decryptedMode){a=a.replace("confidential:",""),a=window.atob(a),this.verbose("Decrypting "+a,this.secretkey),b=d.decrypt(a,this.secretkey).toString(e);try{("{"===b[0]&&"}"===b[b.length-1]||"["===b[0]&&"]"===b[b.length-1])&&(b=JSON.parse(b),this.debug("Decrypting an object"))}catch(c){this.verbose("Decrypting a non-object")}return b}var f=this;this.turnOnDecryptedMode(function(){a=a.replace("confidential:",""),a=window.atob(a),f.verbose("Decrypting after turning on decrypted mode "+a,f.secretkey),b=d.decrypt(a,f.secretkey).toString(e);try{(0===b.indexOf("{")&&b.indexOf("}")===b.length-1||0===b.indexOf("[")&&b.indexOf("]")===b.length-1)&&(b=JSON.parse(b),f.debug("Decrypting an object"))}catch(c){f.verbose("Decrypting a non-object")}return b})}},secretkey:{get:function(){return this._secretkey||(this._secretkey=""),this._secretkey},set:function(a){a!==this._secretkey&&(a||(a=""),this._secretkey=a.trim())}},fillWithDefaults:{value:function(){"This should be replaced with a top secret pass phrase."===this.secretkey&&(this.secretkey=this.secretKeyGenerator())}},turnOnDecryptedMode:{value:function(a){this.decryptedMode=!1,a&&a()}}}),c.Confidential=h},{"./../FieldDBObject":4,atob:62,btoa:65,"crypto-js/aes":66,"crypto-js/enc-utf8":70}],16:[function(a,b,c){var d=a("./CorpusMask").CorpusMask,e=a("./../datum/Datum").Datum,f=a("./../datum/DatumFields").DatumFields,g=a("./../FieldDBObject").FieldDBObject,h=a("./../user/Speaker").Speaker,i=a("./../FieldDBObject").FieldDBObject,j=a("./../Collection").Collection,k=a("q"),l=a("./corpus.json"),m=a("./psycholinguistics-corpus.json"),n=function(a){this._fieldDBtype||(this._fieldDBtype="Corpus"),this.debug("Constructing corpus",a),d.apply(this,arguments)};n.prototype=Object.create(d.prototype,{constructor:{value:n},id:{get:function(){return this._id||i.DEFAULT_STRING},set:function(a){if(a!==this._id){if(!a)return void delete this._id;a.trim&&(a=a.trim()),this._id=a}}},couchConnection:{get:function(){this.debug("couchConnection is deprecated")},set:function(){this.debug("couchConnection is deprecated")}},replicatedCorpusUrls:{get:function(){return this._replicatedCorpusUrls||i.DEFAULT_COLLECTION},set:function(a){if(a!==this._replicatedCorpusUrls){if(!a)return void delete this._replicatedCorpusUrls;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.sessionFields(a)),this._replicatedCorpusUrls=a}}},olacExportConnections:{get:function(){return this._olacExportConnections||i.DEFAULT_COLLECTION},set:function(a){if(a!==this._olacExportConnections){if(!a)return void delete this._olacExportConnections;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.sessionFields(a)),this._olacExportConnections=a}}},termsOfUse:{get:function(){return this._termsOfUse||i.DEFAULT_OBJECT},set:function(a){return a!==this._termsOfUse?a?void(this._termsOfUse=a):void delete this._termsOfUse:void 0}},license:{get:function(){return this._license||{}},set:function(a){return a!==this._license?a?void(this._license=a):void delete this._license:void 0}},copyright:{get:function(){return this._copyright||i.DEFAULT_STRING},set:function(a){return a!==this._copyright?a?void(this._copyright=a.trim()):void delete this._copyright:void 0}},unserializedSessions:{value:null},sessions:{get:function(){return this.unserializedSessions||i.DEFAULT_COLLECTION},set:function(a){if(a!==this.unserializedSessions){if(!a)return void delete this.unserializedSessions;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.sessionFields(a)),this.unserializedSessions=a}}},dateOfLastDatumModifiedToCheckForOldSession:{get:function(){var a=0;if(this.sessions&&this.sessions.length>0){var b=this.sessions[this.sessions.length-1];b.dateModified&&(a=b.dateModified)}return new Date(a)}},confidential:{get:function(){return this._confidential||i.DEFAULT_OBJECT},set:function(a){if(a!==this._confidential){if(!a)return void delete this._confidential;a&&this.INTERNAL_MODELS&&this.INTERNAL_MODELS.confidential&&"function"==typeof this.INTERNAL_MODELS.confidential&&a.constructor!==this.INTERNAL_MODELS.confidential&&(this.debug("Parsing model: "+a),a=new this.INTERNAL_MODELS.confidential(a)),this._confidential=a}}},publicCorpus:{get:function(){return this._publicCorpus||i.DEFAULT_STRING},set:function(a){if(a!==this._publicCorpus){if(!a)return void delete this._publicCorpus;"Public"!==a&&"Private"!==a&&(this.warn("Corpora can be either Public or Private"),a="Private"),this._publicCorpus=a}}},teamExternalObject:{value:null},team:{get:function(){return this.teamExternalObject},set:function(a){a!==this.teamExternalObject&&(this.teamExternalObject=a)}},publicSelfExternalObject:{value:null},publicSelf:{get:function(){return this.publicSelfExternalObject},set:function(a){a!==this.publicSelfExternalObject&&(this.publicSelfExternalObject=a)}},validationStati:{get:function(){return this._validationStati||i.DEFAULT_COLLECTION},set:function(a){if(a!==this._validationStati){if(!a)return void delete this._validationStati;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.datumStates(a)),this._validationStati=a}}},tags:{get:function(){return this._tags||i.DEFAULT_COLLECTION},set:function(a){if(a!==this._tags){if(!a)return void delete this._tags;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.tags(a)),this._tags=a}}},datumFields:{get:function(){return this._datumFields||i.DEFAULT_COLLECTION},set:function(a){if(a!==this._datumFields){if(!a)return void delete this._datumFields;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.datumFields(a)),this._datumFields=a}}},participantFields:{get:function(){return this._participantFields||(this._participantFields=new this.INTERNAL_MODELS.participantFields(n.prototype.defaults_psycholinguistics.participantFields)),this._participantFields},set:function(a){if(a!==this._participantFields){if(!a)return void delete this._participantFields;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.participantFields(a)),this._participantFields=a}}},conversationFields:{get:function(){return this._conversationFields||i.DEFAULT_COLLECTION},set:function(a){if(a!==this._conversationFields){if(!a)return void delete this._conversationFields;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.conversationFields(a)),this._conversationFields=a}}},sessionFields:{get:function(){return this._sessionFields||i.DEFAULT_COLLECTION},set:function(a){if(a!==this._sessionFields){if(!a)return void delete this._sessionFields;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.sessionFields(a)),this._sessionFields=a}}},loadOrCreateCorpusByPouchName:{value:function(a){if(!a)throw"Cannot load corpus, its dbname was undefined";var b=this.loadOrCreateCorpusByPouchNameDeferred||k.defer(),c=this,d=this.url;return a=a.trim(),this.dbname=a,k.nextTick(function(){d||(d=c.BASE_DB_URL);var e=function(d){return c.debug(d),c.runningloadOrCreateCorpusByPouchName?void b.reject(d):(c.runningloadOrCreateCorpusByPouchName=!0,c.loadOrCreateCorpusByPouchNameDeferred=b,void window.setTimeout(function(){c.loadOrCreateCorpusByPouchName(a)},1e3))};c.fetchCollection(c.api).then(function(a){c.debug(a),a.length>0?(c.runningloadOrCreateCorpusByPouchName=!1,delete c.loadOrCreateCorpusByPouchNameDeferred,c.id=a[0]._id,c.fetch(d).then(function(a){c.debug("Finished fetch of corpus ",a),b.resolve(a)},function(a){b.reject(a)})):e(a)},function(a){e(a)})}),b.promise}},fetchPublicSelf:{value:function(){if(this.todo("test fetchPublicSelf"),!this.dbname)throw"Cannot load corpus's public self, its dbname was undefined";var a=k.defer(),b=this;return k.nextTick(function(){return b.publicSelf&&b.publicSelf.rev?void a.resolve(b.publicSelf):(b.publicSelf=new d({dbname:b.dbname}),void b.publicSelf.fetch().then(a.resolve,a.reject))}),a.promise}},api:{value:"private_corpuses"},loadPermissions:{value:function(){this.todo("test loadPermissions");var a=k.defer(),b=this;return k.nextTick(function(){b.permissions||(b.permissions=new j),b.permissions.dbname||(b.permissions.dbname=b.dbname),b.permissions.fetch().then(a.resolve,a.reject)}),a.promise}},defaults:{get:function(){return JSON.parse(JSON.stringify(l))}},defaults_psycholinguistics:{get:function(){var a=this.defaults;if(m){for(var b in m)m.hasOwnProperty(b)&&(a[b]=m[b]);a.participantFields=this.defaults.speakerFields.concat(a.participantFields)}return JSON.parse(JSON.stringify(a))}},putInTrash:{value:function(){OPrime.bug("Sorry deleting corpora is not available right now. Too risky... ")}},newComment:{value:function(a){var b={text:a};return this.comments.add(b),this.unsavedChanges=!0,window.app.addActivity({verb:"commented",verbicon:"icon-comment",directobjecticon:"",directobject:"'"+a+"'",indirectobject:"on <i class='icon-cloud'></i><a href='#corpus/"+this.id+"'>this corpus</a>",teamOrPersonal:"team",context:" via Offline App."}),window.app.addActivity({verb:"commented",verbicon:"icon-comment",directobjecticon:"",directobject:"'"+a+"'",indirectobject:"on <i class='icon-cloud'></i><a href='#corpus/"+this.id+"'>"+this.get("title")+"</a>",teamOrPersonal:"personal",context:" via Offline App."}),b}},newSession:{value:function(){var a;a=this.currentSession&&this.currentSession.sessionFields?this.currentSession.sessionFields.clone():this.sessionFields.clone();var b=new g({dbname:this.dbname,sessionFields:a});return b}},newDatum:{value:function(a){var b=k.defer(),c=this;return k.nextTick(function(){if(c.debug("Creating a datum for this corpus"),!c.datumFields||!c.datumFields.clone)throw"This corpus has no default datum fields... It is unable to create a datum.";var d=new e({datumFields:new f(c.datumFields.clone())});for(var g in a)a.hasOwnProperty(g)&&(d.datumFields[g]?(c.debug("  this option appears to be a datumField "+g),d.datumFields[g].value=a[g]):d[g]=a[g]);b.resolve(d)}),b.promise}},newSpeaker:{value:function(a){var b=k.defer(),c=this;return k.nextTick(function(){if(c.debug("Creating a datum for this corpus"),!c.speakerFields||!c.speakerFields.clone)throw"This corpus has no default datum fields... It is unable to create a datum.";var d=new h({speakerFields:new f(c.speakerFields.clone())});for(var e in a)a.hasOwnProperty(e)&&(d.speakerFields[e]?(c.debug("  this option appears to be a datumField "+e),d.speakerFields[e].value=a[e]):d[e]=a[e]);b.resolve(d)}),b.promise}},updateDatumToCorpusFields:{value:function(a){return this.datumFields?a.fields?(a.fields=(new f).merge(this.datumFields,a.fields),a):(a.fields=this.datumFields.clone(),a):a}},updateSpeakerToCorpusFields:{value:function(a){return this.speakerFields?a.fields?(a.fields=(new f).merge(this.speakerFields,a.fields),a):(a.fields=this.speakerFields.clone(),a):a}},updateParticipantToCorpusFields:{value:function(a){return this.participantFields?a.fields?(a.fields=(new f).merge(this.participantFields,a.fields,"overwrite"),a):(a.fields=this.participantFields.clone(),a):a}},newCorpus:{value:function(){var a=this.clone();a.title=a.title+" copy",a.titleAsUrl=a.titleAsUrl+"Copy",a.description="Copy of: "+a.description,a.dbname=a.dbname+"copy",a.replicatedCorpusUrls=a.replicatedCorpusUrls.map(function(b){return b.replace(new RegExp(this.dbname,"g"),a.dbname)}),a.comments=[],this.dbname.indexOf("firstcorpus")>-1&&(a.datumFields=l.datumFields,a.conversationFields=l.conversationFields,a.sessionFields=l.sessionFields);var b;for(b in a.datumFields)a.datumFields[b].mask="",a.datumFields[b].value="";if(a.participantFields)for(b in a.participantFields)a.participantFields[b].mask="",a.participantFields[b].value="";for(b in a.conversationFields)a.conversationFields[b].mask="",a.conversationFields[b].value="";for(b in a.sessionFields)a.sessionFields[b].mask="",a.sessionFields[b].value="";return new n(a)}},glosser:{get:function(){return this.glosserExternalObject},set:function(a){a!==this.glosserExternalObject&&(this.glosserExternalObject=a)}},lexicon:{get:function(){return this.lexiconExternalObject},set:function(a){a!==this.lexiconExternalObject&&(this.lexiconExternalObject=a)}},find:{value:function(a){var b=k.defer();if(!a)throw"Uri must be specified ";return k.nextTick(function(){b.resolve([])}),b.promise}},prepareANewOfflinePouch:{value:function(){throw"I dont know how to prepareANewOfflinePouch"}},saveCorpus:{value:function(){var a=k.defer(),b=this,c=!1;this.id?b.debug("Existing corpus"):(b.debug("New corpus"),c=!0);var d=this.get("_rev");return this.timestamp=Date.now(),b.unsavedChanges=!1,b.save().then(function(e){var f=e.title,g="#diff/oldrev/"+d+"/newrev/"+e._rev,h="modified",i="icon-pencil";c&&(h="added",i="icon-plus");var j=b.dbname.split("-")[0];window.app.addActivity({verb:"<a href='"+g+"'>"+h+"</a> ",verbmask:h,verbicon:i,directobject:"<a href='#corpus/"+e.id+"'>"+f+"</a>",directobjectmask:"a corpus",directobjecticon:"icon-cloud",indirectobject:"created by <a href='#user/"+j+"'>"+j+"</a>",context:" via Offline App.",contextmask:"",teamOrPersonal:"personal"}),window.app.addActivity({verb:"<a href='"+g+"'>"+h+"</a> ",verbmask:h,verbicon:i,directobject:"<a href='#corpus/"+e.id+"'>"+f+"</a>",directobjectmask:"a corpus",directobjecticon:"icon-cloud",indirectobject:"created by <a href='#user/"+j+"'>this team</a>",context:" via Offline App.",contextmask:"",teamOrPersonal:"team"}),a.resolve(b)},a.reject),a.promise}},validDBQueries:{value:function(){return{}}},validate:{value:function(a){return a=a||this,a.publicCorpus&&"Public"!==a.publicCorpus&&"Private"!==a.publicCorpus?"Corpus must be either Public or Private":void 0}},buildMorphologicalAnalyzerFromTeamServer:{value:function(a,b){a||(a=this.dbname),this.glosser.downloadPrecedenceRules(a,this.glosserURL,b)}},buildLexiconFromTeamServer:{value:function(a,b){a||(a=this.dbname),this.lexicon.buildLexiconFromCouch(a,b)}},getFrequentDatumFields:{value:function(){return this.getFrequentValues("fields",["judgement","utterance","morphemes","gloss","translation"])}},getFrequentDatumValidationStates:{value:function(){return this.getFrequentValues("validationStatus",["Checked","Deleted","ToBeCheckedByAnna","ToBeCheckedByBill","ToBeCheckedByClaude"])}},getCorpusSpecificLocalizations:{value:function(a){var b=this;return a?(this.todo("Test the loading of an optionalLocaleCode"),this.get(a+"/messages.json").then(function(a){return a?void b.application.contextualizer.addMessagesToContextualizedStrings("null",a):void b.warn("the requested locale was empty.")},function(a){b.warn("The requested locale wasn't loaded"),b.debug("locale loading error",a)})):this.fetchCollection("locales").then(function(a){for(var c=0;c<a.length;c++)a[c]?b.application.contextualizer.addMessagesToContextualizedStrings(null,a[c]):b.warn("the requested locale was empty.")},function(a){b.warn("The locales didn't loaded"),b.debug("locale loading error",a)}),this}},getFrequentValues:{value:function(a,b){var c,d=k.defer();return b||(b=c["defaultFrequentDatum"+a]),c["frequentDatum"+a]?(k.nextTick(function(){d.resolve(c["frequentDatum"+a])}),d.promise):(this.fetchCollection("frequentDatum"+a,0,0,100,!0).then(function(b){c["frequentDatum"+a]=b,d.resolve(b)},function(e){c.debug("resolving defaults for frequentDatum"+a,e),d.resolve(b)}),d.promise)}},getFrequentDatumTags:{value:function(){return this.getFrequentValues("tags",["Passive","WH","Indefinte","Generic","Agent-y","Causative","Pro-drop","Ambigous"])}},changeCorpusPublicPrivate:{value:function(){throw" I dont know how change this corpus' public/private setting "}}}),c.Corpus=n,c.FieldDatabase=n},{"./../Collection":2,"./../FieldDBObject":4,"./../datum/Datum":24,"./../datum/DatumFields":26,"./../user/Speaker":53,"./CorpusMask":17,"./corpus.json":20,"./psycholinguistics-corpus.json":21,q:76}],17:[function(a,b,c){var d=a("./../confidentiality_encryption/Confidential").Confidential,e=a("./Database").Database,f=a("./../datum/DatumFields").DatumFields,g=a("./../datum/DatumStates").DatumStates,h=a("./../datum/DatumTags").DatumTags,i=a("./../comment/Comments").Comments,j=a("./../FieldDBObject").FieldDBObject,k=a("./../Collection").Collection,l=a("./../Collection").Collection,m=a("./../user/UserPreference").UserPreference,n=a("./corpus.json"),o=function(a){this._fieldDBtype||(this._fieldDBtype="CorpusMask"),this.debug(a),e.apply(this,arguments)};o.prototype=Object.create(e.prototype,{constructor:{value:o},id:{get:function(){return"corpus"},set:function(a){a!==this._id&&(this.warn('CorpusMask id cannot be set, it is "corpus" by default.'+a),a="corpus",this._id=a)}},api:{value:"corpora"},defaults:{get:function(){var a=JSON.parse(JSON.stringify(n));a.title="Private Corpus",a.description="The details of this corpus are not public.",a.location={latitude:0,longitude:0,accuracy:0};var b=[];a.validationStati.map(function(a){"Checked*"===a.validationStatus?b.push(a):"Published*"===a.validationStatus?b.push(a):"ApprovedLanguageLearningContent*"===a.validationStatus&&b.push(a)}),a.validationStati=b;var c=[];a.tags.map(function(){}),a.tags=c;var d=[];a.datumFields.map(function(a){"judgement"===a.id?d.push(a):"orthography"===a.id?d.push(a):"utterance"===a.id?d.push(a):"morphemes"===a.id?d.push(a):"gloss"===a.id?d.push(a):"translation"===a.id&&d.push(a)}),a.datumFields=d;var e=[];a.sessionFields.map(function(a){"dialect"===a.id?e.push(a):"register"===a.id?e.push(a):"language"===a.id?e.push(a):"location"===a.id&&e.push(a)}),a.sessionFields=e;var f=[];return a.speakerFields.map(function(a){"anonymousCode"===a.id&&f.push(a)}),a.speakerFields=f,a}},INTERNAL_MODELS:{value:{_id:j.DEFAULT_STRING,_rev:j.DEFAULT_STRING,dbname:j.DEFAULT_STRING,version:j.DEFAULT_STRING,dateCreated:j.DEFAULT_DATE,dateModified:j.DEFAULT_DATE,comments:i,sessions:k,datalists:l,title:j.DEFAULT_STRING,titleAsUrl:j.DEFAULT_STRING,description:j.DEFAULT_STRING,termsOfUse:j.DEFAULT_OBJECT,license:j.DEFAULT_OBJECT,copyright:j.DEFAULT_STRING,replicatedCorpusUrls:j.DEFAULT_ARRAY,olacExportConnections:j.DEFAULT_ARRAY,publicCorpus:j.DEFAULT_STRING,confidential:d,validationStati:g,tags:h,datumFields:f,speakerFields:f,participantFields:f,conversationFields:f,sessionFields:f,prefs:m}},titleAsUrl:{get:function(){return!this._titleAsUrl&&this.title&&(this._titleAsUrl=this.sanitizeStringForFileSystem(this._title,"_").toLowerCase()),this._titleAsUrl},set:function(a){a!==this._titleAsUrl&&this._titleAsUrl&&this.warn("titleAsUrl cannot be set directly, setting the title will cause it to be set.")
}},title:{get:function(){return this._title||j.DEFAULT_STRING},set:function(a){if(a!==this._title){if(!a)return void delete this._title;this._title=a.trim(),this._titleAsUrl=this.sanitizeStringForFileSystem(this._title,"_").toLowerCase()}}},description:{get:function(){return this._description||j.DEFAULT_STRING},set:function(a){return a!==this._description?a?void(this._description=a.trim()):void delete this._description:void 0}},prefs:{get:function(){return this._prefs},set:function(a){if(a!==this._prefs){if(!a)return void delete this._prefs;"[object Object]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.prefs(a)),this._prefs=a}}},preferredDatumTemplate:{get:function(){return this.prefs&&this.prefs.preferredDatumTemplate?this.prefs.preferredDatumTemplate:void 0},set:function(a){if(!this.prefs||!this.prefs.preferredDatumTemplate||a!==this.prefs.preferredDatumTemplate){if(!a||"default"===a)return void(this.prefs&&this.prefs.preferredDatumTemplate&&delete this.prefs.preferredDatumTemplate);this.prefs=this.prefs||new this.INTERNAL_MODELS.prefs,this.prefs.preferredDatumTemplate=a.trim()}}},preferredLocale:{get:function(){return this.prefs&&this.prefs.preferredLocale?this.prefs.preferredLocale:void 0},set:function(a){if(!this.prefs||!this.prefs.preferredLocale||a!==this.prefs.preferredLocale){if(!a||"default"===a)return void(this.prefs&&this.prefs.preferredLocale&&delete this.prefs.preferredLocale);this.prefs=this.prefs||new this.INTERNAL_MODELS.prefs,this.prefs.preferredLocale=a.trim()}}},preferredDashboardLayout:{get:function(){return this.prefs&&this.prefs.preferredDashboardLayout?this.prefs.preferredDashboardLayout:void 0},set:function(a){if(!this.prefs||!this.prefs.preferredDashboardLayout||a!==this.prefs.preferredDashboardLayout){if(!a||"default"===a)return void(this.prefs&&this.prefs.preferredDashboardLayout&&delete this.prefs.preferredDashboardLayout);this.prefs=this.prefs||new this.INTERNAL_MODELS.prefs,this.prefs.preferredDashboardLayout=a.trim()}}},preferredTemplate:{get:function(){return this.warn("preferredTemplate is deprecated, use dbname instead."),this.preferredDatumTemplate},set:function(a){this.warn("preferredTemplate is deprecated, please use dbname instead."),this.preferredDatumTemplate=a}}}),c.CorpusMask=o},{"./../Collection":2,"./../FieldDBObject":4,"./../comment/Comments":14,"./../confidentiality_encryption/Confidential":15,"./../datum/DatumFields":26,"./../datum/DatumStates":28,"./../datum/DatumTags":30,"./../user/UserPreference":57,"./Database":18,"./corpus.json":20}],18:[function(a,b,c){var d=a("q"),e=a("../CORS").CORS,f=a("../FieldDBObject").FieldDBObject,g=a("./../confidentiality_encryption/Confidential").Confidential,h=function(a){this._fieldDBtype||(this._fieldDBtype="Database"),this.debug("In Database ",a),f.apply(this,arguments)},i="_design/pages/_view/COLLECTION?descending=true",j="https://localhost:3181",k="https://localhost:6984";h.prototype=Object.create(f.prototype,{constructor:{value:h},DEFAULT_COLLECTION_MAPREDUCE:{value:i},BASE_AUTH_URL:{get:function(){return j},set:function(a){j=a}},BASE_DB_URL:{get:function(){return k},set:function(a){k=a}},get:{value:function(a){if(!this.dbname)throw this.bug("Cannot get something if the dbname is not defined ",a),"Cannot get something if the dbname is not defined ";var b=this.url;return b||(b=this.BASE_DB_URL),e.makeCORSRequest({method:"GET",url:b+"/"+this.dbname+"/"+a})}},set:{value:function(a,b){if(!this.dbname)throw this.bug("Cannot get something if the dbname is not defined ",a,b),"Cannot get something if the dbname is not defined ";var c,f,g=d.defer(),h=this.url,i=this;return b?(c=a,f=b,f.id=c):f=a,h||(h=this.BASE_DB_URL),e.makeCORSRequest({method:"POST",data:f,url:h+"/"+this.dbname}).then(function(a){a._rev&&(f._rev=a._rev,f.rev=a._rev),f._id||(f._id=a._id,f.id=a._id),g.resolve(f)},function(a){i.warn("error saving "+a),g.reject(a)}),g.promise}},"delete":{value:function(a){return this.remove(a)}},remove:{value:function(a){throw this.bug("Deleting data is not permitted.",a),"Deleting data is not permitted."}},fetchAllDocuments:{value:function(){return this.fetchCollection("datums")}},fetchCollection:{value:function(a,b,c,f,g,h){this.todo("Provide pagination ",b,c,f,g);var i=d.defer(),j=this,k=this.url;if(k||(k=this.BASE_DB_URL),!a)return d.nextTick(function(){i.reject("Cannot fetch data with out a collectionType (eg consultants, sessions, datalists)")}),i.promise;h=h?'&key="'+h+'"':"";var l=function(a){j.debug(a),i.reject(a)};if("[object Array]"===Object.prototype.toString.call(a)){var m=[];a.map(function(a){m.push(e.makeCORSRequest({type:"GET",dataType:"json",url:k+"/"+j.dbname+"/"+a}))}),d.allSettled(m).then(function(a){j.debug(a),i.resolve(a.length?a.map(function(a){return"fulfilled"===a.state?a.value:{}}):[])},l)}else e.makeCORSRequest({type:"GET",dataType:"json",url:k+"/"+j.dbname+"/"+j.DEFAULT_COLLECTION_MAPREDUCE.replace("COLLECTION",a)+h}).then(function(a){i.resolve(a.rows&&a.rows.length?a.rows.map(function(a){return a.value}):[])},l);return i.promise}},resumeAuthenticationSession:{value:function(){var a=d.defer(),b=this.url,c=this;return b||(b=this.BASE_DB_URL),e.makeCORSRequest({type:"GET",dataType:"json",url:b+"/_session"}).then(function(b){c.debug(b),c.connectionInfo=b,a.resolve(b)},function(b){a.reject(b)}),a.promise}},connectionInfo:{get:function(){var a;try{a=localStorage.getItem("_connectionInfo")}catch(b){this.warn("Localstorage is not available, using the object there will be no persistance across loads",b,this._connectionInfo),a=this._connectionInfo}if(a){try{a=new g({secretkey:"connectionInfo"}).decrypt(a)}catch(b){this.warn("unable to read the connectionInfo info, ",b,this._connectionInfo),a=void 0}return a}},set:function(a){if(a)try{localStorage.setItem("_connectionInfo",new g({secretkey:"connectionInfo"}).encrypt(a))}catch(b){this._connectionInfo=new g({secretkey:"connectionInfo"}).encrypt(a),this.debug("Localstorage is not available, using the object there will be no persistance across loads",b,this._connectionInfo)}else try{localStorage.removeItem("_connectionInfo")}catch(b){this.debug("Localstorage is not available, using the object there will be no persistance across loads",b,this._connectionInfo),delete this._connectionInfo}}},login:{value:function(a){var b=d.defer(),c=this,f=this.url,g=this.authUrl;return f||(f=this.BASE_DB_URL),g||(g=this.BASE_AUTH_URL),e.makeCORSRequest({type:"POST",dataType:"json",url:g+"/login",data:a}).then(function(d){d.user?e.makeCORSRequest({type:"POST",dataType:"json",url:f+"/_session",data:{name:d.user.username,password:a.password}}).then(function(a){d.user.roles=a.roles,b.resolve(d.user)},function(){c.debug("Failed to login "),b.reject("Something is wrong.")}):b.reject(d.userFriendlyErrors.join(" "))},function(a){c.debug(a),b.reject(a)}).fail(function(a){c.debug(a),b.reject(a)}),b.promise}},logout:{value:function(){var a=d.defer(),b=this.url,c=this;return b||(b=this.BASE_DB_URL),e.makeCORSRequest({type:"DELETE",dataType:"json",url:b+"/_session"}).then(function(b){b.ok?(c.connectionInfo=null,a.resolve(b)):a.reject(b)},function(b){this.debug(b),a.reject(b)}),a.promise}},register:{value:function(a){var b=d.defer(),c=this,f=this.url,g=this.authUrl;return f||(f=this.BASE_DB_URL),g||(g=this.BASE_AUTH_URL),a||(a={username:this.dbname.split("-")[0],password:"testtest"}),e.makeCORSRequest({type:"POST",dataType:"json",url:g+"/register",data:a}).then(function(d){d.user?e.makeCORSRequest({type:"POST",dataType:"json",url:f+"/_session",data:{name:d.user.username,password:a.password}}).then(function(a){c.debug(a),b.resolve(d.user)},function(){c.debug("Failed to login "),b.reject()}):b.reject()},function(a){c.debug(a),b.reject(a)}).fail(function(a){c.debug(a),b.reject(a)}),b.promise}}}),c.Database=h},{"../CORS":1,"../FieldDBObject":4,"./../confidentiality_encryption/Confidential":15,q:76}],19:[function(a,b,c){var d=a("./Database").Database,e=function(a){this._fieldDBtype||(this._fieldDBtype="PsycholinguisticsDatabase"),this.debug("In PsycholinguisticsDatabase ",a),d.apply(this,arguments)},f="_design/psycholinguistics/_view/COLLECTION?descending=true";e.prototype=Object.create(d.prototype,{constructor:{value:e},DEFAULT_COLLECTION_MAPREDUCE:{value:f}}),c.PsycholinguisticsDatabase=e},{"./Database":18}],20:[function(a,b){b.exports={title:"",titleAsUrl:"",description:"This is probably your first Corpus, you can use it to play with the app... When you want to make a real corpus, click New : Corpus",couchConnection:{},replicatedCorpusUrls:[],olacExportConnections:[],termsOfUse:{humanReadable:"Sample: The materials included in this corpus are available for research and educational use. If you want to use the materials for commercial purposes, please notify the author(s) of the corpus (myemail@myemail.org) prior to the use of the materials. Users of this corpus can copy and redistribute the materials included in this corpus, under the condition that the materials copied/redistributed are properly attributed.  Modification of the data in any copied/redistributed work is not allowed unless the data source is properly cited and the details of the modification is clearly mentioned in the work. Some of the items included in this corpus may be subject to further access conditions specified by the owners of the data and/or the authors of the corpus."},license:{title:"Default: Creative Commons Attribution-ShareAlike (CC BY-SA).",humanReadable:"This license lets others remix, tweak, and build upon your work even for commercial purposes, as long as they credit you and license their new creations under the identical terms. This license is often compared to copyleft free and open source software licenses. All new works based on yours will carry the same license, so any derivatives will also allow commercial use. This is the license used by Wikipedia, and is recommended for materials that would benefit from incorporating content from Wikipedia and similarly licensed projects.",imageUrl:"https://i.creativecommons.org/l/by/4.0/88x31.png",link:"http://creativecommons.org/licenses/by-sa/3.0/"},copyright:"Default: Add names of the copyright holders of the corpus.",dbname:"",dateOfLastDatumModifiedToCheckForOldSession:"",confidential:{secretkey:""},publicCorpus:"Private",api:"private_corpuses",comments:[],validationStati:[{validationStatus:"Checked*",color:"green","default":!0},{validationStatus:"Published*",color:"blue"},{validationStatus:"ToBeChecked*",color:"orange"},{validationStatus:"ApprovedLanguageLearningContent*",color:"green",showInLanguageLearnignApps:!0},{validationStatus:"ContributedLanguageLearningContent*",color:"orange"},{validationStatus:"Deleted*",color:"red",showInSearchResults:!1,showInLanguageLearnignApps:!1},{validationStatus:"Duplicate*",color:"red",showInSearchResults:!1,showInLanguageLearnignApps:!1}],tags:[{tag:"SampleData",color:"green"},{tag:"Food",color:"green"},{tag:"Winter",color:"white"},{tag:"Sports",color:"teal"},{tag:"News",color:"black"},{tag:"Family",color:"blue"},{tag:"Friends",color:"orange"},{tag:"Moving",color:"red"},{tag:"Vulgar",color:"black",showInLanguageLearnignApps:!1}],datumFields:[{id:"judgement",labelFieldLinguists:"Gramaticality Judgement",labelExperimenters:"Naturalness",labelNonLinguists:"Not-a-normal-thing-to-say",labelTranslators:"Grammatical/How-normal-Is-This-Example",size:"3",shouldBeEncrypted:!1,showToUserTypes:"linguist",defaultfield:!0,help:"Acceptablity judgement (*,#,?  mean this sentence is strange)",helpLinguists:"Grammaticality/acceptability judgement (*,#,?,1-3 etc). Leaving it blank usually means grammatical/acceptable, or your team can choose any symbol for this meaning."},{id:"orthography",labelFieldLinguists:"Orthography",labelNonLinguists:"Written",labelTranslators:"Orthography",type:"IGT, parallelText",shouldBeEncrypted:!0,showToUserTypes:"all",defaultfield:!0,json:{writingSystem:{id:"",referenceLink:""}},help:"What was said/written using the alphabet/writing system of the language.",helpLinguists:"Many teams will only use the utterance line. However if your team needs to distinguish between utterance and orthography this is the unparsed word/sentence/dialog/paragraph/document in the language, in its native orthography. If there are more than one orthography an additional field can be added to the corpus. This is Line 0 in your LaTeXed examples for handouts (if you distinguish the orthography from the utterance line and you choose to display the orthography for your language consultants and/or native speaker linguists). Sample entry: amigas"},{id:"utterance",labelFieldLinguists:"Utterance",labelNonLinguists:"International Phonetic Alphabet (IPA)",labelTranslators:"Transliteration",type:"IGT, parallelText",shouldBeEncrypted:!0,showToUserTypes:"all",defaultfield:!0,json:{writingSystem:{id:"",referenceLink:""}},help:"What was said/written in an alphabet the team is comfortable using.",helpLinguists:"Unparsed utterance in the language, in orthography or transcription. Line 1 in your LaTeXed examples for handouts. Sample entry: amigas"},{id:"allomorphs",labelFieldLinguists:"Allomorphs",labelNonLinguists:"",labelTranslators:"Prefixe-s-root-suffixe-s",type:"IGT",shouldBeEncrypted:!0,showToUserTypes:"linguist",defaultfield:!0,json:{alternates:[]},help:"Words divided into prefixes, root and suffixes which match the spelling of the word (not necessarily the actual dictionary entry of the word) using a - between each eg: prefix-prefix-root-suffix-suffix-suffix",helpLinguists:"Surface realizations of the morpheme-segmented utterance in the language. Used by the system to help generate glosses (below). Usually does not appear in your LaTeX examples unless you are working on morpho-phonology. Sample entry: amig-a-s"},{id:"morphemes",labelFieldLinguists:"Morphemes",labelNonLinguists:"Segmentation",labelTranslators:"Prefix-z-root-suffix-z",type:"IGT",shouldBeEncrypted:!0,showToUserTypes:"linguist",defaultfield:!0,json:{alternates:[]},help:"Words divided into prefixes, root and suffixes using a - between each eg: prefix-prefix-root-suffix-suffix-suffix",helpLinguists:"Morpheme-segmented utterance in the language. Used by the system to help generate glosses (below). Can optionally appear below (or instead of) the first line in your LaTeXed examples. Sample entry: amig-a-s"},{id:"gloss",labelFieldLinguists:"Gloss",labelNonLinguists:"Word-for-word Translation",labelTranslators:"Word-for-word Translation",type:"IGT",shouldBeEncrypted:!0,showToUserTypes:"linguist",defaultfield:!0,json:{language:"",alternates:[],conventions:{id:"",tagSet:[],referenceLink:""}},help:"Translation for each prefix, root and suffix in the words",helpLinguists:"Metalanguage glosses of each individual morpheme (above). Used by the system to help gloss, in combination with morphemes (above). It is Line 2 in your LaTeXed examples. We recommend Leipzig conventions (. for fusional morphemes, - for morpheme boundaries etc)  Sample entry: friend-fem-pl"},{id:"syntacticCategory",labelFieldLinguists:"Morpho-Syntactic Category",labelNonLinguists:"",labelTranslators:"Part of Speech",type:"IGT",shouldBeEncrypted:!0,showToUserTypes:"machine, linguist",defaultfield:!0,json:{alternates:[],conventions:{id:"",tagSet:[],referenceLink:""}},help:"This optional field is used by the machine to help with search and data cleaning, in combination with morphemes and gloss (above). If you want to use it, you can choose to use any sort of syntactic category tagging you wish. It could be very theoretical like Distributed Morphology (Sample entry: -GEN-NUM), or very a-theroretical like the Penn Tree Bank Tag Set. (Sample entry: NNS) http://www.ims.uni-stuttgart.de/projekte/CorpusWorkbench/CQP-HTMLDemo/PennTreebankTS.html",helpLinguists:"This optional field is used by the machine to help with search and data cleaning, in combination with morphemes and gloss (above). If you want to use it, you can choose to use any sort of syntactic category tagging you wish. It could be very theoretical like Distributed Morphology (Sample entry: -GEN-NUM), or very a-theroretical like the Penn Tree Bank Tag Set. (Sample entry: NNS) http://www.ims.uni-stuttgart.de/projekte/CorpusWorkbench/CQP-HTMLDemo/PennTreebankTS.html"},{id:"translation",labelFieldLinguists:"Translation",labelNonLinguists:"English",labelTranslators:"English",type:"IGT, parallelText",shouldBeEncrypted:!0,showToUserTypes:"all",defaultfield:!0,help:"Translation into English/Spanish/Russian, or simply a language the team is comfortable with. There may also be additional languages in the other fields.",language:"",helpLinguists:"The team's primary translation. It might not be English, just a language the team is comfortable with (in which case you should change the lable to the language you are using). There may also be additional translations in the other fields."},{id:"context",labelFieldLinguists:"Context",labelNonLinguists:"Context",labelTranslators:"Context",type:"wiki",shouldBeEncrypted:!1,showToUserTypes:"all",defaultfield:!0,json:{tags:[]},help:"Tags for constructions or other info that you might want to use to categorize your data.",helpLinguists:"Tags for constructions or other info that you might want to use to categorize your data."},{id:"documentation",labelFieldLinguists:"Discussion for Handouts",labelNonLinguists:"Additional Documentation",labelTranslators:"Documentation",type:"wiki, LaTeX",shouldBeEncrypted:!1,showToUserTypes:"all",defaultfield:!0,json:{wiki:"",latex:""},help:"Additional discussion of this example (for handouts or for documentation). Wiki or LaTeX formatable.",helpLinguists:"Additional discussion of this example (for handouts or for documentation). Wiki or LaTeX formatable."},{id:"relatedData",labelFieldLinguists:"Related Data",labelNonLinguists:"Linked to",labelTranslators:"Linked to",labelComputationalLinguists:"Linked Data",type:"relatedData",shouldBeEncrypted:!1,showToUserTypes:"all",defaultfield:!0,json:{relatedData:[]},help:"Related data in the database, or at any web url.",helpLinguists:"Related data in the database, or at any web url.",helpDevelopers:"Related data in the database, or at any web url."},{id:"tags",labelFieldLinguists:"Tags",labelNonLinguists:"Tags",labelTranslators:"Tags",type:"tags",shouldBeEncrypted:!1,showToUserTypes:"all",defaultfield:!0,json:{tags:[]},help:"Tags for constructions or other info that you might want to use to categorize your data.",helpLinguists:"Tags for constructions or other info that you might want to use to categorize your data."},{id:"validationStatus",labelFieldLinguists:"Data validity/verification Status",labelNonLinguists:"Data validity/verification Status",labelTranslators:"Data validity/verification Status",type:"tags",shouldBeEncrypted:!1,showToUserTypes:"all",defaultfield:!0,json:{tags:[]},help:"Any number of tags of data validity (replaces DatumStates). For example: ToBeCheckedBySeberina, CheckedByRicardo, Deleted etc...",helpLinguists:"Any number of tags of data validity (replaces DatumStates). For example: ToBeCheckedBySeberina, CheckedByRicardo, Deleted etc..."},{id:"enteredByUser",labelFieldLinguists:"Imported/Entered By",labelNonLinguists:"Entered By",labelTranslators:"Imported/Entered By",type:"users",shouldBeEncrypted:"",showToUserTypes:"all",readonly:!0,defaultfield:!0,json:{user:{},hardware:{},software:{}},help:"The user who originally entered the datum",helpLinguists:"The user who originally entered the datum"},{id:"modifiedByUser",labelFieldLinguists:"Modified By",labelNonLinguists:"Modified By",labelTranslators:"Modified By",type:"users",shouldBeEncrypted:"",showToUserTypes:"all",readonly:!0,defaultfield:!0,json:{users:[]},help:"An array of users who modified the datum",helpLinguists:"An array of users who modified the datum, this can optionally introduce a 'CheckedByUsername' into the datum's validation status if your team chooses."},{id:"syntacticTreeLatex",labelFieldLinguists:"Syntactic Tree/Constituency (LaTeX)",labelNonLinguists:"",labelTranslators:"",type:"LaTeX",shouldBeEncrypted:!0,showToUserTypes:"machine",defaultfield:!0,json:{alternates:[]},help:"This optional field is used by the machine to make LaTeX trees and help with search and data cleaning, in combination with morphemes and gloss (above). If you want to use it, you can choose to use any sort of LaTeX Tree package (we use QTree by default) Sample entry: \\Tree [.S NP VP ]",helpLinguists:"This optional field is used by the machine to make LaTeX trees and help with search and data cleaning, in combination with morphemes and gloss (above). If you want to use it, you can choose to use any sort of LaTeX Tree package (we use QTree by default) Sample entry: \\Tree [.S NP VP ]"}],conversationFields:[{id:"speakers",labelFieldLinguists:"Speakers",labelNonLinguists:"Speakers",labelTranslators:"Speakers",type:"users",shouldBeEncrypted:!0,defaultfield:!0,json:{users:[]},help:"Use this field to keep track of who your speaker is. You can use names, initials, or whatever your consultants prefer.",helpLinguists:"Use this field to keep track of who your speaker is. You can use names, initials, or whatever your consultants prefer."},{id:"modality",labelFieldLinguists:"Modality",labelNonLinguists:"Modality",labelTranslators:"Modality",type:"tags",shouldBeEncrypted:!1,defaultfield:!0,json:{tags:[]},help:"Use this field to indicate if this is a voice or gesture tier, or a tier for another modality.",helpLinguists:"Use this field to indicate if this is a voice or gesture tier, or a tier for another modality."}],sessionFields:[{id:"goal",labelFieldLinguists:"Goal",labelNonLinguists:"Goal",labelTranslators:"Goal",shouldBeEncrypted:!1,defaultfield:!0,help:"The goals of the elicitation session. Why did you get together today, was it the second day of field methods class, or you wanted to collect some stories from you grandmother, or was it to check on some data you found in the literature...",helpLinguists:"The goals of the elicitation session. Why did you get together today, was it the second day of field methods class, or you wanted to collect some stories from you grandmother, or was it to check on some data you found in the literature..."},{id:"source",labelFieldLinguists:"Language Speakers/Publication/Source",labelNonLinguists:"By",labelTranslators:"Language Speakers/Publication/Source",shouldBeEncrypted:!1,defaultfield:!0,json:{users:[]},help:"This is a comma seperated field of all the consultants/publications/sources who were were the source/present for this elicitation session.",helpLinguists:"This is a comma seperated field of all the consultants/publications/sources who  were were the source/present for this elicitation session.",helpDevelopers:"This is a comma seperated field of all the consultants (usernames, or anonymouse codes, or publication uri's) who were present for this elicitation session. This field also contains a (hidden) array of consultant/source masks if they are actual users of the system. "},{id:"dialect",type:"language",labelFieldLinguists:"Dialect",labelNonLinguists:"Dialect",labelTranslators:"Dialect",shouldBeEncrypted:!1,defaultfield:!0,help:"Dialect of this example (city, village, region etc)",helpLinguists:"This dialect may precise as the team chooses (province, region, city, village or any other measure of dialect)"},{id:"register",type:"language",labelFieldLinguists:"Social Register",labelNonLinguists:"Social Register",labelTranslators:"Social Register",shouldBeEncrypted:!1,defaultfield:!0,help:"Social register of this example (friends, children speaking with children, formal, religious, ceremonial etc)",helpLinguists:"This is an optional field which indicates the social register of the example (friends, children speaking with children, formal, religious, ceremonial etc)"},{id:"language",type:"language",labelFieldLinguists:"Language Name",labelNonLinguists:"Language Name",labelTranslators:"Language Name (Ethnologue)",labelComputationalLinguists:"Language Name (ISO 639-3)",shouldBeEncrypted:!1,defaultfield:!0,json:{language:{ethnologueUrl:"",wikipediaUrl:"",iso:"",locale:"",englishName:"",nativeName:"",alternateNames:""}},help:"This is the langauge name (or language family), it is optionally tied to an Ethnologue language code (ISO 639-3).",helpLinguists:"This is the langauge (or language family), there is optional extra information fields if your team wants to tie it to an Ethnologe three letter language code (ISO 639-3)."},{id:"location",type:"location",labelFieldLinguists:"Location",labelNonLinguists:"Location",labelTranslators:"Location",shouldBeEncrypted:!0,encrypted:!0,defaultfield:!0,json:{location:{latitude:0,longitude:0,accuracy:0}},help:"This is the GPS location of the elicitation session (if available)",helpLinguists:"This is the GPS location of the elicitation session (if available)"},{id:"dateElicited",type:"date",labelFieldLinguists:"Original Date Elicited",labelNonLinguists:"OriginalDate Spoken",labelTranslators:"Original Date Spoken/Published",shouldBeEncrypted:!1,defaultfield:!0,json:{timestamp:{start:null,end:null,accuracy:null}},help:"The date when the elicitation session took place, or when the datum was spoken/published.",helpLinguists:"The date when the elicitation session took place, or when the datum was spoken/published."},{id:"participants",labelFieldLinguists:"Eliciation Session Participants",labelNonLinguists:"Session Participants",labelTranslators:"Participants",shouldBeEncrypted:!1,defaultfield:!0,json:{users:[]},help:"This is a comma seperated field of all the people who were present for this elicitation session, or authors/reviewers of the publication.",helpLinguists:"This is a comma seperated field of all the people who were present for this elicitation session, or authors/reviewers of the publication.",helpDevelopers:"This is a comma seperated field of all the people who were present for this elicitation session. This field also contains a (hidden) array of user masks with more details about the people present, if they are not anonymous or are actual users of the system. "},{id:"DateSessionEntered",type:"date",labelFieldLinguists:"Date Entered",labelNonLinguists:"Date Entered",labelTranslators:"Date Entered",shouldBeEncrypted:!1,defaultfield:!0,json:{timestamp:{start:null,end:null,accuracy:null}},help:"The date when the elicitation session data was actually entered in the computer (could be different from the dateElicited, especailly if you usually elicit data with an audio recorder and/or a note book).",helpLinguists:"The date when the elicitation session data was actually entered in the computer (could be different from the dateElicited, especailly if you usually elicit data with an audio recorder and/or a note book)."},{id:"device",type:"device",labelFieldLinguists:"Device Hardware",labelNonLinguists:"Device Hardware",labelTranslators:"Device Hardware",shouldBeEncrypted:!1,defaultfield:!0,json:{device:{}},help:"The optional device details of the equipment used to record the elicitation session. This can be useful for measuring phonetic quality of the recording etc. eg: Nexus 7 Android 4.1",helpLinguists:"The optional device details of the equipment used to record the elicitation session. This can be useful for measuring phonetic quality of the recording etc. eg: Nexus 7 Android 4.1",helpDevelopers:"Your app can save optional anonymous device details of the equipment/software which used to record the elicitation session. This can be useful for measuring phonetic quality of the recording etc. eg: Nexus 7 Android 4.1"}],speakerFields:[{id:"anonymousCode",labelFieldLinguists:"Anonymous Code",labelNonLinguists:"Anonymous Code",labelTranslators:"Anonymous Code",shouldBeEncrypted:!1,showToUserTypes:"all",defaultfield:!0,help:"A field to anonymously identify language speakers/participants.",helpLinguists:"A field to anonymously identify language consultants/informants/experiment participants (by default it can be a timestamp, or a combination of experimenter initials, speaker/participant initials etc)."},{id:"firstname",labelFieldLinguists:"First Name",labelNonLinguists:"",labelTranslators:"",shouldBeEncrypted:!0,encrypted:!0,showToUserTypes:"all",defaultfield:!0,help:"The first name of the speaker/participant (optional, encrypted if speaker is anonymous)",helpLinguists:"The first name of the speaker/participant (optional, should be encrypted if speaker should remain anonymous)"},{id:"lastname",labelFieldLinguists:"Last Name",labelNonLinguists:"",labelTranslators:"",shouldBeEncrypted:!0,encrypted:!0,showToUserTypes:"all",defaultfield:!0,help:"The last name of the speaker/participant (encrypted)",helpLinguists:"The last name of the speaker/participant (optional, encrypted if speaker should remain anonymous)"},{id:"username",labelFieldLinguists:"Username",labelNonLinguists:"",labelTranslators:"",shouldBeEncrypted:!0,encrypted:!0,showToUserTypes:"all",defaultfield:!0,help:"Optional username of the speaker/participant, if the speaker/participant is registered in the system (encrypted).",helpLinguists:"Optional username of the speaker/participant, if the speaker/participant is registered in the system (encrypted)."},{id:"dateOfBirth",type:"date",labelFieldLinguists:"Date of Birth",labelNonLinguists:"",labelTranslators:"",shouldBeEncrypted:!0,encrypted:!0,showToUserTypes:"all",defaultfield:!0,json:{timestamp:{start:null,end:null,accuracy:null}},help:"Optional date of birth of the speaker/participant, if used by the experimental analysis (ie speaker/participants of 20 months performed differently from speaker/participants of 22 months).",helpLinguists:"Optional date of birth of the speaker/participant, if used by the experimental analysis (ie speaker/participants of 20 months performed differently from speaker/participants of 22 months)."},{id:"gender",labelFieldLinguists:"Gender",labelNonLinguists:"",labelTranslators:"",shouldBeEncrypted:!0,encrypted:!0,showToUserTypes:"all",defaultfield:!0,json:{choices:["Female","Male","Unknown"],children:["Girl","Boy","Unknown"],adult:["Woman","Man","Unknown"]},help:"Optional gender or biological sex of the speaker/participant, if used by the speaker/participants result reports or experimental analysis.",helpLinguists:"Optional gender or biological sex of the speaker/participant, if used by the speaker/participants result reports or experimental analysis."},{id:"languages",type:"language collection",labelFieldLinguists:"Language(s) Spoken/Understood",labelNonLinguists:"Language(s) Spoken/Understood",labelTranslators:"Language(s) Spoken/Understood (Ethnologue)",labelComputationalLinguists:"Language(s) Spoken/Understood (ISO 639-3)",shouldBeEncrypted:!1,defaultfield:!0,json:{languages:[{language:{ethnologueUrl:"",wikipediaUrl:"",iso:"",locale:"",englishName:"",nativeName:"",alternateNames:""},fluency:{comprehensionFluency:"",speakingFluency:"",readingFluency:"",writingFluency:""},dates:{start:"",end:"",proportionOfUse:""}}]},help:"This is the langauge name (or language family), it is optionally tied to an Ethnologue language code (ISO 639-3).",helpLinguists:"This is the langauge (or language family), there is optional extra information fields if your team wants to tie it to an Ethnologe three letter language code (ISO 639-3)."},{id:"confidentiality",labelFieldLinguists:"Confidentiality Setting",labelNonLinguists:"Confidentiality Setting",labelTranslators:"Confidentiality Setting",shouldBeEncrypted:!1,value:"anonymous",showToUserTypes:"all",defaultfield:!0,json:{choices:["generalize","team","anonymous","public"]},help:"Confidentiality setting of this speaker. By default the speaker is anonymous which means data can be associated to one speaker, but the speaker cannot be identified) hidden means data will be associated to the entire speaker population of the corpus, team means that team members can see the consultant's identity, but the outsiders of the team can only see an anonymous user, public means the speaker has signed a consent form and has asked that his/her data to be associated his/her user account or identity.",helpLinguists:"Confidentiality setting of this speaker. By default the speaker is anonymous which means data can be associated to the speaker, but the speaker cannot be identified) hidden means data will be associated to the entire speaker population of the corpus, team means that team members can see the consultant's identity, but the outsiders of the team can only see an anonymous user, public means the speaker has signed a consent form and has asked that his/her data to be associated his/her user account or identity."}]}
},{}],21:[function(a,b){b.exports={description:"This is first database which contains the results of your experiment, you can use it to play with the app... When you want to make a real database, click New : Database/Corpus",participantFields:[{id:"courseNumber",labelExperimenter:"Course/Class/Section Number",labelNonLinguists:"",labelTranslators:"",shouldBeEncrypted:!0,encrypted:!0,showToUserTypes:"all",defaultfield:!0,help:"Optional course or section number, if used by the participants result reports or experimental conditions.",helpLinguists:"Optional course or section number, if used by the participants result reports or experimental conditions."},{id:"hemisphericDominance",labelExperimenter:"Hemispheric dominance (handedness)",labelNonLinguists:"",labelTranslators:"",shouldBeEncrypted:!0,showToUserTypes:"all",defaultfield:!0,json:{choices:["Right","Left","Unknown"]},help:"Optional right or left handedness or hemispheric dominante of the participant, if used by the participants result reports or experimental conditions.",helpLinguists:"Optional right or left handedness or hemispheric dominante of the participant, if used by the participants result reports or experimental conditions."}]}},{}],22:[function(a,b,c){var d=a("./../datum/Datum").Datum,e=a("./../FieldDBObject").FieldDBObject,f=a("./../datum/Document").Document,g=a("./../datum/DocumentCollection").DocumentCollection,h=a("./../comment/Comments").Comments,i=a("./../locales/ContextualizableObject").ContextualizableObject,j=a("q"),k=function(a){this._fieldDBtype||(this._fieldDBtype="DataList"),this.debug("Constructing DataList ",a),a&&a.comments,e.apply(this,arguments)};k.prototype=Object.create(e.prototype,{constructor:{value:k},api:{get:function(){return this._api||e.DEFAULT_STRING},set:function(a){if(a!==this._api){if(!a)return void delete this._api;a.trim&&(a=a.trim()),this._api=a}}},defaults:{get:function(){return{title:"Untitled Data List",description:"",datumIds:e.DEFAULT_ARRAY,docs:e.DEFAULT_COLLECTION}}},INTERNAL_MODELS:{value:{comments:h,docs:g,title:i,description:i}},title:{get:function(){return this._title||e.DEFAULT_STRING},set:function(a){if(a!==this._title){if(!a)return void delete this._title;a.trim&&(a=a.trim()),this._title=a}}},description:{get:function(){return this._description||e.DEFAULT_STRING},set:function(a){if(a!==this._description){if(!a)return void delete this._description;a.trim&&(a=a.trim()),this._description=a}}},docs:{get:function(){return this._docs},set:function(a){if(a!==this._docs){if(!a)return void delete this._docs;"[object Array]"===Object.prototype.toString.call(a)&&"function"==typeof this.INTERNAL_MODELS.docs&&(a=new this.INTERNAL_MODELS.docs(a)),this._docs=a}}},add:{value:function(a){this.docs||(this.docs=[]),this.docs.add(a)}},populate:{value:function(a){var b=this;this.docs=this.docs||[],a.map(function(a){try{"datalists"!==b.api&&(a.api=b.api),a.confidential=b.confidential;var c=a.fieldDBtype;c||(b.debug(" requesting guess type "),c=f.prototype.guessType(a),b.debug("request complete")),b.debug("Converting doc into type "+c),"Datum"===c?a=new d(a):"Document"===c?(a._type=c,a=new f(a)):"FieldDBObject"===c?a=new e(a):FieldDB&&FieldDB[c]?(b.warn("Converting doc into guessed type "+c),a=new FieldDB[c](a)):(b.warn("This doc does not have a type than can be used, it might display oddly ",a),a=new e(a))}catch(g){b.warn("error converting this doc: "+JSON.stringify(a)+g),a.confidential=b.confidential,a=new e(a)}b.debug("adding doc",a),b.docs.add(a),"Datum"===a.fieldDBtype&&(b.showDocPosition=!0,b.showDocCheckboxes=!0,b.docsAreReorderable=!0)})}},docIds:{get:function(){var a=this;return(!this._docIds||0===this._docIds.length)&&this.docs&&this.docs.length>0&&(this._docIds=this.docs.map(function(b){return a.debug("geting doc id of this doc ",b),b.id})),this._docIds||e.DEFAULT_ARRAY},set:function(a){return a!==this._docIds?a?void(this._docIds=a):void delete this._docIds:void 0}},datumIds:{get:function(){return this.warn("datumIds is deprecated, please use docIds instead."),this.docIds},set:function(a){this.warn("datumIds is deprecated, please use docIds instead."),this.docIds=a}},decryptedMode:{get:function(){return this.decryptedMode},set:function(a){this.decryptedMode=a,this.docs.decryptedMode=a}},icon:{get:function(){return"thumb-tack"}},getAllAudioAndVideoFiles:{value:function(a){var b=j.defer(),c=this;return j.nextTick(function(){a||(a=c.docIds),0===a.length&&(a=c.docIds);var e=[];c.debug("DATA LIST datumIdsToGetAudioVideo "+JSON.stringify(a)),a.map(function(a){var b=c.docs[a];if(b)b.audioVideo&&b.audioVideo.map(function(a){e.push(a.URL)});else{var f=new d({pouchname:c.dbname,id:a});f.fetch().then(function(a){this.debug("Fetched datum to get audio file",a),b.audioVideo&&f.audioVideo.map(function(a){e.push(a.URL)})})}}),b.resolve(e)}),b.promise}},applyFunctionToAllIds:{value:function(a,b,c){a||(a=this.docIds),0===a.length&&(a=this.docIds),b||(b="latexitDataList");var d=this;this.debug("DATA LIST datumIdsToApplyFunction "+JSON.stringify(a)),a.map(function(a){var e=d.docs[a];return e?(e[b].apply(e,c),a):(d.warn(" Doc has not been fetched, cant apply the function to it."),a)})}},toJSON:{value:function(a,b){this.debug("Customizing toJSON ",a,b),this.docs&&this.docs.length>0&&(this.docIds=null,this.docIds=this.docIds);var c=e.prototype.toJSON.apply(this,arguments);return delete c.docs,this.todo("Adding datumIds for backward compatability until prototype can handle docIds"),c.datumIds=this.docIds,this.debug(c),c}}}),c.DataList=k},{"./../FieldDBObject":4,"./../comment/Comments":14,"./../datum/Datum":24,"./../datum/Document":31,"./../datum/DocumentCollection":32,"./../locales/ContextualizableObject":42,q:76}],23:[function(a,b,c){var d=a("./DataList").DataList,e=a("./../datum/DocumentCollection").DocumentCollection,f=a("./../comment/Comments").Comments,g=a("./../locales/ContextualizableObject").ContextualizableObject,h=function(a){this._fieldDBtype||(this._fieldDBtype="SubExperimentDataList"),this.debug("Constructing SubExperimentDataList ",a),d.apply(this,arguments)};h.prototype=Object.create(d.prototype,{constructor:{value:h},INTERNAL_MODELS:{value:{comments:f,docs:e,title:g,description:g,instructions:g}},subexperiments:{get:function(){return this.docs&&this.docs.length>0?this.docs:this.docIds},set:function(a){a&&a[0]&&"object"==typeof a[0]||a.constructor===e?this.docs=a:(this.docIds=a,this._subexperiments=a)}},trials:{get:function(){return this.docs&&this.docs.length>0?this.docs:this.docIds},set:function(a){a&&a[0]&&"object"==typeof a[0]||a.constructor===e?this.docs=a:(this.docIds=a,this._trials=a)}},toJSON:{value:function(a,b){this.debug("Customizing toJSON ",a,b);var c=d.prototype.toJSON.apply(this,arguments);return this.debug(c),this.docs&&this.docs.toJSON&&(this.todo("only save trials/subexperiments if there are responses in the trials, or if the experiment started or somethign. "),c.results=this.docs.toJSON()),c}}}),c.SubExperimentDataList=h},{"./../comment/Comments":14,"./../datum/DocumentCollection":32,"./../locales/ContextualizableObject":42,"./DataList":22}],24:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=a("./../audio_video/AudioVideos").AudioVideos,f=a("./../comment/Comments").Comments,g=a("./../Collection").Collection,h=a("./DatumField").DatumField,i=a("./DatumFields").DatumFields,j=a("./DatumStates").DatumStates,k=a("./DatumTags").DatumTags,l=a("./../image/Images").Images,m=a("./../FieldDBObject").FieldDBObject,n=function(a){this._fieldDBtype||(this._fieldDBtype="Datum"),this.debug("Constructing Datum: ",a),d.apply(this,arguments)};n.prototype=Object.create(d.prototype,{constructor:{value:n},fields:{get:function(){return this._fields||d.DEFAULT_COLLECTION},set:function(a){if(a!==this._fields){if(!a)return void delete this._fields;"[object Array]"===Object.prototype.toString.call(a)&&"function"==typeof this.INTERNAL_MODELS.fields&&(a=new this.INTERNAL_MODELS.fields(a)),this._fields=a}}},datumFields:{get:function(){return this.debug("datumFields is depreacted, just use fields instead"),this.fields},set:function(a){return this.debug("datumFields is depreacted, just use fields instead"),this.fields=a}},audioVideo:{get:function(){return this._audioVideo&&"AudioVideos"===this._audioVideo.fieldDBtype&&(this._audioVideo.dbname=this.dbname),this._audioVideo||d.DEFAULT_COLLECTION},set:function(a){if(a!==this._audioVideo){if(!a)return void delete this._audioVideo;"[object Array]"===Object.prototype.toString.call(a)&&"function"==typeof this.INTERNAL_MODELS.audioVideo&&(a=new this.INTERNAL_MODELS.audioVideo(a)),this._audioVideo=a}}},play:{value:function(a){this.debug("optionalIndex",a),this._audioVideo&&"function"==typeof this._audioVideo.play&&this._audioVideo.play(0)}},images:{get:function(){return this._images&&"Images"===this._images.fieldDBtype&&(this._images.dbname=this.dbname),this._images||d.DEFAULT_COLLECTION},set:function(a){if(a!==this._images){if(!a)return void delete this._images;"[object Array]"===Object.prototype.toString.call(a)&&"function"==typeof this.INTERNAL_MODELS.images&&(a=new this.INTERNAL_MODELS.images(a)),this._images=a}}},api:{value:"datums"},INTERNAL_MODELS:{value:{fields:i,audioVideo:e,session:m,comments:f,datumStates:j,datumTags:k,images:l}},getMostRecentIdsByDate:{value:function(a,b){var c=this;if(OPrime.isBackboneCouchDBApp()){var d=new g;return d.model=n,void d.fetch({descending:!0,limit:a,error:function(a,c,d){OPrime.bug("There was an error loading your datums.",c,d),"function"==typeof b&&b([])},success:function(a,d){c.debug(a),b(d)}})}try{c.pouch(function(d,e){e.query("pages/datums",{reduce:!1},function(d,e){return d?window.toldSearchtomakebydateviews?void c.debug("Told pouch to make by date views once, apparently it didnt work. Stopping it from looping."):(window.toldSearchtomakebydateviews=!0,void window.app.get("corpus").createPouchView("pages/datums",function(){window.appView.toastUser("Initializing your corpus' sort items by date functions for the first time.","alert-success","Sort:"),c.getMostRecentIdsByDate(a,b)})):void(d||"function"!=typeof b||(c.debug("Callback with: ",e.rows),b(e.rows)))})})}catch(e){window.appView.datumsEditView.render(),c.bug("Couldnt show the most recent datums "+JSON.stringify(e))}}},fillWithCorpusFieldsIfMissing:{value:function(){if(this.get("fields")){var a=window.app.get("corpus").get("fields").models;for(var b in a){var c=a[b].get("label");this.debug("Label "+c);var d=this.get("fields").where({label:c});0===d.length&&this.get("fields").push(a[b])}}}},searchByQueryString:{value:function(a,b){var c=this;try{window.pageTracker._trackPageview("/search_results.php?q="+a)}catch(d){c.debug("Search Analytics not working.")}var e=c.processQueryString(a),f=!1;if(-1===a.indexOf(":")&&(f=!0,a=a.toLowerCase().replace(/\s/g,"")),OPrime.isBackboneCouchDBApp())return void $.couch.db(c.get("pouchname")).view("pages/get_datum_fields",{success:function(d){c.debug("Got "+d.length+"datums to check for the search query locally client side.");var g=[];for(var h in d.rows){var i=c.isThisMapReduceResultInTheSearchResults(d.rows[h],a,f,e);i&&g.push(d.rows[h].value)}"function"==typeof b&&b(_.unique(g))},error:function(a){console.log("Error quering datum",a)},reduce:!1});try{c.pouch(function(d,g){g.query("pages/get_datum_fields",{reduce:!1},function(d,g){var h=[];if(d){if(window.toldSearchtomakeviews)return void c.debug("Told search to make views once, apparently it didnt work. Stopping it from looping.");window.appView.toastUser("Initializing your search functions for the first time. Search in LingSync is pretty powerful,  in fact if you're the power user type you can write your own data extracting/filtering/visualization queries using  <a href='http://www.kchodorow.com/blog/2010/03/15/mapreduce-the-fanfiction/' target='_blank'>MapReduce.</a>","alert-success","Search:"),window.toldSearchtomakeviews=!0;var i=a;window.app.get("corpus").createPouchView("pages/get_datum_fields",function(){window.appView.searchEditView.search(i)})}else for(var j in g.rows){var k=c.isThisMapReduceResultInTheSearchResults(g.rows[j],a,f,e);k&&h.push(g.rows[j].value)}"function"==typeof b&&b(_.unique(h))})})}catch(d){c.bug("Couldnt search the data, if you sync with the server you might get the most recent search index.")}}},isThisMapReduceResultInTheSearchResults:{value:function(a,b,c,d){var e=!1;if(""===b.trim())e=!0;else if(c)JSON.stringify(a.key).toLowerCase().replace(/\s/g,"").search(b)>-1&&(e=!0);else{e=this.matchesSingleCriteria(a.key,d[0]);for(var f=1;f<d.length;f+=2)if("AND"===d[f]){if(!e)break;e=e&&this.matchesSingleCriteria(a.key,d[f+1])}else e=e||this.matchesSingleCriteria(a.key,d[f+1])}return e}},matchesSingleCriteria:{value:function(a,b){var c=b.indexOf(":"),d=b.substring(0,c),e=!1;0===d.indexOf("!")&&(d=d.replace(/^!/,""),e=!0);var f=b.substring(c+1);if("judgement"===d&&"grammatical"===f.toLowerCase()&&!a[d])return!0;var g=a[d]&&a[d].toLowerCase().search(f.toLowerCase())>=0;return e&&(g=!g),g}},processQueryString:{value:function(a){var b=a.split(" "),c=[],d="";for(var e in b){var f=b[e].trim();if(f.length<=0)break;"AND"===f||"OR"===f?(c.push(d),c.push(f),d=""):d=d?d+" "+f:f}return c.push(d),c}},getDisplayableFieldForActivitiesEtc:{value:function(){return this.model.get("fields").where({label:"utterance"})[0].get("mask")}},cloneDeprecated:{value:function(){var a=new n({audioVideo:new e(this.get("audioVideo").toJSON(),{parse:!0}),comments:new f(this.get("comments").toJSON(),{parse:!0}),dateEntered:this.get("dateEntered"),dateModified:this.get("dateModified"),fields:new i(this.get("fields").toJSON(),{parse:!0}),datumStates:new j(this.get("datumStates").toJSON(),{parse:!0}),datumTags:new k(this.get("datumTags").toJSON(),{parse:!0}),pouchname:this.get("pouchname"),session:this.get("session")});return a}},getValidationStatus:{value:function(){var a="",b=this.get("fields").where({label:"validationStatus"});return b.length>0&&(b=b[0].get("mask").split(" "),b.length>0&&(a=b[0])),""===a&&(b=this.get("datumStates").where({selected:"selected"}),b.length>0&&(a=b[0].get("state"))),this.updateDatumState(a),a}},getValidationStatusColor:{value:function(a){return a||(a=this.getValidationStatus()),a.toLowerCase().indexOf("deleted")>-1?"danger":a.toLowerCase().indexOf("tobechecked")>-1?"warning":a.toLowerCase().indexOf("checked")>-1?"success":void 0}},updateDatumState:{value:function(a){if(a){this.debug("Asking to change the datum state to "+a);var b=this.get("datumStates");window.app.get("corpus").get("datumStates").each(function(a){var c=a.toJSON();c.selected="",b.addIfNew(c)});try{$.each(this.get("datumStates").where({selected:"selected"}),function(){this.get("state")!==a&&this.set("selected","")}),this.get("datumStates").where({state:a})[0].set("selected","selected")}catch(c){this.debug("problem getting color of datum state, probaly none are selected.",c)}var d=this.get("fields").where({label:"validationStatus"})[0];d!==[]&&d||(d=new h({label:"validationStatus",shouldBeEncrypted:"",showToUserTypes:"all",userchooseable:"disabled",help:"Any number of status of validity (replaces DatumStates). For example: ToBeCheckedWithSeberina, CheckedWithRicardo, Deleted etc..."}),this.get("fields").add(d));var e=d.get("mask")||"";e=a+" "+e;var f=_.unique(e.trim().split(" "));d.set("mask",f.join(" "))}}},putInTrash:{value:function(){this.set("trashed","deleted"+Date.now()),this.updateDatumState("Deleted"),this.saveAndInterConnectInApp(function(){window.appView&&window.appView.datumsEditView.showMostRecentDatum()})}},laTeXiT:{value:function(a){this.debug(a);var b=window.app.get("corpus").frequentFields,c=_.pluck(this.get("fields").toJSON(),"mask"),d=_.pluck(this.get("fields").toJSON(),"label"),e=-1,f="",g=-1,h="",i=-1,j="",k=-1,l="",m=-1,n="",o="\n \\begin{exe} \n \\ex [";this.datumIsInterlinearGlossText()&&(e=d.indexOf("judgement"),e>=0&&(f=c[e],d.splice(e,1),c.splice(e,1)),g=d.indexOf("utterance"),g>=0&&(h=c[g],d.splice(g,1),c.splice(g,1)),i=d.indexOf("morphemes"),i>=0&&(j=c[i],d.splice(i,1),c.splice(i,1)),k=d.indexOf("gloss"),k>=0&&(l=c[k],d.splice(k,1),c.splice(k,1)),m=d.indexOf("translation"),m>=0&&(n=c[m],d.splice(m,1),c.splice(m,1)),o=o+this.escapeLatexChars(f)+"]{"+this.escapeLatexChars(h)+"\n \\gll "+this.escapeLatexChars(j)+"\\\\\n "+this.escapeLatexChars(l)+"\\\\\n \\trans "+this.escapeLatexChars(n)+"}\n\\label{}");for(var p=c.length-1;p>=0;p--)c[p]||(c.splice(p,1),d.splice(p,1));if(c&&c.length>0){var q=0;for(var r in c){if(b.indexOf(d[r])>=0)break;q++}o+=q!==d.length?"\n \\begin{description}":"\n% \\begin{description}";for(r in c)c[r]&&b.indexOf(d[r])>=0?o=o+"\n \\item[\\sc{"+this.escapeLatexChars(d[r])+"}] "+this.escapeLatexChars(c[r]):c[r]&&(o=d[r].toLowerCase().indexOf("latex")>-1?o+"\n "+c[r]:o+"\n% \\item[\\sc{"+this.escapeLatexChars(d[r])+"}] "+this.escapeLatexChars(c[r]));o+=q!==d.length?"\n \\end{description}":"\n% \\end{description}"}return o+="\n\\end{exe}\n\n"}},latexitDataList:{value:function(a){var b=this.laTeXiT(a);return null!==a&&($("#export-type-description").html(" as <a href='http://latex.informatik.uni-halle.de/latex-online/latex.php?spw=2&id=562739_bL74l6X0OjXf' target='_blank'>LaTeX (GB4E)</a>"),$("#export-text-area").val($("#export-text-area").val()+b)),b}},latexitDatum:{value:function(a){var b=this.laTeXiT(a);if(null!==a){$("#export-type-description").html(" as <a href='http://latex.informatik.uni-halle.de/latex-online/latex.php?spw=2&id=562739_bL74l6X0OjXf' target='_blank'>LaTeX (GB4E)</a>");var c="\\documentclass[12pt]{article} \n\\usepackage{fullpage} \n\\usepackage{tipa} \n\\usepackage{qtree} \n\\usepackage{gb4e} \n\\begin{document} \n"+b+"\\end{document}";$("#export-text-area").val(c)}return b}},escapeLatexChars:{value:function(a){var b=a;return b=b.replace(/\\/g,"\\textbackslashCURLYBRACES"),b=b.replace(/\^/g,"\\textasciicircumCURLYBRACES"),b=b.replace(/\~/g,"\\textasciitildeCURLYBRACES"),b=b.replace(/#/g,"\\#"),b=b.replace(/\$/g,"\\$"),b=b.replace(/%/g,"\\%"),b=b.replace(/&/g,"\\&"),b=b.replace(/_/g,"\\_"),b=b.replace(/{/g,"\\{"),b=b.replace(/}/g,"\\}"),b=b.replace(/</g,"\\textless"),b=b.replace(/>/g,"\\textgreater"),b=b.replace(/CURLYBRACES/g,"{}")}},datumIsInterlinearGlossText:{value:function(a){a||(a=_.pluck(this.get("fields").toJSON(),"label"));var b=!1,c=!1,d=!1;for(var e in a)("utterance"===a[e]||"morphemes"===a[e])&&(b=!0),"gloss"===a[e]&&(c=!0),"translation"===a[e]&&(d=!0);return c||b||d?!0:!1}},exportAsPlainText:{value:function(a){var b=_.pluck(this.get("fields").toJSON(),"mask")||[],c=b.join("\n");return null!==a&&($("#export-type-description").html(" as text (Word)"),$("#export-text-area").val($("#export-text-area").val()+c)),c}},exportAsCSV:{value:function(a,b,c){var d=_.pluck(this.get("fields").toJSON(),"label")||[],e=_.pluck(this.get("fields").toJSON(),"mask")||[],f=e.join(",")+"\n";return c&&(f=d.join(",")+"\n"),null!==a&&($("#export-type-description").html(" as CSV (Excel, Filemaker Pro)"),$("#export-text-area").val($("#export-text-area").val()+f)),f}},encrypt:{value:function(){this.set("confidential",!0),this.get("fields").each(function(a){a.set("encrypted","checked")}),this.saveAndInterConnectInApp(window.app.router.renderDashboardOrNot,window.app.router.renderDashboardOrNot)}},decrypt:{value:function(){this.set("confidential",!1),this.get("fields").each(function(a){a.set("encrypted","")})}},saveAndInterConnectInApp:{value:function(a,b){this.debug("Saving a Datum");var c=this,d=!0;if(this.id?d=!1:this.set("dateEntered",JSON.stringify(new Date)),window.app.get("corpus").get("pouchname")!==this.get("pouchname"))return void("function"==typeof b?b():c.bug("Datum save error. I cant save this datum in this corpus, it belongs to another corpus. "));this.get("fields").each(function(a){a.set("value",a.get("mask"))}),this.set({pouchname:window.app.get("corpus").get("pouchname"),dateModified:JSON.stringify(new Date),timestamp:Date.now(),jsonType:"Datum"}),this.get("session")?c.debug("Not setting the session on this datum."):(this.set("session",window.app.get("currentSession")),c.debug("Setting the session on this datum to the current one.")),window.app.get("corpus").set("dateOfLastDatumModifiedToCheckForOldSession",JSON.stringify(new Date));var e=this.get("_rev");try{var f=this.get("datumStates").models;for(var g in f)void 0===f[g].get("state")&&this.get("datumStates").remove(f[g])}catch(h){c.debug("Removing empty states work around failed some thing was wrong.",h)}c.save(null,{success:function(b,f){c.debug("Datum save success");var g=b.get("fields").where({label:"utterance"})[0].get("mask"),h="#diff/oldrev/"+e+"/newrev/"+f._rev;window.appView&&(window.appView.toastUser("Sucessfully saved datum: "+g,"alert-success","Saved!"),window.appView.addSavedDoc(b.id));var i="modified",j="icon-pencil";if(d&&(i="added",j="icon-plus"),window.app.addActivity({verb:"<a href='"+h+"'>"+i+"</a> ",verbicon:j,directobject:"<a href='#corpus/"+b.get("pouchname")+"/datum/"+b.id+"'>"+g+"</a> ",directobjecticon:"icon-list",indirectobject:"in <a href='#corpus/"+window.app.get("corpus").id+"'>"+window.app.get("corpus").get("title")+"</a>",teamOrPersonal:"team",context:" via Offline App."}),window.app.addActivity({verb:"<a href='"+h+"'>"+i+"</a> ",verbicon:j,directobject:"<a href='#corpus/"+b.get("pouchname")+"/datum/"+b.id+"'>"+g+"</a> ",directobjecticon:"icon-list",indirectobject:"in <a href='#corpus/"+window.app.get("corpus").id+"'>"+window.app.get("corpus").get("title")+"</a>",teamOrPersonal:"personal",context:" via Offline App."}),""!==$("#search_box").val()){var k=b.get("fields").toJSON(),l={};for(var m in k)l[k[m].label]=k[m].mask;for(var n=c.processQueryString($("#search_box").val()),o=c.matchesSingleCriteria(l,n[0]),p=1;p<n.length;p+=2)if("AND"===n[p]){if(!o)break;o=o&&b.matchesSingleCriteria(l,n[p+1])}else o=o||b.matchesSingleCriteria(l,n[p+1]);if(o){window.appView.searchEditView.searchPaginatedDataListDatumsView.collection.remove(b),window.appView.searchEditView.searchPaginatedDataListDatumsView.collection.unshift(b);var q=window.appView.searchEditView.searchDataListView.model.get("datumIds").indexOf(b.id);-1!==q&&window.appView.searchEditView.searchDataListView.model.get("datumIds").splice(q,1),window.appView.searchEditView.searchDataListView.model.get("datumIds").unshift(b.id)}}"function"==typeof a&&a()},error:function(a,d,e){c.debug("Datum save error",a,d,e),"function"==typeof b?b():c.bug("Datum save error: "+d.reason)}})}},setAsCurrentDatum:{value:function(){this.warn("Using deprected method setAsCurrentDatum.")}},highlight:{value:function(a,b,c){c=c||"highlight";var d=new RegExp("("+b+")","gi");return a.replace(d,"<span class='"+c+"'>$1</span>")}},toJSON:{value:function(a,b){this.debug("Customizing toJSON ",a,b);var c=d.prototype.toJSON.apply(this,arguments);return this.todo("saving fields as the deprecated datumFields"),c.datumFields=c.fields,delete c.fields,this.debug(c),c}}}),c.Datum=n},{"./../Collection":2,"./../FieldDBObject":4,"./../audio_video/AudioVideos":11,"./../comment/Comments":14,"./../image/Images":40,"./DatumField":25,"./DatumFields":26,"./DatumStates":28,"./DatumTags":30}],25:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=a("./../confidentiality_encryption/Confidential").Confidential,f=function(a){this._fieldDBtype||(this._fieldDBtype="DatumField"),this.debug("Constructing DatumField ",a),a&&a.encryptedValue&&(a._encryptedValue=a.encryptedValue),a&&a.value&&(a._value=a.value),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},defaults:{get:function(){return{id:Date.now(),labelFieldLinguists:"",labelPsychoLinguists:"",labelExperimenters:"",labelNonLinguists:"",labelTranslators:"",labelComputationalLinguist:"",type:"",shouldBeEncrypted:!1,showToUserTypes:"all",defaultfield:!1,value:"",mask:"",encrypted:"",json:{},help:"Put your team's data entry conventions here (if any)...",helpLinguists:"Put your team's data entry conventions here (if any)...",helpNonLinguists:"Put your team's data entry conventions here (if any)...",helpTranslators:"Put your team's data entry conventions here (if any)...",ComputationalLinguists:"Put your team's data entry conventions here (if any)...",helpDevelopers:"Put your team's data entry conventions here (if any)..."}}},internalModels:{value:{}},id:{get:function(){return this._id||d.DEFAULT_STRING},set:function(a){if(a!==this._id){if(!a)return void delete this._id;a.trim&&(a=a.trim());var b=a+"";return a=this.sanitizeStringForPrimaryKey(a),null===a?void this.bug("Invalid id, not using "+b+" id remains as "+this._id):void(this._id=a)}}},label:{get:function(){return this.debug("label is deprecated, instead automatically contextualize a label for appropriate user eg labelFieldLinguists, labelNonLinguists, labelTranslators, labelComputationalLinguist"),this._labelFieldLinguists||d.DEFAULT_STRING},set:function(a){this.debug("label is deprecated, instead automatically contextualize a label for appropriate user eg labelFieldLinguists,  labelNonLinguists, labelTranslators, labelComputationalLinguist"),this.labelFieldLinguists=a,this.id=a}},userchooseable:{get:function(){return this.debug("userchooseable is deprecated, instead use defaultfield"),this.defaultfield},set:function(a){this.debug("userchooseable is deprecated, instead use defaultfield"),"disabled"===a&&(a=!0),a||(a=!1),this.defaultfield=a}},labelFieldLinguists:{get:function(){return this._labelFieldLinguists||this.label},set:function(a){return a!==this._labelFieldLinguists?a?void(this._labelFieldLinguists=a.trim()):void delete this._labelFieldLinguists:void 0}},labelPsychoLinguists:{get:function(){return this._labelPsychoLinguists||this.labelFieldLinguists},set:function(a){return a!==this._labelPsychoLinguists?a?void(this._labelPsychoLinguists=a.trim()):void delete this._labelPsychoLinguists:void 0}},labelExperimenter:{get:function(){return this._labelExperimenter||this.labelNonLinguists},set:function(a){return a!==this._labelExperimenter?a?void(this._labelExperimenter=a.trim()):void delete this._labelExperimenter:void 0}},labelNonLinguists:{get:function(){return this._labelNonLinguists||this.label},set:function(a){return a!==this._labelNonLinguists?a?void(this._labelNonLinguists=a.trim()):void delete this._labelNonLinguists:void 0}},labelTranslators:{get:function(){return this._labelTranslators||this.labelNonLinguists},set:function(a){return a!==this._labelTranslators?a?void(this._labelTranslators=a.trim()):void delete this._labelTranslators:void 0}},labelComputationalLinguist:{get:function(){return this._labelComputationalLinguist||this.label},set:function(a){return a!==this._labelComputationalLinguist?a?void(this._labelComputationalLinguist=a.trim()):void delete this._labelComputationalLinguist:void 0}},type:{get:function(){return this._type||d.DEFAULT_STRING},set:function(a){return a!==this._type?a?void(this._type=a.trim()):void delete this._type:void 0}},shouldBeEncrypted:{get:function(){return this._shouldBeEncrypted||d.DEFAULT_FALSE},set:function(a){return this.verbose("Setting shouldBeEncrypted "+a,this),a!==this._shouldBeEncrypted?("checked"===a&&(a=!0),a=!!a,this.verbose("Setting shouldBeEncrypted "+a,this),this._shouldBeEncrypted===!0&&a===!1?void this.warn("This field's shouldBeEncrypted cannot be undone. Only a corpus administrator can change shouldBeEncrypted to false if it has been true before."):void(this._shouldBeEncrypted=a)):void 0}},encrypted:{get:function(){return this._encrypted||d.DEFAULT_FALSE},set:function(a){if(a!==this._encrypted){if(!a)return void delete this._encrypted;"checked"===a&&(a=!0),this._encrypted=!!a}}},showToUserTypes:{get:function(){return this._showToUserTypes||"all"},set:function(a){return a!==this._showToUserTypes?a?void(this._showToUserTypes=a.trim()):void delete this._showToUserTypes:void 0}},defaultfield:{get:function(){return this._defaultfield||d.DEFAULT_FALSE},set:function(a){return a!==this._defaultfield?a?void(this._defaultfield=!!a):void delete this._defaultfield:void 0}},repairMissingEncryption:{value:!0},value:{configurable:!0,get:function(){if(!this._value)return d.DEFAULT_STRING;if(!this._shouldBeEncrypted)return this._value.trim();if(!this.encrypted)return this._value.trim();if(!this.decryptedMode)return this.warn("User is not able to view the value of this item, it is encrypted and the user isn't in decryptedMode."),this.mask||d.DEFAULT_STRING;if(!this._encryptedValue||0!==this._encryptedValue.indexOf("confidential:")){if(this.warn("The value was supposed to be encrypted but was not encrypted. This should not happen, it might only happen if an app was editing the data and didn't have the encryption implemented. Not overwritting the value."),!this.repairMissingEncryption||!this.confidential)return this._value.trim();var a=this.confidential.encrypt(this._value);this.warn(" Encrypting the value "+this._value),this._encryptedValue=a,this._mask=this.createMask(this._value),this._value=this._mask}if(0===this._encryptedValue.indexOf("confidential:")){if(!this.confidential)return this.warn("This field's encrypter hasnt been set. It cannot be decrypted yet."),this.mask;var b=this.confidential.decrypt(this._encryptedValue);return this.debug("decryptedValue "+b),b}this.bug("The value wasn't returned, this should never happen and is a bug in the logic.")},set:function(a){if(a!==this._value){if(!a){var b=!this._shouldBeEncrypted||this._shouldBeEncrypted&&this.decryptedMode;return b?(delete this._value,delete this._mask,void delete this._encryptedValue):void this.warn("The value was removed by the user, but they are not able to edit the field currently.")}var c;if(a.trim||(a+=""),a=a.trim(),!this._shouldBeEncrypted)return this._encryptedValue=a,this._mask=a,void(this._value=this._mask);if(!this.encrypted)return this._encryptedValue=a,this._mask=a,void(this._value=this._mask);if(this._value){if(!this.decryptedMode)return void this.warn("User is not able to change the value of this item, it is encrypted and the user isn't in decryptedMode.");if(!this._encryptedValue||0!==this._encryptedValue.indexOf("confidential:")){if(this.warn("The value was changed, and it was supposed to be encrypted but was not encrypted. This should not happen, it might only happen if an app was editing the data and didn't have the encryption implemented."),!this.repairMissingEncryption||!this.confidential)return void this.warn(" Not overwritting the value.");c=this.confidential.encrypt(a),this._encryptedValue=c,this._mask=this.createMask(a),this._value=this._mask,this.warn(" Overwritting the value.")}if(!this.confidential)return void this.warn("This field's encrypter hasnt been set. It cannot be edited yet.");c=this.confidential.encrypt(a),this._encryptedValue=c,this._mask=this.createMask(a),this._value=this._mask}else{if(!this.confidential)return void(0!==a.indexOf("confidential:")||this._encryptedValue?this.warn("This field's encrypter hasnt been set. It cannot be edited yet."):(this._encryptedValue=a,this._value=this.mask,this.debug('This is probably a new field initialization from old data (the value has "confidential:" in it, and yet the encryptedValue isn\'t set')));c=this.confidential.encrypt(a),this._encryptedValue=c,this._mask=this.createMask(a),this._value=this._mask}}}},mask:{get:function(){return this._mask||d.DEFAULT_STRING},set:function(a){if(a!==this._mask){if(!a)return void delete this._mask;this.debug("Setting datum field mask "+a),this._mask=a.trim()}}},encryptedValue:{get:function(){return this._encryptedValue||d.DEFAULT_STRING},set:function(a){a!==this._encryptedValue&&this.warn("encryptedValue cannot be changed directly, instead field must be in decryptedMode and then set the value."+a)}},json:{get:function(){return this._json||d.DEFAULT_OBJECT},set:function(a){return a!==this._json?a?void(this._json=a):void delete this._json:void 0}},help:{configurable:!0,get:function(){return this._help||"Put your team's data entry conventions here (if any)..."},set:function(a){return a!==this._help?a?void(this._help=a.trim()):void delete this._help:void 0}},helpLinguists:{get:function(){return this._helpLinguists||"Put your team's data entry conventions here (if any)..."
},set:function(a){return a!==this._helpLinguists?a?void(this._helpLinguists=a.trim()):void delete this._helpLinguists:void 0}},helpNonLinguists:{get:function(){return this._helpNonLinguists||"Put your team's data entry conventions here (if any)..."},set:function(a){return a!==this._helpNonLinguists?a?void(this._helpNonLinguists=a.trim()):void delete this._helpNonLinguists:void 0}},helpTranslators:{get:function(){return this._helpTranslators||"Put your team's data entry conventions here (if any)..."},set:function(a){return a!==this._helpTranslators?a?void(this._helpTranslators=a.trim()):void delete this._helpTranslators:void 0}},helpComputationalLinguists:{get:function(){return this._helpComputationalLinguists||"Put your team's data entry conventions here (if any)..."},set:function(a){return a!==this._helpComputationalLinguists?a?void(this._helpComputationalLinguists=a.trim()):void delete this._helpComputationalLinguists:void 0}},helpDevelopers:{get:function(){return this._helpDevelopers||"Put your team's data entry conventions here (if any)..."},set:function(a){return a!==this._helpDevelopers?a?void(this._helpDevelopers=a.trim()):void delete this._helpDevelopers:void 0}},validate:{value:function(a){this.tood("Vaidating is commented out ",a)}},upgrade:{value:function(a,b){return b=b||{},void 0===a.mask&&this.mask&&(a.mask=this.mask),void 0===a.value&&this.value&&(a.value=this.value),void 0===a.shouldBeEncrypted&&this.shouldBeEncrypted&&(a.shouldBeEncrypted=this.shouldBeEncrypted),void 0===a.encrypted&&this.encrypted&&(a.encrypted=this.encrypted),a.mask&&""!==a.mask&&("checked"!==a.shouldBeEncrypted?a.value=a.mask:"checked"!==a.encrypted?a.value=a.mask:this.corpus.confidential.decryptedMode?(0!==a.mask.indexOf("confidential:")?a.value=this.corpus.confidential.encrypt(a.mask):0===a.mask.indexOf("confidential:")&&(a.mask=this.mask(this.corpus.confidential.decrypt(this.value)),a.value=this.value),a.value&&0!==a.value.indexOf("confidential")?a.value=this.corpus.confidential.encrypt(a.mask):a.value&&0===a.value.indexOf("confidential")&&(a.mask=this.corpus.confidential.decrypt(this.value),a.value=this.value)):("checked"===this.encrypted&&("checked"===a.encrypted||this.corpus.confidential.decryptedMode||(a.encrypted="checked")),a.mask&&0===a.mask.indexOf("confidential")?(a.mask=this.mask(this.corpus.confidential.decrypt(this.value)),a.value=this.value):(a.mask=this.mask,a.value=this.value),a.value&&0!==a.value.indexOf("confidential")?(a.mask=this.mask(this.value),a.value=this.corpus.confidential.encrypt(this.value)):(a.mask=this.mask,a.value=this.value))),a}},createMask:{value:function(a){return a.replace(/[^_=., -]/g,"x")}},saveAndInterConnectInApp:{value:function(a){"function"==typeof a&&a()}},confidential:{get:function(){return this.confidentialEncrypter},set:function(a){a!==this.confidentialEncrypter&&("function"!=typeof a.encrypt&&a.secretkey&&(a=new e(a)),this.confidentialEncrypter=a)}},toJSON:{value:function(a,b){this.debug("Customizing toJSON ",a,b);var c=d.prototype.toJSON.apply(this,arguments);return delete c.dateCreated,delete c.dateModified,delete c.comments,delete c.dbname,c.id=c._id,delete c._id,c.fieldDBtype=this.fieldDBtype,delete c._type,this.debug(c),c}}}),c.DatumField=f},{"./../FieldDBObject":4,"./../confidentiality_encryption/Confidential":15}],26:[function(a,b,c){var d=a("./../Collection").Collection,e=a("./../datum/DatumField").DatumField,f=function(a){this._fieldDBtype||(this._fieldDBtype="DatumFields"),this.debug("Constructing DatumFields length: ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"id"},INTERNAL_MODELS:{value:{item:e}},capitalizeFirstCharacterOfPrimaryKeys:{value:!1}}),c.DatumFields=f},{"./../Collection":2,"./../datum/DatumField":25}],27:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=a("./../user/UserMask").UserMask,f=function(a){this._fieldDBtype||(this._fieldDBtype="DatumState"),this.debug("Constructing DatumState ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},defaults:{value:{state:"Checked",color:"",consultant:e,showInSearchResults:"checked",selected:""}},INTERNAL_MODELS:{value:{consultant:e}},validationStatus:{get:function(){return!this._validationStatus&&this.state&&(this.warn("state is deprecated, use validationStatus instead."),this._validationStatus=this.state),this._validationStatus||d.DEFAULT_STRING},set:function(a){return a!==this._validationStatus?a?void(this._validationStatus=a.trim()):void delete this._validationStatus:void 0}}}),c.DatumState=f},{"./../FieldDBObject":4,"./../user/UserMask":56}],28:[function(a,b,c){var d=a("./DatumTags").DatumTags,e=a("./DatumState").DatumState,f=function(a){this._fieldDBtype||(this._fieldDBtype="DatumStates"),this.debug("Constructing DatumStates length: ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"validationStatus"},INTERNAL_MODELS:{value:{item:e}}}),c.DatumStates=f},{"./DatumState":27,"./DatumTags":30}],29:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=function(a){this._fieldDBtype||(this._fieldDBtype="DatumTag"),this.debug("Constructing DatumTag ",a),d.apply(this,arguments)};e.prototype=Object.create(d.prototype,{constructor:{value:e}}),c.DatumTag=e},{"./../FieldDBObject":4}],30:[function(a,b,c){var d=a("./../Collection").Collection,e=a("./DatumTag").DatumTag,f=function(a){this._fieldDBtype||(this._fieldDBtype="DatumTags"),this.debug("Constructing DatumTags ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"tag"},INTERNAL_MODELS:{value:{item:e}}}),c.DatumTags=f},{"./../Collection":2,"./DatumTag":29}],31:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=function(a){this.debug("In Document ",a),d.apply(this,arguments)};e.fieldDBtype="Document",e.prototype=Object.create(d.prototype,{constructor:{value:e},fieldDBtype:{get:function(){return this.debug("getting fieldDBtype"),!this._fieldDBtype,this._fieldDBtype||""},set:function(a){this.debug("setting fieldDBtype"),a!==this._fieldDBtype&&(this.warn("Overriding fieldDBtype "+this._fieldDBtype+" to the incoming "+a),this._fieldDBtype=a)}},guessType:{value:function(a){if(!a||JSON.stringify(a)==={})return"FieldDBObject";this.debug("Guessing type "+a._id);var b=a.jsonType||a.collection||"FieldDBObject";return a.api&&a.api.length>0&&(this.debug("using api"+a.api),b=a.api[0].toUpperCase()+a.api.substring(1,a.api.length)),b=b.replace(/s$/,""),b=b[0].toUpperCase()+b.substring(1,b.length),"Datalist"===b&&(b="DataList"),"FieldDBObject"===b&&(a.datumFields&&a.session?b="Datum":a.datumFields&&a.sessionFields?b="Corpus":"sessions"===a.collections&&a.sessionFields?b="Session":a.text&&a.username&&a.timestamp&&a.gravatar&&(b="Comment")),this.warn("Guessed type "+a._id+" is a "+b),b}}}),c.Document=e},{"./../FieldDBObject":4}],32:[function(a,b,c){var d=a("./../Collection").Collection,e=a("./Document").Document,f=function(a){this._fieldDBtype||(this._fieldDBtype="DocumentCollection"),this.debug("Constructing DocumentCollection ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"id"},INTERNAL_MODELS:{value:{item:e}},sanitizeStringForPrimaryKey:{value:function(a){return a}}}),c.DocumentCollection=f},{"./../Collection":2,"./Document":31}],33:[function(a,b,c){var d=a("./Stimulus").Stimulus,e=a("q"),f=function(a){this._fieldDBtype||(this._fieldDBtype="Response"),this.debug("Constructing Response ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},jsonType:{get:function(){return this.fieldDBtype}},collection:{get:function(){return this.fieldDBtype}},pauseAudioWhenConfirmingResponse:{value:null,configurable:!0},addResponse:{value:function(a,b){if(!a)throw"Cannot add response without the x y information found in the touch/click responseEvent";var c=Date.now(),d=this.application.audioPlayer.getDuration(this.audioFile)||0;d?d=1e3*d:console.log("The audio has no duration.. This is strange."),this.pauseAudioWhenConfirmingResponse&&this.pauseAudio();var f=this,g=e.defer();if(this.confirmResponseChoiceMessage){this.contextualizer.currentLocale=this.application.interfaceLocale;var h=this.contextualizer.localize(this.confirmResponseChoiceMessage),i={iconSrc:f.ownerComponent.iconSrc,message:h};this.confirm(i.message).then(function(){g.resolve()},function(){g.reject(new Error("The x prevented the cancel?"))})}else g.resolve();g.promise.then(function(){f.stopAudio(),f.ownerComponent.nextStimulus()},function(a){console.log("Not continuing to next stimulus",a),this.pauseAudioWhenConfirmingResponse&&f.playAudio()});var j="";b&&(j=this[b].substring(this[b].lastIndexOf("/")+1).replace(/\..+$/,"").replace(/\d+_/,""),j===this.target.orthographic?j=this.target:this.distractors.map(function(a){j===a.orthographic&&(j=a)}));var k={reactionTimeAudioOffset:c-this.reactionTimeStart-d,reactionTimeAudioOnset:c-this.reactionTimeStart,x:a.x,y:a.y,pageX:a.pageX,pageY:a.pageY,choice:j,score:this.scoreResponse(this.target,j)};this.responses.push(k),console.log("Recorded response",JSON.stringify(k))}},addOralResponse:{value:function(a,b){var c=Date.now(),d=this.application.audioPlayer.getDuration(this.audioFile)||0;d?d=1e3*d:console.log("The audio has no duration.. This is strange."),this.pauseAudioWhenConfirmingResponse&&this.pauseAudio();var f=this,g=e.defer();if(this.confirmResponseChoiceMessage){this.contextualizer.currentLocale=this.application.interfaceLocale;var h=this.contextualizer.localize(this.confirmResponseChoiceMessage),i={iconSrc:f.ownerComponent.iconSrc,message:h};this.confirm(i.message).then(function(){g.resolve()},function(){g.reject(new Error("The x prevented the cancel?"))})}else b||g.resolve();g.promise.then(function(){f.stopAudio(),f.ownerComponent.nextStimulus()},function(a){console.log("Not continuing to next stimulus",a),this.pauseAudioWhenConfirmingResponse&&f.playAudio()});var j={reactionTimeAudioOffset:c-this.reactionTimeStart-d,reactionTimeAudioOnset:c-this.reactionTimeStart,x:0,y:0,pageX:0,pageY:0,choice:a,score:a.score};this.responses=this.responses||[],this.responses.push(j),console.log("Recorded response",JSON.stringify(j))}},scoreResponse:{value:function(a,b){return b.orthographic?b.orthographic===a.orthographic?1:0:"error"}},addNonResponse:{value:function(a){if(!a)throw"Cannot add response without the x y information found in the touch/click responseEvent";var b=Date.now(),c={reactionTimeAudioOffset:b-this.reactionTimeStart,reactionTimeAudioOnset:b-this.reactionTimeStart,x:a.x,y:a.y,pageX:a.pageX,pageY:a.pageY,chosenVisualStimulus:"none",responseScore:-1};this.responses=this.responses||[],this.nonResponses.push(c),console.log("Recorded non-response, the user is confused or not playing the game.",JSON.stringify(c))}},playAudio:{value:function(a){this.application.audioPlayer.play(this.audioFile,a)}},pauseAudio:{value:function(){this.application.audioPlayer.pause(this.audioFile)}},stopAudio:{value:function(){this.application.audioPlayer.stop(this.audioFile)}},load:{value:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);null===this.responses&&(this.responses=[]),null===this.nonResponses&&(this.nonResponses=[]),this.nonResponses=[],this.experimenterId=this.application.experiment.experimenter.id,this.participantId=this.application.experiment.participant.id}}}),c.Response=f},{"./Stimulus":34,q:76}],34:[function(a,b,c){var d=a("./Datum").Datum,e=function(a){this._fieldDBtype||(this._fieldDBtype="Stimulus"),this.debug("Constructing Stimulus ",a),d.apply(this,arguments)};e.prototype=Object.create(d.prototype,{constructor:{value:e},prime:{get:function(){return this._prime},set:function(a){this._prime=a}},target:{get:function(){return this._target},set:function(a){this._target=a}},distractors:{get:function(){return this._distractors},set:function(a){this._distractors=a}},layout:{get:function(){return this._layout},set:function(a){this._layout=a}}}),c.Stimulus=e},{"./Datum":24}],35:[function(a,b,c){if("undefined"==typeof d)var d={};!function(a){var b={initialize:function(){},exportCSV:function(){},exportXML:function(){},exportLaTex:function(){}};a.Export=b}(d||c)},{}],36:[function(a,b,c){var d="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};!function(b){"use strict";var c=a("./app/App").App,e=a("./app/PsycholinguisticsApp").PsycholinguisticsApp,f=a("./export/Export"),g=a("./FieldDBObject").FieldDBObject,h=a("./datum/Document").Document,i=a("./CORS").CORS;i.bug=g.prototype.bug;var j=a("./data_list/DataList").DataList,k=a("./data_list/SubExperimentDataList").SubExperimentDataList,l=a("./audio_video/AudioVideo").AudioVideo,m=a("./datum/Datum").Datum,n=a("./datum/Stimulus").Stimulus,o=a("./datum/Response").Response,p=a("./corpus/Database").Database,q=a("./corpus/PsycholinguisticsDatabase").PsycholinguisticsDatabase,r=a("./FieldDBConnection").FieldDBConnection,s=a("./Router").Router,t=a("./user/User").User,u=a("./user/UserMask").UserMask,v=a("./user/Team").Team,w=a("./user/Speaker").Speaker,x=a("./user/Consultant").Consultant,y=a("./user/Participant").Participant,z=a("./locales/Contextualizer").Contextualizer,A=a("./corpus/Corpus").Corpus,B=a("./corpus/Corpus").FieldDatabase,C=a("./corpus/CorpusMask").CorpusMask,D=a("./import/Import").Import,E=a("./search/Search").Search,F=a("q"),G={};G.App=c,G.PsycholinguisticsApp=e,G.Export=f,G.FieldDBObject=g,G.Document=h,G.CORS=i,G.DataList=j,G.SubExperimentDataList=k,G.AudioVideo=l,G.Datum=m,G.Stimulus=n,G.Response=o,G.Database=p,G.FieldDatabase=B,G.PsycholinguisticsDatabase=q,G.Router=s,G.User=t,G.UserMask=u,G.Team=v,G.Speaker=w,G.Consultant=x,G.Participant=y,G.Contextualizer=z,G.Corpus=A,G.CorpusMask=C,G.Import=D,G.Search=E,G.Q=F,G.FieldDBConnection=r,b.FieldDB=G,d.FieldDB=G,console.log("------------------------------------------------------------------------"),console.log("------------------------------------------------------------------------"),console.log("------------------------------------------------------------------------"),console.log("                     ___ _     _    _ ___  ___ "),console.log("                    | __(_)___| |__| |   \\| _ )"),console.log("                    | _|| / -_) / _` | |) | _ \\"),console.log("                    |_| |_\\___|_\\__,_|___/|___/"),console.log("-----------------------------------------------loaded.------------------"),console.log("------------------------------------------------------------------------"),console.log("-----------------------Welcome to the power user console! Type----------"),console.log("--------------------------FieldDB.--------------------------------------"),console.log("---------------------------for available models/functionality-----------"),console.log("------------------------------------------------------------------------"),console.log("------------------------------------------------------------------------")}("object"==typeof c&&c||this)},{"./CORS":1,"./FieldDBConnection":3,"./FieldDBObject":4,"./Router":5,"./app/App":7,"./app/PsycholinguisticsApp":8,"./audio_video/AudioVideo":10,"./corpus/Corpus":16,"./corpus/CorpusMask":17,"./corpus/Database":18,"./corpus/PsycholinguisticsDatabase":19,"./data_list/DataList":22,"./data_list/SubExperimentDataList":23,"./datum/Datum":24,"./datum/Document":31,"./datum/Response":33,"./datum/Stimulus":34,"./export/Export":35,"./import/Import":41,"./locales/Contextualizer":43,"./search/Search":48,"./user/Consultant":51,"./user/Participant":52,"./user/Speaker":53,"./user/Team":54,"./user/User":55,"./user/UserMask":56,q:76}],37:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=function(a){this._fieldDBtype||(this._fieldDBtype="HotKey"),this.debug("Constructing HotKey",a),d.apply(this,arguments)};e.prototype=Object.create(d.prototype,{constructor:{value:e},defaults:{value:{firstKey:"",secondKey:"",functiontocall:function(){},description:""}},keySequence:{get:function(){var a=this.firstKey+"+"+this.secondKey;return this.debug("Getting keySequence "+a),a}}}),c.HotKey=e},{"./../FieldDBObject":4}],38:[function(a,b,c){var d=a("./../Collection").Collection,e=a("./HotKey").HotKey,f=function(a){this._fieldDBtype||(this._fieldDBtype="HotKeys"),a&&""===a.firstkey&&""===a.secondKey&&""===a.description&&(a=null,this.debug("Upgrading pre v2 hotkeys")),this.debug("Constructing HotKeys ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"keySequence"},INTERNAL_MODELS:{value:{item:e}}}),c.HotKeys=f},{"./../Collection":2,"./HotKey":37}],39:[function(a,b,c){var d=a("./../audio_video/AudioVideo").AudioVideo,e=function(a){this._fieldDBtype||(this._fieldDBtype="Image"),this.debug("Constructing Image length: ",a),d.apply(this,arguments)};e.prototype=Object.create(d.prototype,{constructor:{value:e},api:{value:"images"}}),c.Image=e},{"./../audio_video/AudioVideo":10}],40:[function(a,b,c){var d=a("./../Collection").Collection,e=a("./Image").Image,f=function(a){this._fieldDBtype||(this._fieldDBtype="Images"),this.debug("Constructing Images length: ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"URL"},INTERNAL_MODELS:{value:{item:e}}}),c.Images=f},{"./../Collection":2,"./Image":39}],41:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=a("./../Collection").Collection,f=a("./../Collection").Collection,g=a("./../CORS").CORS,h=a("./../corpus/Corpus").Corpus,i=a("./../FieldDBObject").FieldDBObject,j=a("./../user/Participant").Participant,k=a("./../datum/Datum").Datum,l=a("./../datum/DatumField").DatumField,m=a("./../datum/DatumFields").DatumFields,i=a("./../data_list/DataList").DataList,n=a("./../FieldDBObject").FieldDBObject,o=a("./../FieldDBObject").FieldDBObject,p=a("textgrid").TextGrid,q=a("q"),r=a("underscore"),s=function(a){for(var b={},c=[],d=0,e=a.length;e>d;++d)b.hasOwnProperty(a[d])||a[d]&&(c.push(a[d]),b[a[d]]=1);return c},t=function(a){this._fieldDBtype||(this._fieldDBtype="Import"),this.debug(" new import ",a),n.apply(this,arguments)};t.prototype=Object.create(n.prototype,{constructor:{value:t},fillWithDefaults:{value:function(){this.datumFields||(this.datumFields=this.corpus.datumFields.clone())}},defaults:{value:{status:"",fileDetails:"",pouchname:"",datumArray:[],files:[]}},INTERNAL_MODELS:{value:{datalist:i,datumFields:m,session:o,corpus:h}},showImportSecondStep:{get:function(){return this.asCSV&&this.asCSV.length>0}},showImportThirdStep:{get:function(){return this.datalist&&this.datalist.docs&&this.datalist.docs.length>0}},addFileUri:{value:function(a){var b=q.defer(),c=this;if(!a)throw"Options must be specified {}";if(!a.uri)throw"Uri must be specified in the options in order to import it"+JSON.stringify(a);return q.nextTick(function(){c.readUri(a).then(c.preprocess).then(c.import).then(function(d){c.debug("Import is finished"),a&&"function"==typeof a.next&&a.next(),c.documentCollection.add(d.datum),b.resolve(d)}).fail(function(a){b.reject(a)})}),b.promise}},readUri:{value:function(a){var b=q.defer(),c=this;return q.nextTick(function(){if(!a)throw"Options must be specified {}";var d=function(a){a.readOptions?a.readOptions.readFileFunction(function(c,d){c?b.reject(c):(a.rawText=d,b.resolve(a))}):(c.debug("TODO reading url in browser"),g.makeCORSRequest({type:"GET",dataType:"json",uri:a.uri}).then(function(d){c.debug(d),a.rawText=d,b.resolve(a)},function(a){c.debug(a),b.reject(a)}))};c.corpus.find(a.uri).then(function(b){1===b.length?(a.datum=b[0],d(a)):c.corpus.newDatum().then(function(b){a.datum=b,d(a)})}).fail(function(a){b.reject(a)})}),b.promise}},convertTableIntoDataList:{value:function(){var a=this,b=q.defer();return q.nextTick(function(){a.progress||(a.progress={total:0,completed:0}),a.progress.total=a.progress.total+1,a.datumArray=[],a.consultants=[],a.datalist=new i({title:"Import Data",docs:[]});var c=" typing/copy paste into text area",d="This is the data list which results from the import of the text typed/pasted in the import text area.";try{c=a.files.map(function(a){return a.name}).join(", "),d="This is the data list which results from the import of these file(s). "+a.fileDetails}catch(e){}a.render(),void 0!==a.session&&(a.session.setConsultants(a.consultants),a.session.goal=a.metadataLines.join("\n")+"\n"+a.session.goal,a.render("session")),a.datalist.description=d;var g=[];a.importFields=new m("participants"===a.importType?a.corpus.participantFields.clone():a.corpus.datumFields.clone()),a.extractedHeader.map(function(b){var c=a.importFields.find(a.importFields.primaryKey,b,!0);if(!c||0===c.length){c=[new l(l.prototype.defaults)],c[0].id=b,"participants"===a.importType?c[0].labelExperimenters=b:c[0].labelFieldLinguists=b,c[0].help="This field came from file import";var d=a.importFields.find(c[0].id);d.length}return a.debug("correspondingDatumField ",c),g.indexOf(c)>=0&&a.bug("You seem to have some column labels that are duplicated (the same label on two columns). This will result in a strange import where only the second of the two will be used in the import. Is self really what you want?."),g.push(c[0]),b});var h;for(var n in g)""===g[n].id||void 0===g[n].id||(g[n].id.toLowerCase().indexOf("checkedwith")>-1||g[n].id.toLowerCase().indexOf("checkedby")>-1||g[n].id.toLowerCase().indexOf("publishedin")>-1?(h=a.importFields.find("validationStatus"),h.length>0&&(a.debug("This header matches an existing corpus field. ",h),h[0].labelFieldLinguists=g[n].labelFieldLinguists,h[0].labelExperimenters=g[n].labelExperimenters,g[n]=h[0])):g[n].id.toLowerCase().indexOf("codepermanent")>-1?(h=a.importFields.find("anonymouscode"),h.length>0&&(a.debug("This header matches an existing corpus field. ",h),h[0].labelFieldLinguists=g[n].labelFieldLinguists,h[0].labelExperimenters=g[n].labelExperimenters,g[n]=h[0])):g[n].id.toLowerCase().indexOf("nsection")>-1?(h=a.importFields.find("courseNumber"),h.length>0&&(a.debug("This header matches an existing corpus field. ",h),h[0].labelFieldLinguists=g[n].labelFieldLinguists,h[0].labelExperimenters=g[n].labelExperimenters,g[n]=h[0])):g[n].id.toLowerCase().indexOf("prenom")>-1?(h=a.importFields.find("firstname"),h.length>0&&(a.debug("This header matches an existing corpus field. ",h),h[0].labelFieldLinguists=g[n].labelFieldLinguists,h[0].labelExperimenters=g[n].labelExperimenters,g[n]=h[0])):g[n].id.toLowerCase().indexOf("nomdefamille")>-1?(h=a.importFields.find("lastname"),h.length>0&&(a.debug("This header matches an existing corpus field. ",h),h[0].labelFieldLinguists=g[n].labelFieldLinguists,h[0].labelExperimenters=g[n].labelExperimenters,g[n]=h[0])):g[n].id.toLowerCase().indexOf("datedenaissance")>-1&&(h=a.importFields.find("dateofbirth"),h.length>0&&(a.debug("This header matches an existing corpus field. ",h),h[0].labelFieldLinguists=g[n].labelFieldLinguists,h[0].labelExperimenters=g[n].labelExperimenters,g[n]=h[0])));a.documentCollection=new f({primaryKey:"dateCreated"}),a.asCSV.map(function(b){var c;c="participants"===a.importType?new j({confidential:a.corpus.confidential,fields:new m(JSON.parse(JSON.stringify(g)))}):new k({datumFields:new m(JSON.parse(JSON.stringify(g)))});for(var d="",e=0;e<b.length;e++){var f=b[e];"participants"===a.importType?c.fields[g[e].id].value=f.trim():c.datumFields[g[e].id].value=f.trim(),a.debug("new doc",c),d+=f.trim()}d.replace(/[ \t\n]/g,"").length>=2?a.documentCollection.add(c):a.debugMode&&a.debug("Didn't add a blank row:"+d+": ")});var o=[];a.documentCollection._collection.map(function(b){if("participants"===a.importType){b.id=b.anonymousCode||Date.now(),b.url="https://corpusdev.lingsync.org/"+a.corpus.dbname,a.debug(" saving",b.id),a.progress.total++,a.datalist.docs.add(b);var c=b.save();c.then(function(b){a.debug(b),a.progress.completed++},function(b){a.debug(b),a.progress.completed++}),o.push(c)}}),q.allSettled(o).then(function(c){a.debug(c),b.resolve(c),a.progress.completed++},function(c){a.debug(c),b.resolve(c),a.progress.completed++}),a.discoveredHeaders=g}),b.promise}},preprocess:{value:function(a){var b=q.defer(),c=this;return this.verbose("In the preprocess",this),q.nextTick(function(){c.debug("Preprocessing  ");try{var d=function(c){a&&"function"==typeof a.next&&a.next(),b.reject(c)},e=function(a){c.debug("Preprocesing success"),a&&"function"==typeof a.next&&a.next(),b.resolve(a)};if(a.datum.datumFields.orthography.value=a.rawText,a.datum.datumFields.utterance.value=a.rawText,a.datum.id=a.uri,c.debug("running write for preprocessed"),a.preprocessOptions&&a.preprocessOptions.writePreprocessedFileFunction){a.preprocessedUrl=a.uri.substring(0,a.uri.lastIndexOf("."))+"_preprocessed.json";var f=JSON.stringify(a.datum.toJSON(),null,2);b.resolve(a),a.preprocessOptions.writePreprocessedFileFunction(a.preprocessedUrl,f,function(b,f){c.debug("Wrote "+a.preprocessedUrl,f),b?d(b):e(a)})}else e(a)}catch(g){b.reject(g)}}),b.promise}},"import":{value:function(a){var b=q.defer();return this.todo("TODO in the import"),q.nextTick(function(){a&&"function"==typeof a.next&&a.next(),b.resolve(a)}),b.promise}},datalist:{get:function(){return this._datalist||n.DEFAULT_OBJECT},set:function(a){a!==this._datalist&&(this._datalist=a)}},documentCollection:{get:function(){return this.debug("Getting Datum collection"),this._documentCollection||(this._documentCollection=new f({inverted:!1,key:"_id"})),this.debug("Returning a collection"),this._documentCollection},set:function(a){a!==this._documentCollection&&(this._documentCollection=a)}},pause:{value:function(a){return a&&"function"==typeof a.next&&a.next(),this}},resume:{value:function(a){return a&&"function"==typeof a.next&&a.next(),this}},id:{get:function(){return this.datalist.id},set:function(a){return this.datalist.id=a}},url:{value:"/datalists"},corpus:{get:function(){return this._corpus?this._corpus:void 0},set:function(a){a!==this._corpus&&(this._corpus=a)}},importCSV:{value:function(a,b){if(a){var c=a.split("\n");c.length<3&&(c=a.split("\r"),this.status=this.status+" Detected a \r line ending.");var d=c[0],e=!1;c[0].split("","").length>2&&c[5].split("","").length>2&&(e=!0,this.status=this.status+" Detected text was already surrounded in quotes.");for(var f in c)c[f]=e?c[f].trim().replace(/^"/,"").replace(/"$/,"").split("",""):this.parseLineCSV(c[f]);var g=[];c.length>3&&(d=d,g=e?d.trim().replace(/^"/,"").replace(/"$/,"").split("",""):this.parseLineCSV(d)),this.extractedHeader=g,this.asCSV=c,"function"==typeof b&&b()}}},parseLineCSV:{value:function(a){var b=[];a=a.replace(/,/g," ,"),a=a.split(/,/g);var c,d;for(c=0;c<a.length;c++)a[c]=a[c].replace(/\s*$/g,"");a[a.length-1]=a[a.length-1].replace(/^\s*|\s*$/g,"");var e=-1;for(c=0;c<a.length;c++){if(a[c].match(/"$/)&&e>=0){for(d=e+1;c>=d;d++)a[e]=a[e]+","+a[d],a[d]="-DELETED-";e=-1}e=a[c].match(/^"/)?c:e}for(d=0,c=0;c<a.length;c++)"-DELETED-"!==a[c]&&(b[d]=a[c],b[d]=b[d].replace(/^\s*|\s*$/g,""),b[d]=b[d].replace(/^"|"$/g,""),b[d]=b[d].replace(/""/g,'"'),d++);return b}},importXML:{value:function(){throw"The app thinks this might be a XML file, but we haven't implemented this kind of import yet. You can vote for it in our bug tracker."}},importElanXML:{value:function(a,b){if(a){return void this.todo("import xml parsers to turn xml import back on")}}},importTabbed:{value:function(a,b){if(a){var c,d=a.split("\n");d.length<3&&(d=a.split("\r"),this.status=this.status+" Detected a \n line ending.");for(c in d)d[c]=d[c].split("	");this.asCSV=d,"function"==typeof b&&b()}}},metadataLines:[],importToolbox:{value:function(a,b){if(a){var c=a.split("\n"),d=!1;c.length<3&&(c=a.split("\r"),d=!0,this.status=this.status+" Detected a \r line ending.");for(var e=[],f=-1,g=[],h="",i="";!i&&c.length>0;){var j=c[0].match(/^\\[a-zA-Z]+\b/);j&&j.length>0?i=j[0]:this.metadataLines.push(c.shift())}for(var k in c)if(0===c[k].indexOf(i))f+=1,e[f]={},e[f][i.replace(/\\/g,"")]=c[k].replace(i,"").trim(),g.push(i.replace(/\\/g,""));else if(f>=0)if(c[k].match(/^\\/)){var l=c[k].split(/ +/);h=l[0].replace("\\",""),e[f][h]=c[k].replace(l[0],""),g.push(h)}else""!==c[1].trim()&&(e[f][h]+=c[k]);g=s(g);var m=[];for(var n in e){var o=[];for(var p in g){var q=e[n][g[p]];o.push(q?q:"")}m.push(o)}m===[]&&m.push(""),this.extractedHeader=g,this.asCSV=m,"function"==typeof b&&b()}}},downloadTextGrid:{value:function(a){var b=this,c=OPrime.audioUrl+"/"+this.pouchname+"/"+a.fileBaseName+".TextGrid";$.ajax({url:c,type:"get",success:function(c){if(c){a.textgrid=c;var d="unknown";a.syllablesAndUtterances&&a.syllablesAndUtterances.syllableCount&&(d=a.syllablesAndUtterances.syllableCount);var e="unknown";a.syllablesAndUtterances&&a.syllablesAndUtterances.pauseCount&&(e=parseInt(a.syllablesAndUtterances.pauseCount,10));var f=1;e>0&&(f=e+2);var g=" Downloaded Praat TextGrid which contained a count of roughly "+d+" syllables and auto detected utterances for "+a.fileBaseName+" The utterances were not automatically transcribed for you, you can either save the textgrid and transcribe them using Praat, or continue to import them and transcribe them after.";a.description=g,b.status=b.status+"<br/>"+g,b.fileDetails=b.status+g,window.appView.toastUser(g,"alert-info","Import:"),b.rawText=b.rawText.trim()+"\n\n\nFile name = "+a.fileBaseName+".mp3\n"+c,b.importTextGrid(b.rawText,null)}else b.debug(c),a.textgrid="Error result was empty. "+c},error:function(c){var d={};if(c&&c.responseJSON)d=c.responseJSON;else{var e="Error contacting the server. ";e+=c.status>=500?" Please report this error to us at support@lingsync.org ":" Are you offline? If you are online and you still recieve this error, please report it to us: ",d={status:c.status,userFriendlyErrors:[e+c.status]}}b.debug(d),d&&d.userFriendlyErrors&&(b.status=a.fileBaseName+"import error: "+d.userFriendlyErrors.join(" "),window.appView.toastUser(d.userFriendlyErrors.join(" "),"alert-danger","Import:"))}})}},addAudioVideoFile:{value:function(a){this.audioVideo||(this.audioVideo=new e),this.audioVideo.add(new d({filename:a.substring(a.lastIndexOf("/")+1),URL:a,description:"File from import"}))}},importTextGrid:{value:function(a,b){if(a){var c=p.textgridToIGT(a),d="copypastedtextgrid_unknownaudio";this.files&&this.files[0]&&this.files[0].name&&(d=this.files[0].name),d=d.replace(/\.textgrid/i,""),c&&c.intervalsByXmin||"function"==typeof b&&b();var e,f,g,h,i,j=[],k=[],l=[];if(c.isIGTNestedOrAlignedOrBySpeaker.probablyAligned){for(f in c.intervalsByXmin)if(c.intervalsByXmin.hasOwnProperty(f)&&c.intervalsByXmin[f]){for(h={},g=0;g<c.intervalsByXmin[f].length;g++)i=c.intervalsByXmin[f][g],h.startTime=h.startTime?h.startTime:i.xmin,h.endTime=h.endTime?h.endTime:i.xmax,h.utterance=h.utterance?h.utterance:i.text.trim(),h.modality="spoken",h.tier=i.tierName,h.speakers=i.speaker,h.audioFileName=i.fileName||d,h.CheckedWithConsultant=i.speaker,l.push(h.speakers),h[i.tierName]=i.text,k.push(i.tierName);j.push(h)}}else for(f in c.intervalsByXmin)if(c.intervalsByXmin.hasOwnProperty(f)&&c.intervalsByXmin[f])for(g=0;g<c.intervalsByXmin[f].length;g++)h={},i=c.intervalsByXmin[f][g],h.startTime=h.startTime?h.startTime:i.xmin,h.endTime=h.endTime?h.endTime:i.xmax,h.utterance=h.utterance?h.utterance:i.text.trim(),h.modality="spoken",h.tier=i.tierName,h.speakers=i.speaker,h.audioFileName=i.fileName||d,h.CheckedWithConsultant=i.speaker,l.push(h.speakers),h[i.tierName]=i.text,k.push(i.tierName),j.push(h);k=s(k),l=s(l),this.consultants=l.length>0?l.join(","):"Unknown",k=k.concat(["utterance","tier","speakers","CheckedWithConsultant","startTime","endTime","modality","audioFileName"]);var m=[];for(var n in j){var o=[];for(e in k){var q=j[n][k[e]];o.push(q?q:"")}o.length>=8&&o.slice(0,o.length-8).join("").replace(/[0-9.]/g,"").length>0&&"silent"!==o[o.length-8]?m.push(o):this.debug("This row has only the default columns, not text or anything interesting.",o)}m===[]&&m.push(""),this.extractedHeader=k,this.asCSV=m,"function"==typeof b&&b()}}},importLatex:{value:function(){throw"The app thinks this might be a LaTeX file, but we haven't implemented this kind of import yet. You can vote for it in our bug tracker."
}},importTextIGT:{value:function(a,b){if(a){var c,d=a.split(/\n\n+/),e=!1;if(d.length<3){var f=a.split("\r\r");f.length>d.length&&(this.status=this.status+" Detected a MAC line ending.",e=!0,d=f)}for(c in d)d[c]=d[c].replace(/  +/g," ").split(e?"\r":"\n");this.asCSV=d,this.extractedHeader=d[0],"function"==typeof b&&b()}}},importRawText:{value:function(a){this.ignoreLineBreaksInRawText&&a.replace(/\n+/g," ").replace(/\r+/g," "),this.documentCollection.add({id:"orthography",value:a}),this.debug("added a datum to the collection")}},readFiles:{value:function(a){var b=q.defer(),c=this,d=[];return a=a||{},this.progress={total:0,completed:0},q.nextTick(function(){var e=[],f=c.files;c.progress.total=f.length;for(var g,h=0;g=f[h];h++){var i=[escape(g.name),g.type||"n/a","-",g.size,"bytes, last modified:",g.lastModifiedDate?g.lastModifiedDate.toLocaleDateString():"n/a"].join(" ");c.status=c.status+"; "+i,e.push(JSON.parse(JSON.stringify(g))),d.push(a.readOptions?a.readOptions.readFileFunction.apply(c,[{file:g.name,start:a.start,stop:a.stop}]):c.readFileIntoRawText({file:g,start:a.start,stop:a.stop}))}c.fileDetails=e,q.allSettled(d).then(function(a){b.resolve(a.map(function(a){return c.progress.completed+=1,a.value}))},function(a){c.error="Error processing files",b.reject(a)}).catch(function(b){c.warn("There was an error when importing these options ",b,a)})}),b.promise}},readFileIntoRawText:{value:function(a){var b=q.defer(),c=this;return this.debug("readFileIntoRawText",a),q.nextTick(function(){if(!a)return a={error:"Options must be defined for readFileIntoRawText"},void b.reject(a);if(!a.file)return a.error="Options: file must be defined for readFileIntoRawText",void b.reject(a);a.start=a.start?parseInt(a.start,10):0,a.stop=a.stop?parseInt(a.stop,10):a.file.size-1;var d=new FileReader;d.onloadend=function(d){d.target.readyState===FileReader.DONE&&(a.rawText=d.target.result,c.rawText=c.rawText+a.rawText,b.resolve(a))};var e="";a.file.slice?e=a.file.slice(a.start,a.stop+1):a.file.mozSlice?e=a.file.mozSlice(a.start,a.stop+1):a.file.webkitSlice&&(e=a.file.webkitSlice(a.start,a.stop+1)),d.readAsText(e)}),b.promise}},guessFormatAndPreviewImport:{value:function(a){a||(a=0);var b={handout:{confidence:0,id:"handout",importFunction:this.importTextIGT},csv:{confidence:0,id:"csv",importFunction:this.importCSV},tabbed:{confidence:0,id:"tabbed",importFunction:this.importTabbed},xml:{confidence:0,id:"xml",importFunction:this.importXML},toolbox:{confidence:0,id:"toolbox",importFunction:this.importToolbox},elanXML:{confidence:0,id:"elanXML",importFunction:this.importElanXML},praatTextgrid:{confidence:0,id:"praatTextgrid",importFunction:this.importTextGrid},latex:{confidence:0,id:"latex",importFunction:this.importLatex}};if(this.files&&this.files[a]){var c=this.files[a].name.split(".").pop().toLowerCase();"csv"===c?b.csv.confidence++:"txt"===c?this.rawText.split("	").length>20?b.tabbed.confidence++:b.handout.confidence++:"eaf"===c?b.elanXML.confidence++:"xml"===c?b.xml.confidence++:"sf"===c?b.toolbox.confidence++:"tex"===c?b.latex.confidence++:"textgrid"===c?b.praatTextgrid.confidence++:"mov"===c?b.praatTextgrid.confidence++:"wav"===c?b.praatTextgrid.confidence++:"mp3"===c&&b.praatTextgrid.confidence++}else if(this.rawText&&this.rawText.length){var d=this.rawText.length;this.rawText.indexOf("\\gll")>-1||this.rawText.indexOf("\\begin{")>-1||this.rawText.indexOf("\\ex")>-1?b.latex.confidence=100:this.rawText.indexOf("mpi.nl/tools/elan/EAF")>-1?b.elanXML.confidence=100:this.rawText.indexOf("<?xml")>-1?b.xml.confidence=100:(b.csv.confidence=this.rawText.split(",").length/d,b.tabbed.confidence=this.rawText.split("	").length/d,b.handout.confidence=this.rawText.split(/\n\n+/).length/d,b.toolbox.confidence=this.rawText.split(/\n\\/).length/d,b.praatTextgrid.confidence=this.rawText.split("intervals").length/d)}this.importTypeConfidenceMeasures=b;var e=r.max(b,function(a){return a.confidence});this.importTypeConfidenceMeasures.mostLikely=e,this.status="",e.importFunction.apply(this,[this.rawText,null])}},readBlob:{value:function(a,b,c,d){this.warn("Read blob is deprecated",a,b,c,d)}}}),c.Import=t},{"./../CORS":1,"./../Collection":2,"./../FieldDBObject":4,"./../corpus/Corpus":16,"./../data_list/DataList":22,"./../datum/Datum":24,"./../datum/DatumField":25,"./../datum/DatumFields":26,"./../user/Participant":52,q:76,textgrid:77,underscore:78}],42:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=a("q"),f=function h(a){if(this.debug("Constructing ContextualizableObject ",a),a&&"string"==typeof a){if(!h.updateAllToContextualizableObjects)return console.warn("ContextualizableObject: should not converting this deprecated string in to a ContextualizableObject "+a),String.apply(this,arguments),void console.warn("string should not be an object: "+this);var b="locale_"+a.replace(/[^a-zA-Z0-9-]/g,"_"),c=a;a={"default":b},this.originalString=c,this.data=this.data||{},this.data[b]={message:c},this.add(b,c)}for(var d in a)a.hasOwnProperty(d)&&"contextualizer"!==d&&this.add(d,a[d]);Object.apply(this,arguments)},g=!1;f.updateAllToContextualizableObjects=!1,f.prototype=Object.create(Object.prototype,{constructor:{value:f},fieldDBtype:{value:"ContextualizableObject"},contextualizer:{get:function(){return d.prototype.contextualizer}},debug:{value:function(a,b,c,e){return d.application&&d.application.contextualizer?d.application.contextualizer.debug:void(g&&(console.log(this.fieldDBtype.toUpperCase()+"-DEBUG FORCED: "+a),b&&console.log(b),c&&console.log(c),e&&console.log(e)))}},todo:{value:function(){return d.prototype.todo.apply(this,arguments)}},contextualize:{value:function(a){this.debug("requesting contextualization of "+a);var b;return this.contextualizer&&(b=this.contextualizer.contextualize(a)),b&&b!==a||(b=this.data&&this.data[a]?this.data[a].message:a),this.debug("::"+b+"::"),b}},updateContextualization:{value:function(a,b){this.debug("updateContextualization"+a);var c,d=this;return this.contextualizer&&(this.debug(this.contextualizer.data),c=this.contextualizer.updateContextualization(a,b),c!==!0&&(d.todo("Test async updatePromiseOrSyncrhonousConfirmed"),e.nextTick(function(){var c=d.contextualizer.contextualize(a);c&&c!==a||!d.data||(d.data[a]=d.data[a]||{message:""},d.data[a].message=b)}))),this._default===a&&(this.originalString=b),c}},add:{value:function(a,b){var c="_"+a;this[c]=b,this.__defineGetter__(a,function(){return this.debug("overidding getter"),this.contextualize(this[c])}),this.__defineSetter__(a,function(a){this.debug("overidding setter "+c,a),this.updateContextualization(this[c],a)}),this.debug("adding string to ContextualizableObject's own data "+a),this.data=this.data||{},this.data[a]={message:b},(0===a.indexOf("locale_")||0===a.indexOf("localized_"))&&(this.debug("intializing the data in this ContextualizableObject"),this.debug(" for_context "+a),this.debug(" locale_string "+b),this.contextualizer&&(this.debug(" adding to contextualizer: "+a+" as "+b),this.contextualizer.updateContextualization(a,b),this.debug("added to contextualizer "+this.contextualizer.contextualize(a)))),this.debug("data",this.data)}},toJSON:{value:function(a,b){var c,d,e={};if(f.updateAllToContextualizableObjects&&this.originalString)return this.originalString;for(c in this)this.hasOwnProperty(c)&&"function"!=typeof this[c]&&"contextualizer"!==c&&0===c.indexOf("_")&&(d=c.replace(/^_/,""),(!b||b&&!this.isEmpty(c))&&(e[d]=this[c]&&"function"==typeof this[c].toJSON?this[c].toJSON(a,b):this[c]));if(a&&this.INTERNAL_MODELS)for(c in this.INTERNAL_MODELS)!e[c]&&this.INTERNAL_MODELS&&(e[c]=this.INTERNAL_MODELS[c]&&"function"==typeof this.INTERNAL_MODELS[c]&&"function"==typeof(new this.INTERNAL_MODELS[c]).toJSON?(new this.INTERNAL_MODELS[c]).toJSON(a,b):this.INTERNAL_MODELS[c]);return e.default&&this.originalString&&(e[e.default]=this.originalString,delete e.originalString),e}}}),c.ContextualizableObject=f},{"./../FieldDBObject":4,q:76}],43:[function(a,b,c){var d="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e=a("./../FieldDBObject").FieldDBObject,f=a("./ELanguages").ELanguages,g=a("./../CORS").CORS,h=a("q"),i=a("./en/messages.json"),j=a("./es/messages.json"),k=a("./elanguages.json"),l=function(a){this._fieldDBtype||(this._fieldDBtype="Contextualizer"),this.debug("Constructing Contextualizer ",a);var b=arguments;return a||(a={},b=[a]),a.defaultLocale&&a.defaultLocale.iso||(a.defaultLocale={iso:"en"}),a.currentContext||(a.currentContext="default"),a.elanguages||(a.elanguages=k),e.apply(this,b),a&&void 0!==a.alwaysConfirmOkay||(this.warn("By default it will be okay for users to modify global locale strings. IF they are saved this will affect other users."),this.alwaysConfirmOkay=!0),this};l.prototype=Object.create(e.prototype,{constructor:{value:l},INTERNAL_MODELS:{value:{elanguages:f}},_require:{value:"undefined"!=typeof d?d.require:"undefined"!=typeof window?window.require:null},data:{get:function(){return this._data},set:function(a){this._data=a}},currentLocale:{get:function(){return this._currentLocale?this._currentLocale:this._mostAvailableLanguage?this._mostAvailableLanguage:this.defaultLocale},set:function(a){a!==this._currentLocale&&(a&&a.toLowerCase&&"string"==typeof a&&(a=a.toLowerCase().replace(/[^a-z-]/g,""),a=this.elanguages&&this.elanguages[a]?this.elanguages[a]:{iso:a}),this.warn("SETTING LOCALE FROM "+this._currentLocale+" to "+a,this.data),this._currentLocale=a)}},availableLanguages:{get:function(){if(this.data=this.data||{},this._availableLanguages&&this.data[this._availableLanguages._collection[0].iso]&&this._availableLanguages._collection[0].length===this.data[this._availableLanguages._collection[0].iso].length)return this._availableLanguages;var a=new f,b=0;for(var c in this.data)this.data.hasOwnProperty(c)&&(this.elanguages[c].length=this.data[c].length,this.elanguages[c].length>b?(a.unshift(this.elanguages[c]),b=this.elanguages[c].length):a.push(this.elanguages[c]));return 0===b||0===a.length?(this.todo("Ensuring that at least english is an available language, not sure if this is a good idea."),a.unshift(this.elanguages.en)):a._collection.map(function(a){return a.percentageOfAvailability=Math.round(a.length/b*100),a}),this.todo("test whether setting the currentLocale to the most complete locale has adverse affects."),this._mostAvailableLanguage=a._collection[0],this._availableLanguages=a,a}},defaults:{get:function(){return{en:JSON.parse(JSON.stringify(i)),es:JSON.parse(JSON.stringify(j))}}},loadDefaults:{value:function(){return this.defaults.en?this.addMessagesToContextualizedStrings("en",this.defaults.en):this.debug("English Locales did not load."),this.defaults.es?this.addMessagesToContextualizedStrings("es",this.defaults.es):this.debug("English Locales did not load."),this}},localize:{value:function(a,b){return this.contextualize(a,b)}},contextualize:{value:function(a,b){b||(b=this.currentLocale.iso),b&&b.iso&&(b=b.iso),this.debug("Resolving localization in "+b);var c,d=a;if("object"==typeof a){var f=!1;for(c in a)if(a.hasOwnProperty(c)&&(c.indexOf(this.currentContext)>-1||("child"===this.currentContext||"game"===this.currentContext)&&c.indexOf("gamified")>-1)){d=a[c],f=!0,this.debug("Using "+c+" for this contxtualization.");break}!f&&a.default&&(this.debug("Using default for this contxtualization. ",a),d=a.default)}if(!this.data)return this.warn("No localizations available, resolving the key itself: ",d),d;var g=!0;return this.data[b]&&this.data[b][d]&&void 0!==this.data[b][d].message&&this.data[b][d].message?(d=this.data[b][d].message,this.debug("Resolving localization using requested language: ",d),g=!1):("object"==typeof a&&a.default&&(this.data[b]&&this.data[b][a.default]&&void 0!==this.data[b][a.default].message&&this.data[b][a.default].message?(d=this.data[b][a.default].message,this.warn("Resolving localization using default contextualization: ",a.default),g=!1):this.data[this.defaultLocale.iso]&&this.data[this.defaultLocale.iso][a.default]&&void 0!==this.data[this.defaultLocale.iso][a.default].message&&this.data[this.defaultLocale.iso][a.default].message&&(d=this.data[this.defaultLocale.iso][a.default].message,this.warn("Resolving localization using default contextualization and default locale: ",a.default),g=!1)),g&&this.data[this.defaultLocale.iso]&&this.data[this.defaultLocale.iso][d]&&void 0!==this.data[this.defaultLocale.iso][d].message&&this.data[this.defaultLocale.iso][d].message&&(d=this.data[this.defaultLocale.iso][d].message,this.warn("Resolving localization using default: ",d))),g&&!this.requestedCorpusSpecificLocalizations&&e&&e.application&&e.application.corpus&&e.application.corpus.loaded&&(e.application.corpus.getCorpusSpecificLocalizations(),this.requestedCorpusSpecificLocalizations=!0),d}},updateContextualization:{value:function(a,b){if(this.data[this.currentLocale.iso]=this.data[this.currentLocale.iso]||{},this.data[this.currentLocale.iso][a]&&this.data[this.currentLocale.iso][a].message===b)return b;var c="",d="create ";this.data[this.currentLocale.iso][a]&&(c=this.data[this.currentLocale.iso][a].message,d="update ");var e=this;if(this.testingAsyncConfirm||!this.alwaysConfirmOkay)return this.todo("Test async updateContextualization"),this.confirm("Do you also want to "+d+a+" for other users? \n"+c+" -> "+b).then(function(){e.data[e.currentLocale.iso][a]=e.data[e.currentLocale.iso][a]||{},e.data[e.currentLocale.iso][a].message=b;var c={};c[a]={message:b},e.addMessagesToContextualizedStrings(e.currentLocale.iso,c)},function(){e.debug("Not updating ")});this.data[this.currentLocale.iso][a]=this.data[this.currentLocale.iso][a]||{},this.data[this.currentLocale.iso][a].message=b;var f={};f[a]={message:b},this.addMessagesToContextualizedStrings(this.currentLocale.iso,f)}},audio:{value:function(a){this.debug("Resolving localization in "+this.currentLocale.iso);var b={};return this.data?(this.data[this.currentLocale.iso]&&this.data[this.currentLocale.iso][a]&&void 0!==this.data[this.currentLocale.iso][a].audio&&this.data[this.currentLocale.iso][a].audio?(b=this.data[this.currentLocale.iso][a].audio,this.debug("Resolving localization audio using requested language: ",b)):this.data[this.defaultLocale.iso]&&this.data[this.defaultLocale.iso][a]&&void 0!==this.data[this.defaultLocale.iso][a].audio&&this.data[this.defaultLocale.iso][a].audio&&(b=this.data[this.defaultLocale.iso][a].audio,this.warn("Resolving localization audio using default: ",b)),b):(this.warn("No localizations available, resolving empty audio details"),b)}},addUrls:{value:function(a,b){var c,d=[];for(c=0;c<a.length;c++)d.push(this.addUrl(a[c],b));return h.all(d)}},addUrl:{value:function(a,b){var c,d=h.defer(),f=this;return!b&&e&&e.application&&e.application.corpus&&e.application.corpus.url&&(this.debug("using corpus as base url"),b=e.application.corpus.url),a.indexOf(!1)?(c=a.replace("/messages.json",""),c.indexOf("/")>-1&&(c=c.substring(c.lastIndexOf("/"))),c=c.replace(/[^a-zA-Z-]/g,"").toLowerCase(),(!c||c.length<2)&&(c="default")):c="en",g.makeCORSRequest({method:"GET",url:b+"/"+a,dataType:"json"}).then(function(b){f.originalDocs=f.originalDocs||[],f.originalDocs.push(a),f.addMessagesToContextualizedStrings(c,b).then(d.resolve,d.reject)},function(a){f.warn("There werent any locales at this url"+b+" :( Maybe this database has no custom locale messages.",a)}),d.promise}},addMessagesToContextualizedStrings:{value:function(a,b){var c=h.defer(),d=this;if(!b)return void c.reject("The locales data was empty!");!a&&b._id&&(a=b._id.replace("/messages.json",""),a.indexOf("/")>-1&&(a=a.substring(a.lastIndexOf("/"))),a=a.replace(/[^a-zA-Z-]/g,"").toLowerCase(),(!a||a.length<2)&&(a="default")),d.originalDocs=d.originalDocs||[],d.originalDocs.push(b),d.data=d.data||{};for(var e in b)b.hasOwnProperty(e)&&0!==e.indexOf("_")&&(d.data[a]=d.data[a]||{length:0},d.data[a][e]=b[e],d.data[a].length++);return c.resolve(d.data),c.promise}},save:{value:function(){var a=[];for(var b in this.data)if(this.data.hasOwnProperty(b)){this.debug("Requsting save of "+b);var c=new e(this.data[b]);this.debug(c),this.email?a.push(e.prototype.saveToGit.apply(c,[{email:this.email,message:"Updated locale messages"}])):(c.id=b+"/messages.json",a.push(e.prototype.save.apply(c)))}return h.allSettled(a)}}}),c.Contextualizer=l},{"./../CORS":1,"./../FieldDBObject":4,"./ELanguages":44,"./elanguages.json":45,"./en/messages.json":46,"./es/messages.json":47,q:76}],44:[function(a,b,c){var d=a("./../Collection").Collection,e=a("./../FieldDBObject").FieldDBObject,f=function(a){this._fieldDBtype||(this._fieldDBtype="ELanguages"),this.debug("Constructing ELanguages ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"iso"},INTERNAL_MODELS:{value:{item:e}},sanitizeStringForPrimaryKey:{value:function(a){return a}}}),c.ELanguages=f},{"./../Collection":2,"./../FieldDBObject":4}],45:[function(a,b){b.exports=[{iso:"Non applicable",name:"NA",nativeName:"Non applicable"},{iso:"ab",name:"Abkhaz",nativeName:""},{iso:"aa",name:"Afar",nativeName:"Afaraf"},{iso:"af",name:"Afrikaans",nativeName:"Afrikaans"},{iso:"ak",name:"Akan",nativeName:"Akan"},{iso:"sq",name:"Albanian",nativeName:"Shqip"},{iso:"am",name:"Amharic",nativeName:""},{iso:"ar",name:"Arabic",nativeName:""},{iso:"an",name:"Aragonese",nativeName:"Aragons"},{iso:"hy",name:"Armenian",nativeName:""},{iso:"as",name:"Assamese",nativeName:""},{iso:"av",name:"Avaric",nativeName:" ,  "},{iso:"ae",name:"Avestan",nativeName:"avesta"},{iso:"ay",name:"Aymara",nativeName:"aymar aru"},{iso:"az",name:"Azerbaijani",nativeName:"azrbaycan dili"},{iso:"bm",name:"Bambara",nativeName:"bamanankan"},{iso:"ba",name:"Bashkir",nativeName:" "},{iso:"eu",name:"Basque",nativeName:"euskara"},{iso:"be",name:"Belarusian",nativeName:""},{iso:"bn",name:"Bengali",nativeName:""},{iso:"bh",name:"Bihari",nativeName:""},{iso:"bi",name:"Bislama",nativeName:"Bislama"},{iso:"bs",name:"Bosnian",nativeName:"bosanski jezik"},{iso:"br",name:"Breton",nativeName:"brezhoneg"},{iso:"bg",name:"Bulgarian",nativeName:" "},{iso:"my",name:"Burmese",nativeName:""},{iso:"ca",name:"Catalan; Valencian",nativeName:"Catal"},{iso:"ch",name:"Chamorro",nativeName:"Chamoru"},{iso:"ce",name:"Chechen",nativeName:" "},{iso:"ny",name:"Chichewa; Chewa; Nyanja",nativeName:"chiChea, chinyanja"},{iso:"zh",name:"Chinese",nativeName:""},{iso:"cv",name:"Chuvash",nativeName:" "},{iso:"kw",name:"Cornish",nativeName:"Kernewek"},{iso:"co",name:"Corsican",nativeName:"corsu"},{iso:"cr",name:"Cree",nativeName:""},{iso:"hr",name:"Croatian",nativeName:"hrvatski"},{iso:"cs",name:"Czech",nativeName:"esky"},{iso:"da",name:"Danish",nativeName:"dansk"},{iso:"dv",name:"Divehi; Dhivehi; Maldivian;",nativeName:""},{iso:"nl",name:"Dutch",nativeName:"Nederlands, Vlaams"},{iso:"en",name:"English",nativeName:"English",selected:!0},{iso:"eo",name:"Esperanto",nativeName:"Esperanto"},{iso:"et",name:"Estonian",nativeName:"eesti"},{iso:"ee",name:"Ewe",nativeName:"Eegbe"},{iso:"fo",name:"Faroese",nativeName:"froyskt"},{iso:"fj",name:"Fijian",nativeName:"vosa Vakaviti"},{iso:"fi",name:"Finnish",nativeName:"suomi"},{iso:"fr",name:"French",nativeName:"franais"},{iso:"ff",name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},{iso:"gl",name:"Galician",nativeName:"Galego"},{iso:"ka",name:"Georgian",nativeName:""},{iso:"de",name:"German",nativeName:"Deutsch"},{iso:"el",name:"Greek, Modern",nativeName:""},{iso:"gn",name:"Guaran",nativeName:"Avae"},{iso:"gu",name:"Gujarati",nativeName:""},{iso:"ht",name:"Haitian; Haitian Creole",nativeName:"Kreyl ayisyen"},{iso:"ha",name:"Hausa",nativeName:"Hausa, "},{iso:"he",name:"Hebrew (modern)",nativeName:""},{iso:"hz",name:"Herero",nativeName:"Otjiherero"},{iso:"hi",name:"Hindi",nativeName:", "},{iso:"ho",name:"Hiri Motu",nativeName:"Hiri Motu"},{iso:"hu",name:"Hungarian",nativeName:"Magyar"},{iso:"ia",name:"Interlingua",nativeName:"Interlingua"},{iso:"id",name:"Indonesian",nativeName:"Bahasa Indonesia"},{iso:"ie",name:"Interlingue",nativeName:"Occidental"},{iso:"ga",name:"Irish",nativeName:"Gaeilge"},{iso:"ig",name:"Igbo",nativeName:"Ass Igbo"},{iso:"ik",name:"Inupiaq",nativeName:"Iupiaq, Iupiatun"},{iso:"io",name:"Ido",nativeName:"Ido"},{iso:"is",name:"Icelandic",nativeName:"slenska"},{iso:"it",name:"Italian",nativeName:"Italiano"},{iso:"iu",name:"Inuktitut",nativeName:""},{iso:"ja",name:"Japanese",nativeName:""},{iso:"jv",name:"Javanese",nativeName:"basa Jawa"},{iso:"kl",name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut"},{iso:"kn",name:"Kannada",nativeName:""},{iso:"kr",name:"Kanuri",nativeName:"Kanuri"},{iso:"ks",name:"Kashmiri",nativeName:", "},{iso:"kk",name:"Kazakh",nativeName:" "},{iso:"km",name:"Khmer",nativeName:""},{iso:"ki",name:"Kikuyu, Gikuyu",nativeName:"Gky"},{iso:"rw",name:"Kinyarwanda",nativeName:"Ikinyarwanda"},{iso:"ky",name:"Kirghiz, Kyrgyz",nativeName:" "},{iso:"kv",name:"Komi",nativeName:" "},{iso:"kg",name:"Kongo",nativeName:"KiKongo"},{iso:"ko",name:"Korean",nativeName:""},{iso:"ku",name:"Kurdish",nativeName:"Kurd, "},{iso:"kj",name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},{iso:"la",name:"Latin",nativeName:"latine"},{iso:"lb",name:"Luxembourgish, Letzeburgesch",nativeName:"Ltzebuergesch"},{iso:"lg",name:"Luganda",nativeName:"Luganda"},{iso:"li",name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},{iso:"ln",name:"Lingala",nativeName:"Lingla"},{iso:"lo",name:"Lao",nativeName:""},{iso:"lt",name:"Lithuanian",nativeName:"lietuvi kalba"},{iso:"lu",name:"Luba-Katanga",nativeName:""},{iso:"lv",name:"Latvian",nativeName:"latvieu valoda"},{iso:"gv",name:"Manx",nativeName:"Gaelg, Gailck"},{iso:"mk",name:"Macedonian",nativeName:" "},{iso:"mg",name:"Malagasy",nativeName:"Malagasy fiteny"},{iso:"ms",name:"Malay",nativeName:"bahasa Melayu"},{iso:"ml",name:"Malayalam",nativeName:""},{iso:"mt",name:"Maltese",nativeName:"Malti"},{iso:"mi",name:"Mori",nativeName:"te reo Mori"},{iso:"mr",name:"Marathi (Marh)",nativeName:""},{iso:"mh",name:"Marshallese",nativeName:"Kajin Maje"},{iso:"mn",name:"Mongolian",nativeName:""},{iso:"na",name:"Nauru",nativeName:"Ekakair Naoero"},{iso:"nv",name:"Navajo, Navaho",nativeName:"Din bizaad, Dinkeh"},{iso:"nb",name:"Norwegian Bokml",nativeName:"Norsk bokml"},{iso:"nd",name:"North Ndebele",nativeName:"isiNdebele"},{iso:"ne",name:"Nepali",nativeName:""},{iso:"ng",name:"Ndonga",nativeName:"Owambo"},{iso:"nn",name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},{iso:"no",name:"Norwegian",nativeName:"Norsk"},{iso:"ii",name:"Nuosu",nativeName:" Nuosuhxop"},{iso:"nr",name:"South Ndebele",nativeName:"isiNdebele"},{iso:"oc",name:"Occitan",nativeName:"Occitan"},{iso:"oj",name:"Ojibwe, Ojibwa",nativeName:""},{iso:"cu",name:"Old Church Slavonic",alternateNames:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",nativeName:" "},{iso:"om",name:"Oromo",nativeName:"Afaan Oromoo"},{iso:"or",name:"Oriya",nativeName:""},{iso:"os",name:"Ossetian, Ossetic",nativeName:" "},{iso:"pa",name:"Panjabi, Punjabi",nativeName:", "},{iso:"pi",name:"Pli",nativeName:""},{iso:"fa",name:"Persian",nativeName:""},{iso:"pl",name:"Polish",nativeName:"polski"},{iso:"ps",name:"Pashto, Pushto",nativeName:""},{iso:"pt",name:"Portuguese",nativeName:"Portugus"},{iso:"qu",name:"Quechua",nativeName:"Runa Simi, Kichwa"},{iso:"rm",name:"Romansh",nativeName:"rumantsch grischun"},{iso:"rn",name:"Kirundi",nativeName:"kiRundi"},{iso:"ro",name:"Romanian, Moldavian, Moldovan",nativeName:"romn"},{iso:"ru",name:"Russian",nativeName:" "},{iso:"sa",name:"Sanskrit (Saskta)",nativeName:""},{iso:"sc",name:"Sardinian",nativeName:"sardu"},{iso:"sd",name:"Sindhi",nativeName:",  "},{iso:"se",name:"Northern Sami",nativeName:"Davvismegiella"},{iso:"sm",name:"Samoan",nativeName:"gagana faa Samoa"},{iso:"sg",name:"Sango",nativeName:"yng t sng"},{iso:"sr",name:"Serbian",nativeName:" "},{iso:"gd",name:"Scottish Gaelic; Gaelic",nativeName:"Gidhlig"},{iso:"sn",name:"Shona",nativeName:"chiShona"},{iso:"si",name:"Sinhala, Sinhalese",nativeName:""},{iso:"sk",name:"Slovak",nativeName:"slovenina"},{iso:"sl",name:"Slovene",nativeName:"slovenina"},{iso:"so",name:"Somali",nativeName:"Soomaaliga, af Soomaali"},{iso:"st",name:"Southern Sotho",nativeName:"Sesotho"},{iso:"es",name:"Spanish; Castilian",nativeName:"espaol, castellano"},{iso:"su",name:"Sundanese",nativeName:"Basa Sunda"},{iso:"sw",name:"Swahili",nativeName:"Kiswahili"},{iso:"ss",name:"Swati",nativeName:"SiSwati"},{iso:"sv",name:"Swedish",nativeName:"svenska"},{iso:"ta",name:"Tamil",nativeName:""},{iso:"te",name:"Telugu",nativeName:""},{iso:"tg",name:"Tajik",nativeName:", toik, "},{iso:"th",name:"Thai",nativeName:""},{iso:"ti",name:"Tigrinya",nativeName:""},{iso:"bo",name:"Tibetan Standard",alternateNames:"Tibetan Standard, Tibetan, Central",nativeName:""},{iso:"tk",name:"Turkmen",nativeName:"Trkmen, "},{iso:"tl",name:"Tagalog",alternateNames:"Wikang Tagalog,  ",nativeName:"Wikang Tagalog"},{iso:"tn",name:"Tswana",nativeName:"Setswana"},{iso:"to",name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"},{iso:"tr",name:"Turkish",nativeName:"Trke"},{iso:"ts",name:"Tsonga",nativeName:"Xitsonga"},{iso:"tt",name:"Tatar",nativeName:", tatara, "},{iso:"tw",name:"Twi",nativeName:"Twi"},{iso:"ty",name:"Tahitian",nativeName:"Reo Tahiti"},{iso:"ug",name:"Uighur, Uyghur",nativeName:"Uyurq, "},{iso:"uk",name:"Ukrainian",nativeName:""},{iso:"ur",name:"Urdu",nativeName:""},{iso:"uz",name:"Uzbek",nativeName:"zbek, , "},{iso:"ve",name:"Venda",nativeName:"Tshivena"},{iso:"vi",name:"Vietnamese",nativeName:"Ting Vit"},{iso:"vo",name:"Volapk",nativeName:"Volapk"},{iso:"wa",name:"Walloon",nativeName:"Walon"},{iso:"cy",name:"Welsh",nativeName:"Cymraeg"},{iso:"wo",name:"Wolof",nativeName:"Wollof"},{iso:"fy",name:"Western Frisian",nativeName:"Frysk"},{iso:"xh",name:"Xhosa",nativeName:"isiXhosa"},{iso:"yi",name:"Yiddish",nativeName:""},{iso:"yo",name:"Yoruba",nativeName:"Yorb"},{iso:"za",name:"Zhuang, Chuang",nativeName:"Sa cue, Saw cuengh"}]},{}],46:[function(a,b){b.exports={application_title:{message:"LingSync beta",description:"The title of the application, displayed in the web store."},application_description:{message:"An on/offline fieldlinguistics database app which adapts to its user's I-Language.",description:"The description of the application, displayed in the web store."},locale_Close_and_login_as_LingLlama:{message:"Login as LingLlama",description:"button"},locale_Close_and_login_as_LingLlama_Tooltip:{message:"You can log in as LingLlama to explore the app pre-populated with data. There are also comments left by users to explain what widgets are for and how you can use them. If you're new to LingSync this is a great place to start after watching the videos. ",description:"tooltip"},locale_Username:{message:"Username:"},locale_Password:{message:"Password:"},locale_Sync_my_data_to_this_computer:{message:"Sync my data to this device"},locale_Welcome_to_FieldDB:{message:"Welcome to LingSync!"},locale_An_offline_online_fieldlinguistics_database:{message:"LingSync is a free, open source project developed collectively by field linguists and software developers to make a modular, user-friendly app which can be used to collect, search and share data, both online and offline."},locale_Welcome_Beta_Testers:{message:"<p>Welcome Beta Testers! Please sit back with a cup of tea and <a target='top' href='https://www.youtube.com/embed/videoseries?list=PL984DA79F4B314FAA'>watch this play list before you begin testing LingSync</a>. Leave us notes, bugs, comments, suggestions etc in the Contact Us/Bug Report form in the User Menu. Your feedback helps us prioritize what to fix/implement next!</p>"},locale_Welcome_Screen:{message:"<p>Curious what this is? <a target='top' href='https://www.youtube.com/embed/videoseries?list=PL984DA79F4B314FAA'>You can watch this play list to find out.</a>. You can find help and more info in the top right menu of the Corpus Dashboard.</p>"},locale_Create_a_new_user:{message:"Register"},locale_What_is_your_username_going_to_be:{message:"What is your username going to be?"},locale_Confirm_Password:{message:"Confirm Password:"},locale_Sign_in_with_password:{message:"Register"},locale_Warning:{message:"Warning!"},locale_Instructions_to_show_on_dashboard:{comment:"<p>Welcome! This is your Corpus dashboard. On the left side, there are Corpus and Elicitation Session quick-views, both of which you    can make full screen by clicking the icon on the top right corner. Full    screen shows you details of the Corpus and Elicitation Session. If this   is your first time seeing this message, you should change your corpus   title and description by clicking <i class=' icon-edit'></i>. You can hover over any    icon to see what the icon does. You should also change your session goals     and date for your first elicitation session.</p>    <p>For more help text, videos and userguide, click the <span class='caret'></span> on the top right corner of the app.     To more information about what a 'Corpus' is, click <i class=' icon-cogs resize-full'></i>.     It will show the corpus settings, which contains explanations of each component of a 'Corpus.'</p>    <p>This is the first draft of these instructions. Please help us make this better. <a href='https://docs.google.com/forms/d/18KcT_SO8YxG8QNlHValEztGmFpEc4-ZrjWO76lm0mUQ/viewform' target='_new'>Contact us</a> </p>",message:"<p>Welcome! This is your Corpus dashboard. If this is your first time seeing this message, please do the following: </p> <p><b>Corpus</b> On the left side, there is Corpus quick-view. Edit your corpus title and description by clicking <i class=' icon-edit'></i>. To see what Corpus consists of, click <i class=' icon-cogs resize-full'></i>. </p> <p><b>Elicitation Session</b> Below the Corpus quick-view, there is Elicitation Session quick-view. Edit the goal and date for your first elicitation session by clicking <i class=' icon-edit'></i>. Click <i class=' icon icon-resize-full'></i> to see more details of Elicitation Session. </p> <p> You can hover over any icon to see what the icon does. For more help text, videos and userguide, click the <span class='caret'></span> on the top right corner of the app. </p> <p>This is the first draft of these instructions. Please help us make this better. <a href='https://docs.google.com/forms/d/18KcT_SO8YxG8QNlHValEztGmFpEc4-ZrjWO76lm0mUQ/viewform' target='_new'>Contact us</a> </p>"},locale_elicitation_sessions_explanation:{message:"<p>Like in the real world, an Elicitation Session can have a variety of forms. For example: a 1 hour session with a language consultant, a 3 hour field methods class with several speakers, an extended conversation or narrative, or data from a file import. </p> <p>You can describe various aspects of an Elicitation Session such as date, goal/topic, consultant(s), etc. by clicking the <i class='icons icon-edit'></i> icon in Dashboard view. For additional options, click on the <i class='icon-calendar'></i> icon beside the session name in the list below.</p> <p>Any description you enter will be displayed in the list of Elicitation Sessions below to help you identify them. This information will also be automatically copied into every Datum that is associated with the Session, so that you can search for individual Datum by date, consultant, dialect, etc. </p>"},locale_datalists_explanation:{message:"<p>A Datalist is a collection of Datum that you put together for some reason. Some examples are: making a handout, sharing data with someone, exporting into another program, or simply keeping track of similar Datum for your research.</p> <p> Creating a Datalist is like making a bookmark to a set of custom search results. First, do a search for whatever you want the Datalist to be about. Then, if you don't want some of the results to be included in the Datalist, click the <i class='icon-remove-sign'></i> icon by any Datum to remove it. Finally, edit the title and description, and click the save button to create the Datalist.</p> <p>You can see your Datalists on the left side of your dashboard (click plus/minus to expand/minimize) or in the list below (double-click on a title to view details). </p><p>To see all your data, do a search with nothing in the search bar. If you have over 200 Datum in your corpus, this can be pretty slow, so you may prefer to search for a subset. In general, a Datalist with more than 100 Datum will take a few seconds to load.</p> <p> In the Datalist view, the Datum will appear in the colour of their current state (i.e. Checked with a consultant, To be checked, Deleted etc). You can make new states in the Datum State Settings on this page. </p>"},locale_permissions_explanation:{message:"<p>Permissions are where you give other people access to your corpus.</p><p>To add another LingSync user, you need to know their username. Click the <i class='icons icon-edit'></i> icon at the top right and then come back to Permissions and click the 'See current team members' button. You can then add users by typing in their username by the appropriate group.</p> <ul><li>Admins can add other people to any group but not do anything with the data unless they are also writers/readers.</li> <li>Writers can enter new data, add comments, change Datum State from 'to be checked to 'checked' etc, but not see data that is already entered. </li><li>Readers can see data that is already entered in the app but not edit or comment on it. </li></ul><p>If you want someone to be able to both enter data and see existing data, add them as both a writer and a reader.</p><p>If you want to make your corpus public and findable on Google as recommended by EMLED data management best practices, type 'Public' in the 'Public or Private' field below.</p><p>You can, and should, encrypt any Datum containing sensitive information by clicking the <i class=' icon-unlock'></i> button at the bottom of the Datum. Encrypted Datums are shown as 'xxx xx xx xx' to all users, including on the web. If you want to see the contents of a confidential Datum, click on the <i class='icon-eye-open'></i> and enter your password. This will make the Datum visible for 10 minutes.</p>"},locale_datum_fields_explanation:{message:"<p>Datum Fields are fields where you can add information about your Datum. There fields are automatically detected when you import data, so if you have data already, you should import it to save you time configuring your corpus. </p> <p>By default, the app comes with 4 fields which it uses to create inter-linearized glosses (the pretty view which you are used to seeing in books and handouts). You can add any number of fields (we have tested using over 400 fields). </p> <p>In the Datum Edit view, the fields that are used most frequently in your corpus will automatically appear when you open a Datum, and you can click on <i class='icon-list-alt'> </i> to see the rare fields. </p><p>The fields in your corpus (shown below) are automatically available in search. You can choose to encrypt particular fields (e.g. utterance). If you mark a Datum as confidential, the encrypted fields will be encrypted in the database and masked from the user as 'xxx xx xxxxx'. For example, you may choose to not encrypt a lambda calculus field or a grammatical notes field, as these are usually purely a linguistic formalism and may not transmit any personal information which your consultants would like to keep confidential. </p><p> Each Datum Field has a help convention, which is the text you see below. Use this to help everyone remember what information goes in which field. Anyone who can enter data in your corpus can see these help conventions by clicking the <i class='icon-question-sign'></i> next to the Datum Field label in the Datum Edit view. </p><p>You can edit the help text by clicking <i class='icons icon-edit'></i> icon at the top right. These help conventions are also exported as a README.txt when you export your data, as recommended by EMELD data management best practices. </p>"},locale_conversation_fields_explanation:{message:"<p>Conversation Fields are fields which where you can add information about your Conversation. As defaults the conversation comes with 2 fields (audio and speakers), and each turn of the conversation (each Datum within it) comes with the usual 4 default datum fields.  You can add any number of fields here if they are relevant to the WHOLE conversation (ex: location, context, world knowledge, sociolinguistic variables).  The conversation fields in your corpus (shown below) are automatically available in the search. You can choose to encrypt particular fields (e.g. utterance). If you mark a Conversation as confidential, the encrypted fields will be encrypted in the database and masked from the user as 'xxx xx xxxxx'. For example, you may choose to not encrypt a 'location' field, but instead choose to encrypt a 'world knowledge' field as it may contain sensitive personal information which consultants would not want public. Each Conversation field can have a help convention, which is the text you see below. Your team members can see these help/conventions by clicking the <i class='icon-question-sign'></i> next to the Conversation field label in the Conversation Edit view. These help conventions are also exported as a README.txt when you export your data, as recommended by EMELD data management best practices. </p>"},locale_datum_states_explanation:{message:"<p>Datum States are used to keep track of whether the data is valid or invalid, for example, 'Checked' with a consultant, 'To be checked', 'Deleted' etc. </p> <p>Datum States can be as detailed as you choose. You can create your own Datum States for your own corpus to help you manage your team's data validation workflow (e.g. 'To be checked with Sophie,' 'Checked with Gladys').  You can assign colours to your Datum States, which will appear as the background colour of the Datum in any Datalist. </p> <p> If you flag a Datum as Deleted it won't show up in search results anymore, but a Datum in a corpus is never really deleted. It remains in the database complete with its change history so that you can review it at a later date. (In future we might add a button to allow users to 'empty the trash' and mass-delete old Datum from the system.) </p> "},locale_advanced_search_explanation:{message:"<p>Search errs on the side of including more results, rather than missing anything. </p> <p>For example, you can type 'nay' and search will find the morphemes 'onay', 'naya' etc. </p> <p>Search automatically creates a temporary list of data. If you enter new matching data, it will be added automatically this can be a handy way to see the data you have entered recently, as you enter data.. If you want to keep the list of data, click Save and a new DataList will be created. </p> <p>For now, search is offline, running on your device, but we would eventually like to have a more advanced search that works online, sorts results better, and could let you search for minimal pairs using features.</p>"},locale_New_User:{message:"New User"},locale_Activity_Feed_Your:{message:"Your Activity Feed"},locale_Activity_Feed_Team:{message:"Corpus Team Activity Feed"},locale_Refresh_Activities:{message:"Refresh activity feed to bring it up-to-date."},locale_Need_save:{message:" Need save:"},locale_60_unsaved:{message:"<strong>60% unsaved.</strong>"},locale_Recent_Changes:{message:"Recent Changes:"},locale_Need_sync:{message:"Need sync:"},locale_Differences_with_the_central_server:{message:"Differences with the central server:"},locale_to_beta_testers:{message:"These messages are here to communicate to users what the app is doing. We will gradually reduce the number of messages as the app becomes more stable. <p>You can close these messages by clicking on their x.</p>"},locale_We_need_to_make_sure_its_you:{message:"We need to make sure it's you..."},locale_Yep_its_me:{message:"Yep, it's me"},locale_Log_Out:{message:"Log Out"},locale_Log_In:{message:"Log In"},locale_User_Settings:{message:"User Settings"},locale_Keyboard_Shortcuts:{message:"Keyboard Shortcuts"},locale_Corpus_Settings:{message:"Corpus Settings"},locale_Terminal_Power_Users:{message:"Power Users Backend"},locale_New_Datum:{message:"New Datum"},locale_New_menu:{message:"New"},locale_New_Conversation:{message:"New Conversation"},locale_New_Data_List:{message:"New Data List"},locale_New_Session:{message:"New Session"},locale_New_Corpus:{message:"New Corpus"},locale_Data_menu:{message:"Data"},locale_Import_Data:{message:"Import Data"},locale_Export_Data:{message:"Export Data"},locale_All_Data:{message:"All Data"},locale_All_Speakers:{message:"All (Native/Heritage) Speakers"},locale_All_Language_Consultants:{message:"All Language Consultants"},locale_All_Participants:{message:"All Participants"},locale_All_Users:{message:"All Users"},locale_All_Elicitation_Sessions:{message:"All Elicitation Sessions"},locale_All_Datalists:{message:"All Datalists"},locale_Save:{message:"Save"},locale_Title:{message:"Title:"},locale_Description:{message:"Description:"},locale_Copyright:{message:"Corpus Copyright:"},locale_License:{message:"Corpus License:"},locale_License_explanation:{message:"If you make a portion of your corpus available to other people, EMELD recommends that you document clearly your terms of use, and apply a license to enforce them. For easy to understand standard licenses, you can consult <a href='http://creativecommons.org/licenses/' target='_blank'>Creative Commons</a>. Creative Commons licenses are applied to most web/community owned/created data, be it Wikipedia or other popular content sharing websites and mobile apps."},locale_Terms_of_use:{message:"Corpus Terms of Use:"},locale_Terms_explanation:{message:"When you decide to make a portion of your corpus public, EMELD recommend that you cleary state your Terms of Use with your corpus. You can modify the sample of Terms of Use in the textbox below according to the policy of your project (be sure to discuss with other project members and affected parties before deciding on your terms of use). Please also try to choose a license which makes sense with your Terms of Use. For your reference, see also the terms of use for other corpora such as: <a href='http://www.aiatsis.gov.au/collections/muraread.html' target='_blank'>Mura</a>, <a href='http://www.paradisec.org.au/services.html' target='_blank'>PARADISEC</a>, <a href='http://linguistics.berkeley.edu/~survey/archive/terms-of-use.php' target='_blank'>Survey of California and Other Indian Languages</a> "},locale_Sessions_associated:{message:"Elicitation Sessions associated with this corpus"},locale_Datalists_associated:{message:"Datalists associated with this corpus"},locale_Permissions_associated:{message:"Permissions associated with this corpus"},locale_Datum_field_settings:{message:"Datum Field Settings"},locale_Conversation_field_settings:{message:"Conversation Field Settings"},locale_Encrypt_if_confidential:{message:"Encrypt if confidential:"},locale_Help_Text:{message:"Help Text:"},locale_Add:{message:"Add"},locale_Datum_state_settings:{message:"Datum State Settings"},locale_Green:{message:"Green"},locale_Orange:{message:"Orange"},locale_Red:{message:"Red"},locale_Blue:{message:"Blue"},locale_Teal:{message:"Teal"},locale_Black:{message:"Black"},locale_Default:{message:"Default"},locale_Elicitation_Session:{message:"Elicitation Session"},locale_Export:{message:"Export"},locale_Actions:{message:"Actions"},locale_Navigation:{message:"Navigation"},locale_Datum_Status_Checked:{message:"Mark Datum status as checked/verified with language consultant"},locale_Next_Datum:{message:"Next Datum"},locale_Previous_Datum:{message:"Previous Datum"},locale_Data_Entry_Area:{message:"Data Entry Area <small>(1-200 datum)</small>"},locale_Search:{message:"Type your search query, or hit enter to see all data"},locale_View_Profile_Tooltip:{message:"Click to view user's page"},locale_View_Public_Profile_Tooltip:{message:"View/edit your public user's page"},locale_Edit_User_Profile_Tooltip:{message:"Click to edit your user profile"},locale_Public_Profile_Instructions:{message:"This is your public user's page. You can edit it to change/remove information. This is what your team members can see when they click on your gravatar. All of this information (including your gravatar) can be different from the information in your private profile."},locale_Private_Profile_Instructions:{message:"This is your private profile."},locale_Edit_Public_User_Profile:{message:"Edit my public user's page"},locale_Close:{message:"Close"},locale_New_Corpus_Instructions:{message:"Edit the fields below to create a new corpus, or push ESC to enter more data in the current corpus"},locale_New_Corpus_Warning:{message:" The New Corpus functionality still needs more testing, this message will disappear when New Corpus is not experimental."},locale_Cancel:{message:"Cancel"},locale_Next:{message:"Next"},locale_Show:{message:"Show"},locale_per_page:{message:"per page"},locale_New_Session_Instructions:{message:"<p>Edit the fields below to create a new elicitation session, or push ESC to enter more data in the current session.</p>"},locale_Consultants:{message:"Consultant(s):"},locale_Goal:{message:"Goal:"},locale_When:{message:"When:"},locale_Save_And_Import:{message:"Save and Finish Importing"},locale_Import:{message:"Import"},locale_percent_completed:{message:"% completed."},locale_Import_Instructions:{comment:" <ol> <li>Type, or Drag and drop a file/text (csv, txt, tabbed, xml, text, eaf, sf) to the area indicated below.</li> <li>(Edit/type in the text area to correct information as needed.)</li> <li>Associate your corpus's existing default data fields with the appropriate columns by either dragging the colored datum fields, or by typing in the column header input box .</li> <li>Type in any other column headings that you want to keep in your data, the app will automatically add these to the corpus' default datum fields. This means that you can search through them to locate your data. Each row in the table will be come a 'datum' in your corpus database.</li> <li>Click on the Attempt Import button at any time to see what your data will look like in a interlinear glossed data list.</li> <li>Review the interlinear glossed data list which appears on the left to see if the import looks good.</li> <li>(Continue to edit the table cells as needed, click Attempt Import and review data list as many times as you would like until the import looks correct).</li> <li>When satisfied with the data list, click Save and your data will be imported into your corpus. A new elicitation session will be created using the date modified of the file you imported (if you want, you can edit this session later to add a more accurate goal discussing why the file was originally created), a new data list will also be created which contains all these data since it is likely that you grouped this data together into a file for a reason in the first place. You can find the resulting new default datum fields, session, and data list in your Corpus Settings page.</li><li>(Click on the home button to do something else while it imports your data in the background.)</li> </ol>",message:"Everyone's data is different. <a href='http://www.facebook.com/LingSyncApp'>You might know some fellow users who might be able to help you import yours: </a>"},locale_Import_First_Step:{message:"<p>Step 1: Drag & drop, copy-paste or type your data into the text area, or select audio/video file(s) from your computer. Yes, you can edit the data inside the text area.</p>"},locale_Import_Second_Step:{message:"<p>Step 2: Drag and drop or type the field names in column headers. Edit data in the table as needed.</p>"},locale_Import_Third_Step:{message:"<p>Step 3: The imported data will look like this. Edit in the table or the text area above as needed. Edit the datalist title and description, and the eliciation session section before finishing import. </p>"},locale_Drag_Fields_Instructions:{message:"<p>Drag (or type) the coloured datum fields to the column headings which match. Type in any additional column headings which you would like to keep as datum fields. The columns will become default datum fields in your corpus database and will also become fields that you can search through to locate your data. Each row will become a 'datum' in your corpus database.</p>"},locale_Add_Extra_Columns:{message:"Insert Extra Columns"},locale_Attempt_Import:{message:"Preview Import"},locale_LaTeX_Code:{message:"LaTeX Code:"},locale_Unicode_Instructions:{message:"By default this is also a keyboard shortcut to type this character in a datum field. To customize the shortcut:"},locale_Remove_Unicode:{message:"Remove Unicode"},locale_Unicode:{message:"Unicode"},locale_Drag_and_Drop:{message:"<small>Drag and Drop</small>"},locale_AND:{message:"AND"},locale_OR:{message:"OR"},locale_Advanced_Search:{message:"Advanced Search"},locale_Advanced_Search_Tooltip:{message:"Advanced Search allows you to use your corpus-wide datum fields or session details to search for datum, using either AND or OR with substring match."},locale_User_Profile:{message:"User Profile"},locale_Private_Profile:{message:"User Profile"},locale_Public_Profile:{message:"Public Profile"},locale_Email:{message:"Email:"},locale_Research_Interests:{message:"Research Interests:"},locale_Affiliation:{message:"Affiliation:"},locale_Corpora:{message:"Corpora:"},locale_Gravatar:{message:"Gravatar"},locale_Gravatar_URL:{message:"Gravatar URL:"},locale_Firstname:{message:"First name:"},locale_Lastname:{message:"Last name:"},locale_Skin:{message:"Skin:"},locale_Background_on_Random:{message:"Background on Random"},locale_Transparent_Dashboard:{message:"Transparent Dashboard"},locale_Change_Background:{message:"Change Background"},locale_Number_Datum:{message:"Number of Datum to appear at a time:"},locale_Help_Text_Placeholder:{message:"Put a help text or your team data entry conventions for this field here (optional)."},locale_Add_Placeholder:{message:"Add...."},locale_Datalist_Description:{message:"You can use Datalists to create handouts or to prepare for sessions with consultants, or to share with collaborators."},locale_Add_Tag:{message:"New Tag..."},locale_Drag_and_Drop_Placeholder:{message:"Drag and drop, copy-paste or type your data here."},locale_Paste_Type_Unicode_Symbol_Placeholder:{message:"Paste/type unicode symbol"},locale_TIPA_shortcut:{message:"TIPA/keyboard shortcut"},locale_Show_Activities:{message:"Show Activities"},locale_Hide_Activities:{message:"Hide Activities"},locale_Show_Dashboard:{message:"Show dashboard with data entry form"},locale_Save_on_this_Computer:{message:"Save on this device."},locale_Sync_and_Share:{message:"Sync and share with team"},locale_Show_Readonly:{message:"Show read only"},locale_Show_Fullscreen:{message:"Show full screen"},locale_Add_New_Datum_Field_Tooltip:{message:"Add new datum field"},locale_Add_New_Conversation_Field_Tooltip:{message:"Add new conversation field"},locale_Add_New_Datum_State_Tooltip:{message:"Add new datum state"},locale_Show_in_Dashboard:{message:"Show in dashboard"},locale_Edit_corpus:{message:"Edit Corpus"},locale_Show_corpus_settings:{message:"Show Corpus Settings"},locale_Drag_and_Drop_Audio_Tooltip:{message:"Drag and drop audio over the audio player to attach an audio file. Drag and drop option for YouTube videos coming soon."},locale_Play_Audio:{message:"Play audio"},locale_Play_Audio_checked:{message:"Play audio of checked items"},locale_Remove_checked_from_datalist_tooltip:{message:"Remove checked datum from this data list (they will still be in the corpus). "},locale_Plain_Text_Export_Tooltip:{message:"Export as plain text/Copy to clipboard"},locale_Plain_Text_Export_Tooltip_checked:{message:"Export as plain text/Copy checked items to clipboard"},locale_Duplicate:{message:"Duplicate datum to create a minimal pair"},locale_Encrypt:{message:"Make this datum confidential"},locale_Encrypt_checked:{message:"Make checked items confidential"},locale_Decrypt_checked:{message:"Remove confidentiality from checked items (Warning: this will save them as decrypted in the database). If you just want to unmask them so you can edit edit them, click on the eye instead."},locale_Decrypt:{message:"Remove confidentiality from this datum (Warning: this will save it as decrypted in the database). If you just want to unmask it so you can edit edit it, click on the eye instead."},locale_Show_confidential_items_Tooltip:{message:"Unmask confidential/encrypted data so that it can be edited and read for the next 10 minutes."},locale_Hide_confidential_items_Tooltip:{message:"Return to masked view of confidential/encrypted data"},locale_Edit_Datalist:{message:"Edit Data List"},locale_Export_checked_as_LaTeX:{message:"Export checked as LaTeX"},locale_Export_checked_as_CSV:{message:"Export checked as CSV"},locale_Hide_Datalist:{message:"Hide datalist"},locale_Show_Datalist:{message:"Show datalist"},locale_Edit_Datum:{message:"Edit Datum"},locale_See_Fields:{message:"Hide/Show infrequent fields"},locale_Add_Tags_Tooltip:{message:"Add a tag to this datum. Tags can be used to categorize datum, count how many datum of each tag you have, and search datum."},locale_Edit_Session:{message:"Edit Session"},locale_Show_Unicode_Palette:{message:"Show Unicode Palette"},locale_Hide_Unicode_Palette:{message:"Hide Unicode Palette"},locale_Add_new_symbol:{message:"Add new symbol"},locale_Public_or_Private:{message:"Public or Private:"},locale_Insert_New_Datum:{message:"Insert a new datum on top of the dashboard center"},locale_LaTeX:{message:"Export datum as LaTeX"},locale_CSV_Tooltip:{message:"Export datum as CSV"},locale_of:{message:"of"},locale_pages_shown:{message:"pages shown"},locale_More:{message:"More"}}
},{}],47:[function(a,b){b.exports={application_title:{message:"iCampo beta"},application_description:{message:"Un aplicacion de coleccin de datos linguisticos."},locale_Close_and_login_as_LingLlama:{message:"Entrar como LingLlama",description:"button"},locale_Close_and_login_as_LingLlama_Tooltip:{message:"TODO translate You can log in as LingLlama to explore the app pre-populated with data. There are also comments left by users to explain what widgets are for and how you can use them. If you're new to FieldDB this is a great place to start after watching the videos.",description:"tooltip"},locale_Username:{message:"Usuario:"},locale_Password:{message:"Contrasea:"},locale_Sync_my_data_to_this_computer:{message:"Sincronisa mis datos con esta computadora"},locale_Welcome_to_FieldDB:{message:"Bienvenido a iCampo! <small>beta</small>"},locale_An_offline_online_fieldlinguistics_database:{message:"Un aplicacion de coleccion de datos linguisticos...gratis y OpenSource"},locale_Welcome_Beta_Testers:{message:"Bienvenidos! Por favor <a target='top' href='https://www.youtube.com/embed/videoseries?list=PL984DA79F4B314FAA'>vea estos tutoriales antes de empezar de probar iCampo</a>. Dejanos notas, comentarios, sugerencias en la forma abajo."},locale_Create_a_new_user:{message:"Crear un nuevo usuario"},locale_What_is_your_username_going_to_be:{message:"Que quieres por su usuario?"},locale_Confirm_Password:{message:"Confirme su contrasea:"},locale_Sign_in_with_password:{message:"Registrar"},locale_Warning:{message:"Aviso!"},locale_Instructions_to_show_on_dashboard:{message:"TODO translate instructions"},locale_elicitation_sessions_explanation:{message:"<p>TODO translate An Elicitation Session is very similar to an elicitation session in the real world. This could be a 1-hour Session with one language consultant, or a 3-hour field methods class, or data from a file import. Generally an elicitation session happens on a specific day, or across a few days, you can write a date or text in the 'dateElicited' field. Often we have a goal set out when we meet for an elicitation Session, if you want, you can put this into the 'Goal' field of the Sessions and it will appear in the Session quick links below. An Elicitation Session has many fields which you can edit by clicking on the <i class='icon-calendar'></i> icons in the app to see the details. These fields are information which is common to all datum elicited that day for example, the dialect, perhaps the language consultants present the date etc. The Session fields are copied into the Datum that were elicited during that Session, this makes it possible to search for Datum containing a particular dialect and/or speaker etc. </p>"},locale_datalists_explanation:{message:"<p>TODO translate A Datalist is a collection of Datum that you put together for a reason, it could be to prepare  a handout, to share some of your data with someone, to export into another program or simply to keep track of similar Datum for your research. You could think of Datalists as curated search results that the app remembers for you. Datalists have titles and descriptions, their titles appear as links below. You can click on the links to see the details of the  Datalist. In the Datalist view, the Datum will appear in the colour of their current state (i.e. Checked with a consultant, To be checked, Deleted etc). You can make new states in the Datum State Settings on this page. You can create new Datalists by doing a search for what you want to be in the Datalist. You can refine the Datalist items by clicking on <i class='icon-remove-sign'></i> to remove Datum in the Datalist view. The Datalist view is normally on the left side of your dashboard, you can see it by double clicking on a Datalist in the list below. If you want to see all your data click on the 'All Data' link below, this will load all your data into a Datalist view. If you have over 200 Datum in your corpus, this can be pretty slow. If you have a large corpus you may prefer searching for a subset of your data rather than skimming all of it at once. In general, any Datalist with more than 100 Datum takes a few seconds to load and display all the Datum it contains. </p>"},locale_permissions_explanation:{message:"<p>TODO translate Permissions are where you give your team members access to your corpus. Add users to the 'Admin' group if you want to let them add other team members. Add users to the 'Writers' group if you want to let them add comments, enter new data, change Datum State from 'to be checked to 'checked' etc. For example, if you would like to allow your language consultant to enter or check data, you can put them in the 'writers' group. Add users to the 'Readers' group if you want them to be able to see your data, but not modify it. For example, you might want to share your data with other researchers outside of your team, but you might not want them to leave comments or modify , or mass-export the data. If you want to make your corpus public and findable on Google as recommended by EMLED data management best practices, click the Public checkbox. Don't worry, if your corpus contains confidential or personal information you can, and should, encrypt the Datum containing sensitive information using the <i class=' icon-unlock'></i> buttons. Data which are encrypted are shown as 'xxx xx xx xx' to all users, including on the web. If you want to see the contents of the confidential datum you have to click on the <i class='icon-eye-open'></i>, it will prompt you for your password to make sure you are really you. This will make confidential data visible for 10 minutes.</p>"},locale_datum_fields_explanation:{message:"<p>TODO translate Datum Fields are fields which where you can add information about your Datum. There fields are automatically detected when you import data, so if you have data already, you should import it to save you time configuring your corpus. As defaults the app comes with 4 fields which it uses to create inter-linear-glossed text views (i.e. pretty view which you are used to seeing in books and handouts). You can add any number of fields (we have tested using over 400 fields). In the Datum Edit view, the fields that are used most frequently in your corpus will automatically appear when you open a Datum, and you can click on <i class='icon-list-alt '> </i> to see the rare fields. The fields in your corpus (shown below) are automatically available in the search. You can choose to encrypt particular fields (e.g. utterance). If you mark a Datum as confidential, the encrypted fields will be encrypted in the database and masked from the user as 'xxx xx xxxxx'. For example, you may choose to not encrypt a lambda calculus field, or a grammatical notes field, as these are usually purely a linguistic formalism and may not transmit any personal information which your consultants would like to keep confidential. Each Datum Fields can have a help convention, which is the text you see below. Your team members can see these help/conventions by clicking the <i class='icon-question-sign'></i> next to the Datum Field label in the Datum Edit view. These help conventions are also exported as a README.txt when you export your data, as recommended by EMELD data management best practices. </p>"},locale_datum_states_explanation:{message:"<p>TODO translate Datum States are used to keep track of whether the data is valid or invalid, for example, 'Checked' with a consultant, 'To be checked', 'Deleted' etc. Datum States can be as detailed as you choose. You can create your own Datum States for your own corpus to help you manage your team's data validation workflow (e.g. 'To be checked with Sophie,' 'Checked with Gradys').  You can assign colours to your Datum States, these colours will appear in your data list. You can flag a Datum as Deleted and it won't show up in search results. A Datum in a corpus is never really deleted, it remains in the database complete with its change history so that you can review it at a later date.  (In future we might add a button to allow users to 'empty the trash' and mass-delete old Datum from the system.) </p> "},locale_advanced_search_explanation:{message:"<p>TODO translate There are two ways to access Search, you can type in your query in the search box which is always present on the top left of the screen, or you can click on the button next to it to get to the Advanced Search. Search is very important to field linguists, this is why we made the Search very powerful, and we are planning on making it more powerful in the future. You can type any string of characters in the Datum or Session Fields below. The search will look through the datum of your corpus, and find datum which contain that substring, this means you can type 'nay' and you will get morphemes 'onay' 'naya' etc. While this is not ideal for finding allomorphs, it works pretty well. Right now the search is happening on your computer, offline. In the future we will be adding a 'lexicon webservice' which will work on indexing your morphemes glosses etc to make search faster, but also smarter by build a more linguistically informed indexes of your data so that you can use linguistic constructs to search for your data as you do naturally when you search with your eyes, rather than with a database. We also have planned a 'Dream' module for phonological search that essentially uses a feature geometry ontology to let you search for minimal pairs. A search automatically creates a temporary Datalist, which appears below the Session quick view on the left side of the screen. You can choose to rename and save this Datalist if created a collection of data that you wanted. You can also leave this search data list open, if you enter new datum which matched your search query that appears in the top left corner, they will automatically appear in the search data list too. This can be handy for you to see datum around a certain phenomena while you are entering new data. If your search query is hard to formulate to get all the examples you need, you can search for nothing (leave all fields blank) and it will return all your data as a new Datalist. In general we have decided to implement search such that it errs on the side of high recall, i.e. that it finds all relevant examples, but also returns some garbage, rather than high precision, i.e. that it finds only exact examples, but misses some relevant ones. Currently the search results are not sorted by relevancy to the query. Once we have a proper 'lexicon webservice' we will have more measures of relevancy and will be able to return results and their relevancy scores. </p>"},locale_New_User:{message:"Usuario Nuevo"},locale_Activity_Feed_Your:{message:"TODO translate Your Canal de Actividad"},locale_Activity_Feed_Team:{message:"TODO translate Corpus Team Canal de Actividad"},locale_Refresh_Activities:{message:"TODO translate"},locale_View_Profile_Tooltip:{message:"TODO translate Click to view user's page"},locale_View_Public_Profile_Tooltip:{message:"TODO translate View/edit your public user's page"},locale_Edit_User_Profile_Tooltip:{message:"TODO translate Click to edit your user profile"},locale_Public_Profile_Instructions:{message:" TODO translateThis is your public profile, you can edit it to change/remove information. This is what people can see when they click on your gravatar."},locale_Private_Profile_Instructions:{message:"TODO translate This is your private profile, only you members on your team can see it."},locale_Edit_Public_User_Profile:{message:"TODO translate Edit My Public Profile"},locale_Need_save:{message:"Se ocupa guadar:"},locale_60_unsaved:{message:"<strong>60% sin guardar.</strong>"},locale_Recent_Changes:{message:"Cambios Recientes:"},locale_Need_sync:{message:"Se ocupa sincronisar:"},locale_Differences_with_the_central_server:{message:"Diferencias con el servidor central:"},locale_to_beta_testers:{message:"Estos mensajes son para comunicar con los provadores que hace la aplicacin. Los mensajes se desaparesern cuando la aplicacin esta mas estable. <p>Puedes cerrar los mensajes con el x.</p>"},locale_We_need_to_make_sure_its_you:{message:"Ocupamos asegurar que es ustd..."},locale_Yep_its_me:{message:"Si, soy yo!"},locale_Log_Out:{message:"Salir"},locale_Log_In:{message:"Entrar"},locale_User_Profile:{message:"Perfil de Usuario"},locale_Private_Profile:{message:"TODO translate Perfil Privada"},locale_Public_Profile:{message:"TODO translate Perfil Publico"},locale_User_Settings:{message:"Configuracin de Usuario"},locale_Keyboard_Shortcuts:{message:"Funciones rpidas de teclado"},locale_Corpus_Settings:{message:"Configuracin de Corpus"},locale_Terminal_Power_Users:{message:"Terminal"},locale_New_Datum:{message:"Dato Nuevo"},locale_New_menu:{message:"Nuevo"},locale_New_Data_List:{message:"Lista de Datos Nuevo"},locale_New_Session:{message:"Sesin Nuevo"},locale_New_Corpus:{message:"Corpus Nuevo"},locale_Data_menu:{message:"Datos"},locale_Import_Data:{message:"Importe de Datos"},locale_Export_Data:{message:"Exporte de Datos"},locale_Save:{message:"Guadar"},locale_Title:{message:"Ttulo:"},locale_Description:{message:"Descripcin:"},locale_Sessions_associated:{message:"Sesines de Elicitacin asociados con el corpus"},locale_Datalists_associated:{message:"Listas de datos asociados con el corpus"},locale_Permissions_associated:{message:"Permisos asociados con el corpus"},locale_Datum_field_settings:{message:"Configuracin de los detailles de datos"},locale_Encrypt_if_confidential:{message:"Encripta si es confidencial:"},locale_Help_Text:{message:"Texto de Ayuda:"},locale_Add:{message:"Aadir"},locale_Datum_state_settings:{message:"Configuracin de Estado de Datos"},locale_Green:{message:"Verde"},locale_Orange:{message:"Naranjado"},locale_Red:{message:"Rojo"},locale_Blue:{message:"Azul"},locale_Teal:{message:"Verde Azulado"},locale_Black:{message:"Negro"},locale_Default:{message:"Gris"},locale_Elicitation_Session:{message:"Sesin de Elicitacin"},locale_Export:{message:"Exportar"},locale_Actions:{message:"Accines"},locale_Navigation:{message:"Navegacin"},locale_Datum_Status_Checked:{message:"TODO translate Mark Datum status as checked/verified with language consultant"},locale_Next_Datum:{message:"Prximo Dato"},locale_Previous_Datum:{message:"ltimo Dato"},locale_Data_Entry_Area:{message:"TODO translate Data Entry Area <small>(1-5 datum)</small>"},locale_Search:{message:"Bzqueda"},locale_Close:{message:"Cerrar"},locale_New_Corpus_Instructions:{message:"Edite la forma abajo para crear un nuevo corpus, o presione ESC para entrar ms datos en el corpus presente."},locale_New_Corpus_Warning:{message:"La funcionalidad del corpus nuevo an necesita ms pruebas, este mensaje desaparecer cuando Corpus Nuevo no es experimental."},locale_Cancel:{message:"Cancel"},locale_Next:{message:"Prximo"},locale_Show:{message:"Mostrar"},locale_per_page:{message:"por pagina"},locale_New_Session_Instructions:{message:"<p> Edite los forma abajo para crear una sesin, o presionar ESC para entrar ms datos en la sesin presente. </ p> "},locale_Consultants:{message:"Consultor(es):"},locale_Goal:{message:"Objectivo:"},locale_When:{message:"Fecha:"},locale_Save_And_Import:{message:"Guardar y Terminar de Importar"},locale_Import:{message:"Importar"},locale_percent_completed:{message:"% completo."},locale_Import_Instructions:{message:" <ol> <li> Jalar y Soltar un archivo (csv, txt, tabed, xml, text) a la zona abajo..</li> <li>(Modificar su informacin como necesario.)</li> <li> Jalar o escribe los detailles de datos arriba de los columnos que coinciden. Las columnas se convertirn en filas de su pagina de datos. .</li> <li>Precionar el botn Intenta Importar.</li> <li>Revisa la lista de datos y averigua que su importe se ve bien. </li> <li>Modifica la tabla como necesario, oprime Intentar Importar cuando la lista esta listo, puede hacer este paso las veces que quiere. </li> <li>Cuando esta sastifecho con la lista de datos, oprime Guadar y su lista de datos seran importados a su corpus y un nuevo lista de datos ser creado. </li> </ol>"},locale_Drag_Fields_Instructions:{message:"TODO translate Drag (or type) the colored datum fields to the column headings which match, type in any additional column headings which you would like to keep as datum fields. The columns will become searchable fields in your database."},locale_Add_Extra_Columns:{message:" Agrega Columnas Extras"},locale_Attempt_Import:{message:"Intenta Importar"},locale_LaTeX_Code:{message:"Codigo de LaTeX:"},locale_Unicode_Instructions:{message:"Esto es un funcin rpida de teclado para entrar esta letra en un fila de datos. Para cambiar el funcin:"},locale_Remove_Unicode:{message:"Quite Unicode"},locale_Unicode:{message:"Unicode"},locale_Drag_and_Drop:{message:"<small>Jalar y Soltar</small>"},locale_AND:{message:"Y"},locale_OR:{message:"O"},locale_Advanced_Search:{message:"Bsqueda Advanzada"},locale_Advanced_Search_Tooltip:{message:"Bsqueda Advanzada allows you to use your corpus-wide datum fields or session details to search for datum, using either AND or OR with substring match."},locale_Email:{message:"Correo Electronico:"},locale_Research_Interests:{message:"Intereses de Investigacin"},locale_Affiliation:{message:"Afiliacin"},locale_Corpora:{message:"Corpora"},locale_Gravatar:{message:"Gravatar"},locale_Gravatar_URL:{message:"Gravatar URL"},locale_Firstname:{message:"Primer nombre:"},locale_Lastname:{message:"Apellido:"},locale_Skin:{message:"Foro:"},locale_Background_on_Random:{message:"Aleatorio de Foro"},locale_Transparent_Dashboard:{message:"Tablero Transparente"},locale_Change_Background:{message:"Cambiar Foro"},locale_Number_Datum:{message:"Numbero de Datos a la vez:"},locale_Add_Placeholder:{message:"Aadir...."},locale_Datalist_Description:{message:"Se puede usar las lista de datos para preparar para sesiones con consultantes o compartir con colaboradores."},locale_Add_Tag:{message:"Etiqueta Nueva..."},locale_locale_Help_Text:{message:"TODO this should be merged with locale_Help_Text?  Se puede incluir text de ayuda aqui (opcional)"},locale_Drag_and_Drop_Placeholder:{message:"Jale y Suelta achivos o textos aqui!"},locale_Paste_Type_Unicode_Symbol_Placeholder:{message:"Tecla o pega smbulo de unicode"},locale_TIPA_shortcut:{message:"Funcin rapida de teclado"},locale_Show_Activities:{message:"Mostrar actividades"},locale_Hide_Activities:{message:"Esconder actividades"},locale_Show_Dashboard:{message:"Mostrar Tablero"},locale_Save_on_this_Computer:{message:"Guardar en la computadora"},locale_Sync_and_Share:{message:"Sincronizar y compartir con el equipo"},locale_Show_Readonly:{message:"Mostrar en forma para leer "},locale_Show_Fullscreen:{message:"Mostrar en pantalla completa "},locale_Add_New_Datum_Field_Tooltip:{message:"Aadir un nuevo detaille de dato"},locale_Add_New_Datum_State_Tooltip:{message:"Aadir un estado de dato"},locale_Show_in_Dashboard:{message:"Mostrar en Tablero"},locale_Edit_corpus:{message:"Edita Corpus"},locale_Show_corpus_settings:{message:"Mostrar Configuracin de Corpus"},locale_Drag_and_Drop_Audio_Tooltip:{message:"TODO translate Drag and drop audio over the audio player to attach an audio file. You can also drag and drop a YouTube video URL to attach a YouTube video instead."},locale_Play_Audio:{message:"Tocar audio"},locale_Plain_Text_Export_Tooltip:{message:"TODO translate Export as plain text/Copy to clipboard"},locale_Plain_Text_Export_Tooltip_checked:{message:"TODO translate Export as plain text/Copy checked items to clipboard"},locale_Duplicate:{message:"Duplicar Dato por hacer un contraste miniml"},locale_Encrypt:{message:"Encriptar/Decriptar"},locale_Encrypt_checked:{message:"TODO translate Make checked items confidential"},locale_Decrypt_checked:{message:"TODO translate Remove confidentiality from checked items (Warning: this will save them as decrypted in the database). If you want them to stay confidential and just want to edit them, click on the eye instead."},locale_Decrypt:{message:"TODO translate Remove confidentiality from this datum (Warning: this will save it as decrypted in the database). If you want it to stay confidential and just want to edit it, click on the eye instead."},locale_Show_confidential_items_Tooltip:{message:"TODO translate Unmask confidential/encrypted items so that they can be edited and read for the next 10 minutes."},locale_Hide_confidential_items_Tooltip:{message:"TODO translate Return to masked view of confidential/encrypted datum"},locale_Edit_Datalist:{message:"Editar lista de datos"},locale_Export_checked_as_LaTeX:{message:"Exportar lista de datos seleccionados en formato LaTeX"},locale_Export_checked_as_CSV:{message:"Exportar lista de datos seleccionados en formato CSV"},locale_Hide_Datalist:{message:"Esconder lista de datos"},locale_Show_Datalist:{message:"Mostrar lista de datos"},locale_Edit_Datum:{message:"Editar Datos"},locale_See_Fields:{message:"TODO translate Hide/Show infrequent fields"},locale_Add_Tags_Tooltip:{message:"Aadir etiquetas"},locale_Edit_Session:{message:"Editar Sesin"},locale_Show_Unicode_Palette:{message:"Mostrar los Unicodes"},locale_Hide_Unicode_Palette:{message:"Esconder los Unicodes"},locale_Add_new_symbol:{message:"Aadir un smbulo nuevo"},locale_Public_or_Private:{message:"Publico o Privado:"},locale_Play_Audio_checked:{message:"Tocar audio de los seleccionados"},locale_Remove_checked_from_datalist_tooltip:{message:"TODO translate los seleccionados"},locale_Insert_New_Datum:{message:"Insertar un nuevo dato arriba"},locale_LaTeX:{message:"Exportar dato en formato LaTeX"},locale_CSV_Tooltip:{message:"Exportar dato en formato CSV "},locale_of:{message:"de"},locale_pages_shown:{message:"pagnas mostradas"},locale_More:{message:"Ms"}}},{}],48:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=function(a){this._fieldDBtype||(this._fieldDBtype="Search"),this.debug("Constructing Search length: ",a),d.apply(this,arguments)};e.prototype=Object.create(d.prototype,{constructor:{value:e},defaults:{value:{searchQuery:""}},searchKeywords:{get:function(){return this.warn("searchKeywords is deprecated, use searchQuery instead."),this.searchQuery},set:function(a){this.warn("searchKeywords is deprecated, use searchQuery instead."),this.searchQuery=a}},searchQuery:{get:function(){return this._searchQuery||this.defaults.searchQuery},set:function(a){return a!==this._searchQuery?a?void(this._searchQuery=a.trim()):void delete this._searchQuery:void 0}}}),c.Search=e},{"./../FieldDBObject":4}],49:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=function(a){this._fieldDBtype||(this._fieldDBtype="InsertUnicode"),this.debug("Constructing InsertUnicode length: ",a),d.apply(this,arguments)};e.prototype=Object.create(d.prototype,{constructor:{value:e},defaults:{value:{symbol:"",tipa:"",useCount:0}},symbol:{get:function(){return this._symbol},set:function(a){if(a!==this._symbol){if(!a)return void delete this._symbol;"function"==typeof a.trim&&(a=a.trim()),this._symbol=a.trim()}}}}),c.InsertUnicode=e},{"./../FieldDBObject":4}],50:[function(a,b,c){var d=a("./../Collection").Collection,e=a("./UnicodeSymbol").InsertUnicode,f=function(a){this._fieldDBtype||(this._fieldDBtype="InsertUnicodes"),this.debug("Constructing InsertUnicodes length: ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},primaryKey:{value:"symbol"},INTERNAL_MODELS:{value:{item:e}},fill:{value:function(){this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"\\lambda",symbol:" "})),this.add(new e({tipa:"\\alpha",symbol:" "})),this.add(new e({tipa:"\\beta",symbol:" "})),this.add(new e({tipa:"\\forall",symbol:""})),this.add(new e({tipa:"\\exists",symbol:""})),this.add(new e({tipa:"^{\\circ}",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""})),this.add(new e({tipa:"",symbol:""}))}},sanitizeStringForPrimaryKey:{value:function(a){return this.debug("sanitizeStringForPrimaryKey"),a?("function"!=typeof a.replace&&(a+=""),a=a.replace(/[-""+=?./\[\]{}() ]/g,"")):null}}}),c.InsertUnicodes=f},{"./../Collection":2,"./UnicodeSymbol":49}],51:[function(a,b,c){var d=a("./Speaker").Speaker,e=a("./../corpus/corpus.json"),f=function(a){this._fieldDBtype||(this._fieldDBtype="Consultant"),this.debug("Constructing Consultant: ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},api:{value:"consultants"},defaults:{get:function(){var a={fields:e.consultantFields||e.speakerFields};return JSON.parse(JSON.stringify(a))}}}),c.Consultant=f},{"./../corpus/corpus.json":20,"./Speaker":53}],52:[function(a,b,c){var d=a("./Speaker").Speaker,e=a("./../corpus/corpus.json"),f=function(a){this._fieldDBtype||(this._fieldDBtype="Participant"),this.debug("Constructing Participant length: ",a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},api:{value:"participants"},defaults:{get:function(){var a={fields:[]};try{FieldDB&&FieldDB.FieldDBObject&&FieldDB.FieldDBObject.application&&FieldDB.FieldDBObject.application.corpus&&(FieldDB.FieldDBObject.application.corpus.participantFields?a.fields=FieldDB.FieldDBObject.application.corpus.participantFields.clone():FieldDB.FieldDBObject.application.corpus.speakerFields&&(a.fields=FieldDB.FieldDBObject.application.corpus.speakerFields.clone()))}catch(b){this.warn("Cant get participant fields from the current corpus, instead using defaults."),a.fields=e.participantFields||e.speakerFields}return a.fields&&0!==a.fields.length||(this.warn("There were no corpus specific speaker or participant fiels, instead using defaults"),a.fields=e.participantFields||e.speakerFields),JSON.parse(JSON.stringify(a))}}}),c.Participant=f},{"./../corpus/corpus.json":20,"./Speaker":53}],53:[function(a,b,c){var d=a("./../confidentiality_encryption/Confidential").Confidential,e=a("./../datum/DatumFields").DatumFields,f=a("./../FieldDBObject").FieldDBObject,g=a("./UserMask").UserMask,h=a("./../corpus/corpus.json"),i=function(a){this._fieldDBtype||(this._fieldDBtype="Speaker"),this.debug("Constructing Speaker: ",a),a&&(a._rev||a.fields)||(this.fields=this.defaults.fields),g.apply(this,arguments)};i.prototype=Object.create(g.prototype,{constructor:{value:i},api:{value:"speakers"},INTERNAL_MODELS:{value:{username:f.DEFAULT_STRING,anonymousCode:f.DEFAULT_STRING,gravatar:f.DEFAULT_STRING,fields:e,user:g,confidential:d}},defaults:{get:function(){var a={fields:h.speakerFields};return JSON.parse(JSON.stringify(a))}},confidentiality:{get:function(){return this.fields?this.fields.confidentiality.value:void 0},set:function(a){this.fields||(this.fields=new e(this.defaults.fields)),this.fields.confidentiality.value=a}},buildGravatar:{value:function(){return this._gravatar="968b8e7fb72b5ffe2915256c28a9414c",this._gravatar}},gravatar:{get:function(){return this.buildGravatar()},set:function(a){this.warn("Cannot set the gravatar of a "+this.fieldDBtype+" (it must be anonymous)."+a)}},username:{get:function(){return this.fields&&this.fields.username&&this.fields.username.value?("generalize"===this.fields.confidentiality.value?this.fields.username.mask="A native speaker":"team"===this.fields.confidentiality.value?(this.todo("IF the user is part of the team, they can see the username of the consultant."),this.fields.username.mask=this.anonymousCode):this.fields.username.mask="anonymous"===this.fields.confidentiality.value?this.anonymousCode||this.fields.username.mask:"public"===this.fields.confidentiality.value?this.fields.username.value:"A native speaker",this.fields.username.decryptedMode?this.fields.username.value:this.fields.username.mask):void 0},set:function(a){return this.confidential?(this.fields||(this.fields=new e(this.defaults.fields)),this.fields.username.confidential=this.confidential,void(this.fields.username.value=a)):void this.warn("Cannot set the username before the confidential is set")}},encryptByCorpus:{value:!0},id:{get:function(){return this.anonymousCode},set:function(a){a===this.anonymousCode&&(this._id=a)}},anonymousCode:{get:function(){return this.fields&&this.fields.anonymousCode?this.fields.anonymousCode.value.toUpperCase():void 0},set:function(a){var b;return this.fields&&this.fields.username&&this.fields.username.value&&(this.fields.username.decryptedMode=!0,b=this.fields.username.value,this.fields.username.decryptedMode=!1),b&&a.toLowerCase().indexOf(b)>-1?void this.bug("Cannot set the anonymous code to contain any part of the user's actual username, this would potentially breach their confidentiality."):(this.fields||(this.fields=new e(this.defaults.fields)),this.fields.anonymousCode.value=a,this.id=a,void(this.encryptByCorpus||(this.confidential=new d({secretkey:a}))))}},confidential:{get:function(){return this.confidentialEncrypter},set:function(a){a!==this.confidentialEncrypter&&("function"!=typeof a.encrypt&&a.secretkey&&(a=new this.INTERNAL_MODELS.confidential(a)),this.confidentialEncrypter=a,this.fields&&(this.fields.confidential=a))}},dateOfBirth:{configurable:!0,get:function(){return this.fields?this.fields.dateOfBirth.value:void 0},set:function(a){this.fields?this.fields.dateOfBirth.value=a:(this.fields=new e(this.defaults.fields),this.fields.dateOfBirth.value=a)}},firstname:{configurable:!0,get:function(){return this.fields&&this.fields.firstname?this.fields.firstname.value:void 0},set:function(a){this.fields||(this.fields=new e(this.defaults.fields)),this.fields.firstname.value=this.fields&&this.fields.firstname?a:a}},lastname:{configurable:!0,get:function(){return this.fields&&this.fields.lastname?this.fields.lastname.value:void 0},set:function(a){this.fields||(this.fields=new e(this.defaults.fields)),this.fields.lastname.value=this.fields&&this.fields.lastname?a:a}},languages:{get:function(){return this.fields?this.fields.languages.value:void 0},set:function(a){var b,c;"string"==typeof a?(this.debug("User set the languages with a string"),this.fields.languages&&this.fields.languages&&this.fields.languages.json&&this.confirm("Do you want to set the languages from "+JSON.stringify(this.fields.languages.json)+" to "+a),b=a,c={value:a,label:"languages",json:{languages:a.split(",")}},c.json.languages=c.json.languages.map(function(a){return{iso:a.toLowerCase().trim(),name:a.trim(),nativeName:a.trim()}})):c=a,this.fields||(this.fields=new e(this.defaults.fields)),b&&(this.fields.languages.value=b),this.debug("setting language ",c);for(var d in c)c.hasOwnProperty(d)&&(this.debug("looking at "+d),this.fields.languages[d]=c[d])}},dialects:{get:function(){return this.languages},set:function(a){return this.languages=a}},fields:{configurable:!0,get:function(){return this._fields&&(this._fields.confidential=this.confidential),this._fields},set:function(a){if(a!==this._fields){if(!a)return void delete this._fields;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.fields(a)),this._fields=a}}},user:{get:function(){if(!this.userMask){var a=this;this.public&&this.username?(this.userMask=new this.INTERNAL_MODELS.user({}),this.userMask.username=this.username,this.userMask.fetch().then(function(b){a.debug('Fetched speaker"s user mask',b)},function(b){a.debug('Failed to fetch speaker"s user mask',b)})):this.userMask={},this.userMask={username:this.anonymousCode,gravatar:this.gravatar}}return this.userMask},set:function(a){a!==this.userMask&&(a||(a={}),this.userMask=a)}},decryptedMode:{get:function(){return this._decryptedMode},set:function(a){this._decryptedMode=a,this._fields&&(this._fields.decryptedMode=a)
}},languageOne:{get:function(){return this.getLanguageNumber(0)},set:function(a){return this.setLanguageNumber(0,a)}},languageTwo:{get:function(){return this.getLanguageNumber(1)},set:function(a){return this.setLanguageNumber(1,a)}},languageThree:{get:function(){return this.getLanguageNumber(2)},set:function(a){return this.setLanguageNumber(2,a)}},languageFour:{get:function(){return this.getLanguageNumber(3)},set:function(a){return this.setLanguageNumber(3,a)}},languageFive:{get:function(){return this.getLanguageNumber(4)},set:function(a){return this.setLanguageNumber(4,a)}},getLanguageNumber:{value:function(a){return this.fields&&this.fields.languages&&this.fields.languages.json&&this.fields.languages.json.languages&&this.fields.languages.json.languages[a]?this.fields.languages.json.languages[a]:void 0}},setLanguageNumber:{value:function(a,b){return this.fields&&this.fields.languages&&(this.fields.languages.json=this.fields.languages.json||{languages:[]},b!==this.fields.languages.json.languages[a])?(b.iso&&(b={language:b,fluency:{comprehensionFluency:"native",speakingFluency:"native"},dates:{start:"",end:"",proportionOfUse:""}}),b.fluency=b.fluency||{},b.dates=b.dates||{},b.language=b.language||{},this.fields.languages.json.languages[a]=b,this.fields.languages.json.languages[a]):void 0}}}),c.Speaker=i},{"./../FieldDBObject":4,"./../confidentiality_encryption/Confidential":15,"./../corpus/corpus.json":20,"./../datum/DatumFields":26,"./UserMask":56}],54:[function(a,b,c){var d=a("./UserMask").UserMask,e=function(a){this._fieldDBtype||(this._fieldDBtype="Team"),this.debug("Constructing Team: ",a),d.apply(this,arguments)};e.prototype=Object.create(d.prototype,{constructor:{value:e},id:{get:function(){return"team"},set:function(a){a!==this._id&&("team"!==a&&this.warn('Cannot set team id to anything other than "team."'),this._id="team")}},defaults:{value:{username:"",password:"",email:"",gravatar:"user/user_gravatar.png",researchInterest:"",affiliation:"",description:"",subtitle:"",corpuses:[],dataLists:[],mostRecentIds:{},firstname:"",lastname:"",teams:[],sessionHistory:[]}},subtitle:{get:function(){return this.name},set:function(a){a!==this.name&&(this.warn("subtitle is deprecated, use name instead."),this.name=a)}}}),c.Team=e},{"./UserMask":56}],55:[function(a,b,c){var d=a("./UserMask").UserMask,e=a("./UserPreference").UserPreference,f=a("./user.json"),g=function(a){this._fieldDBtype||(this._fieldDBtype="User"),this.debug("Constructing User length: ",a),d.apply(this,arguments)};g.prototype=Object.create(d.prototype,{constructor:{value:g},api:{value:"users"},defaults:{get:function(){return JSON.parse(JSON.stringify(f))}},INTERNAL_MODELS:{value:{prefs:e}},hotkeys:{get:function(){return this.prefs?this.prefs.hotkeys:void 0},set:function(a){this.prefs||(this.prefs=new this.INTERNAL_MODELS.prefs),"[object Array]"!==Object.prototype.toString.call(a)&&(a=a.firstKey||a.secondKey||a.description?[a]:[]),this.prefs.hotkeys=a,delete this.hotkeys}},prefs:{get:function(){return!this._prefs&&this.INTERNAL_MODELS.prefs&&"function"==typeof this.INTERNAL_MODELS.prefs&&(this.prefs=new this.INTERNAL_MODELS.prefs(this.defaults.prefs)),this._prefs},set:function(a){if(a!==this._prefs){if(!a)return void delete this._prefs;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.prefs(a)),this._prefs=a}}},appbrand:{get:function(){return this.prefs&&!this.prefs.preferedDashboardType&&"phophlo"===this._appbrand&&(this.debug(" setting preferedDashboardType from user "+this._appbrand),this.prefs.preferedDashboardType="experimenter"),this._appbrand||"lingsync"},set:function(a){a!==this._appbrand&&(this._appbrand?this.warn("appbrand cannot be modified by client side apps."):(a.trim&&(a=a.trim()),this._appbrand=a),this.debug(" setting preferedDashboardType from user "+this._appbrand),this.prefs&&!this.prefs.preferedDashboardType&&"phophlo"===this._appbrand&&(this.prefs._preferedDashboardType="experimenter",this.debug(" it is now "+this.prefs.preferedDashboardType)))}}}),c.User=g},{"./UserMask":56,"./UserPreference":57,"./user.json":58}],56:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=a("MD5"),f=function(a){this._fieldDBtype||(this._fieldDBtype="UserMask"),this.debug("Constructing a UserMask "+a),d.apply(this,arguments)};f.prototype=Object.create(d.prototype,{constructor:{value:f},api:{value:"/users"},buildGravatar:{value:function(a){var b=this._gravatar;return b.indexOf("gravatar.com")>-1?(b=b.replace("https://secure.gravatar.com/avatar/",""),this._gravatar=b):b.indexOf("user_gravatar.png")>-1?this._gravatar="968b8e7fb72b5ffe2915256c28a9414c":a&&(this._gravatar=e(a)),this._gravatar}},defaults:{value:{username:"",firstname:"",lastname:"",email:"",gravatar:"",researchInterests:"",affiliation:"",description:""}},id:{get:function(){return this._username||(this._username=""),this._username},set:function(a){a!==this._username&&(a||(a=""),this._username=a.trim())}},username:{get:function(){return this._username||(this._username=""),this._username},set:function(a){a!==this._username&&(a||(a=""),this._username=a.trim())}},firstname:{configurable:!0,get:function(){return this._firstname||(this._firstname=""),this._firstname},set:function(a){a!==this._firstname&&(a||(a=""),this._firstname=a.trim())}},lastname:{configurable:!0,get:function(){return this._lastname||(this._lastname=""),this._lastname},set:function(a){a!==this._lastname&&(a||(a=""),this._lastname=a.trim())}},gravatar:{get:function(){return this._gravatar||(this._gravatar=""),this._gravatar},set:function(a){a!==this._gravatar&&(a||(a=""),this._gravatar=a.trim())}},email:{get:function(){return this._email||(this._email=""),this._email},set:function(a){if(a!==this._email){a||(a="");var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;b.test(a)&&(this._email=a.trim())}}},affiliation:{get:function(){return this._affiliation||(this._affiliation=""),this._affiliation},set:function(a){a!==this._affiliation&&(a||(a=""),this._affiliation=a.trim())}},researchInterest:{get:function(){return this._researchInterest||(this._researchInterest=""),this._researchInterest},set:function(a){a!==this._researchInterest&&(a||(a=""),this._researchInterest=a.trim())}},description:{get:function(){return this._description||(this._description=""),this._description},set:function(a){a!==this._description&&(a||(a=""),this._description=a.trim())}},name:{configurable:!0,get:function(){this.firstname=this.firstname||"",this.lastname=this.lastname||"";var a=(this.firstname+" "+this.lastname).trim();return a?a:this.anonymousCode||this.username},set:function(a){if(a&&a.indexOf(" ")>-1){var b=a.replace(/ +/g," ").split(" ");b[0]&&(this._firstname=b[0]),b[1]&&(this._lastname=b[1])}}},validateUsername:{value:function(a){if(!a)return{valid:!1,username:null,original:null,suggestion:null};var b=a.toLowerCase().replace(/[^a-z0-9_]/g,""),c={valid:!0,username:a,original:a};return b!==a&&(c.valid=!1,c.suggestion=b,c.username=b),c}}}),c.UserMask=f},{"./../FieldDBObject":4,MD5:59}],57:[function(a,b,c){var d=a("./../FieldDBObject").FieldDBObject,e=a("./../hotkey/HotKeys").HotKeys,f=a("./../unicode/UnicodeSymbols").InsertUnicodes,g=function(a){this._fieldDBtype||(this._fieldDBtype="UserPreference"),this.debug("Constructing UserPreference length: ",a),d.apply(this,arguments)};g.prototype=Object.create(d.prototype,{constructor:{value:g},defaults:{value:{skin:"",numVisibleDatum:2,transparentDashboard:"false",alwaysRandomizeSkin:"true",numberOfItemsInPaginatedViews:10,preferedDashboardLayout:"layoutAllTheData",preferedDashboardType:"fieldlinguistNormalUser"}},INTERNAL_MODELS:{value:{hotkeys:e,unicodes:f}},preferedDashboardType:{get:function(){return this.debug("getting preferedDashboardType "+this._preferedDashboardType),!this._preferedDashboardType&&this.preferedDashboardLayout&&this.debug("getting preferedDashboardType from _preferedDashboardLayout "),this._preferedDashboardType||d.DEFAULT_STRING},set:function(a){if(this.debug("setting _preferedDashboardType from "+a),a!==this._preferedDashboardType){if(!a)return void delete this._preferedDashboardType;a.trim&&(a=a.trim()),this._preferedDashboardType=a}}},preferedDashboardLayout:{get:function(){return this.debug("getting preferedDashboardLayout from "),this._preferedDashboardLayout||d.DEFAULT_STRING},set:function(a){if(this.debug("setting preferedDashboardLayout from "+a),a!==this._preferedDashboardLayout){if(!a)return void delete this._preferedDashboardLayout;this.preferedDashboardType||("layoutAllTheData"===this._preferedDashboardLayout||"layoutJustEntering"===this._preferedDashboardLayout||"layoutWhatsHappening"===this._preferedDashboardLayout?this.preferedDashboardType="fieldlinguistNormalUser":("layoutCompareDataLists"===this._preferedDashboardLayout||"layoutEverythingAtOnce"===this._preferedDashboardLayout)&&(this.preferedDashboardType="fieldlinguistPowerUser")),this._preferedDashboardLayout=a}}},hotkeys:{get:function(){return this._hotkeys||d.DEFAULT_COLLECTION},set:function(a){if(a!==this._hotkeys){if(!a)return void delete this._hotkeys;a.firstKey&&(a=[a]),"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.hotkeys(a)),this._hotkeys=a}}},unicodes:{get:function(){return this._unicodes||d.DEFAULT_COLLECTION},set:function(a){if(a!==this._unicodes){if(!a)return void delete this._unicodes;"[object Array]"===Object.prototype.toString.call(a)&&(a=new this.INTERNAL_MODELS.unicodes(a)),this._unicodes=a}}}}),c.UserPreference=g},{"./../FieldDBObject":4,"./../hotkey/HotKeys":38,"./../unicode/UnicodeSymbols":50}],58:[function(a,b){b.exports={_id:"",jsonType:"user",username:"",email:"",corpuses:[{protocol:"",domain:"",port:"",pouchname:"",path:"",authUrl:"",userFriendlyServerName:"",title:"",corpusid:"",titleAsUrl:"",description:"The details of this corpus are not public."}],activityCouchConnection:{protocol:"",domain:"",port:"",pouchname:"",path:"",authUrl:"",userFriendlyServerName:""},appbrand:"",gravatar:"",appVersionWhenCreated:"1.62.2",authServerVersionWhenCreated:"",authUrl:"",created_at:"",updated_at:"",researchInterest:"",affiliation:"",description:"",subtitle:"",dataLists:[],prefs:{skin:"",numVisibleDatum:"10",transparentDashboard:"false",alwaysRandomizeSkin:"true",numberOfItemsInPaginatedViews:10,unicodes:[{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:" ",tipa:"lambda",useCount:0},{symbol:" ",tipa:"alpha",useCount:0},{symbol:" ",tipa:"\beta",useCount:0},{symbol:"",tipa:"\forall",useCount:0},{symbol:"",tipa:"exists",useCount:0},{symbol:"",tipa:"^{circ}",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0},{symbol:"",tipa:"",useCount:0}],preferedDashboardLayout:"default",showNewDatumAtTopOrBottomOfDataEntryArea:"bottom",hotkeys:[]},mostRecentIds:{corpusid:"",datalistid:"",sessionid:"",couchConnection:{protocol:"",domain:"",port:"",pouchname:"",path:"",authUrl:"",userFriendlyServerName:"",corpusid:""}},firstname:"",lastname:"",sessionHistory:[],hotkeys:{firstKey:"",secondKey:"",description:"",filledWithDefaults:!0},newCorpusConnections:[{protocol:"",domain:"",port:"",pouchname:"",path:"",authUrl:"",userFriendlyServerName:""}],roles:[],authenticated:!0,accessibleDBS:[]}},{}],59:[function(a,b){var c=a("__browserify_Buffer");!function(){var d=a("crypt"),e=a("charenc").utf8,f=a("charenc").bin,g=function(a,b){a.constructor==String?a=b&&"binary"===b.encoding?f.stringToBytes(a):e.stringToBytes(a):"undefined"!=typeof c&&"function"==typeof c.isBuffer&&c.isBuffer(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString());for(var h=d.bytesToWords(a),i=8*a.length,j=1732584193,k=-271733879,l=-1732584194,m=271733878,n=0;n<h.length;n++)h[n]=16711935&(h[n]<<8|h[n]>>>24)|4278255360&(h[n]<<24|h[n]>>>8);h[i>>>5]|=128<<i%32,h[(i+64>>>9<<4)+14]=i;for(var o=g._ff,p=g._gg,q=g._hh,r=g._ii,n=0;n<h.length;n+=16){var s=j,t=k,u=l,v=m;j=o(j,k,l,m,h[n+0],7,-680876936),m=o(m,j,k,l,h[n+1],12,-389564586),l=o(l,m,j,k,h[n+2],17,606105819),k=o(k,l,m,j,h[n+3],22,-1044525330),j=o(j,k,l,m,h[n+4],7,-176418897),m=o(m,j,k,l,h[n+5],12,1200080426),l=o(l,m,j,k,h[n+6],17,-1473231341),k=o(k,l,m,j,h[n+7],22,-45705983),j=o(j,k,l,m,h[n+8],7,1770035416),m=o(m,j,k,l,h[n+9],12,-1958414417),l=o(l,m,j,k,h[n+10],17,-42063),k=o(k,l,m,j,h[n+11],22,-1990404162),j=o(j,k,l,m,h[n+12],7,1804603682),m=o(m,j,k,l,h[n+13],12,-40341101),l=o(l,m,j,k,h[n+14],17,-1502002290),k=o(k,l,m,j,h[n+15],22,1236535329),j=p(j,k,l,m,h[n+1],5,-165796510),m=p(m,j,k,l,h[n+6],9,-1069501632),l=p(l,m,j,k,h[n+11],14,643717713),k=p(k,l,m,j,h[n+0],20,-373897302),j=p(j,k,l,m,h[n+5],5,-701558691),m=p(m,j,k,l,h[n+10],9,38016083),l=p(l,m,j,k,h[n+15],14,-660478335),k=p(k,l,m,j,h[n+4],20,-405537848),j=p(j,k,l,m,h[n+9],5,568446438),m=p(m,j,k,l,h[n+14],9,-1019803690),l=p(l,m,j,k,h[n+3],14,-187363961),k=p(k,l,m,j,h[n+8],20,1163531501),j=p(j,k,l,m,h[n+13],5,-1444681467),m=p(m,j,k,l,h[n+2],9,-51403784),l=p(l,m,j,k,h[n+7],14,1735328473),k=p(k,l,m,j,h[n+12],20,-1926607734),j=q(j,k,l,m,h[n+5],4,-378558),m=q(m,j,k,l,h[n+8],11,-2022574463),l=q(l,m,j,k,h[n+11],16,1839030562),k=q(k,l,m,j,h[n+14],23,-35309556),j=q(j,k,l,m,h[n+1],4,-1530992060),m=q(m,j,k,l,h[n+4],11,1272893353),l=q(l,m,j,k,h[n+7],16,-155497632),k=q(k,l,m,j,h[n+10],23,-1094730640),j=q(j,k,l,m,h[n+13],4,681279174),m=q(m,j,k,l,h[n+0],11,-358537222),l=q(l,m,j,k,h[n+3],16,-722521979),k=q(k,l,m,j,h[n+6],23,76029189),j=q(j,k,l,m,h[n+9],4,-640364487),m=q(m,j,k,l,h[n+12],11,-421815835),l=q(l,m,j,k,h[n+15],16,530742520),k=q(k,l,m,j,h[n+2],23,-995338651),j=r(j,k,l,m,h[n+0],6,-198630844),m=r(m,j,k,l,h[n+7],10,1126891415),l=r(l,m,j,k,h[n+14],15,-1416354905),k=r(k,l,m,j,h[n+5],21,-57434055),j=r(j,k,l,m,h[n+12],6,1700485571),m=r(m,j,k,l,h[n+3],10,-1894986606),l=r(l,m,j,k,h[n+10],15,-1051523),k=r(k,l,m,j,h[n+1],21,-2054922799),j=r(j,k,l,m,h[n+8],6,1873313359),m=r(m,j,k,l,h[n+15],10,-30611744),l=r(l,m,j,k,h[n+6],15,-1560198380),k=r(k,l,m,j,h[n+13],21,1309151649),j=r(j,k,l,m,h[n+4],6,-145523070),m=r(m,j,k,l,h[n+11],10,-1120210379),l=r(l,m,j,k,h[n+2],15,718787259),k=r(k,l,m,j,h[n+9],21,-343485551),j=j+s>>>0,k=k+t>>>0,l=l+u>>>0,m=m+v>>>0}return d.endian([j,k,l,m])};g._ff=function(a,b,c,d,e,f,g){var h=a+(b&c|~b&d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._gg=function(a,b,c,d,e,f,g){var h=a+(b&d|c&~d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._hh=function(a,b,c,d,e,f,g){var h=a+(b^c^d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._ii=function(a,b,c,d,e,f,g){var h=a+(c^(b|~d))+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._blocksize=16,g._digestsize=16,b.exports=function(a,b){if("undefined"!=typeof a){var c=d.wordsToBytes(g(a,b));return b&&b.asBytes?c:b&&b.asString?f.bytesToString(c):d.bytesToHex(c)}}}()},{__browserify_Buffer:63,charenc:60,crypt:61}],60:[function(a,b){var c={utf8:{stringToBytes:function(a){return c.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(c.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b},bytesToString:function(a){for(var b=[],c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));return b.join("")}}};b.exports=c},{}],61:[function(a,b){!function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c={rotl:function(a,b){return a<<b|a>>>32-b},rotr:function(a,b){return a<<32-b|a>>>b},endian:function(a){if(a.constructor==Number)return 16711935&c.rotl(a,8)|4278255360&c.rotl(a,24);for(var b=0;b<a.length;b++)a[b]=c.endian(a[b]);return a},randomBytes:function(a){for(var b=[];a>0;a--)b.push(Math.floor(256*Math.random()));return b},bytesToWords:function(a){for(var b=[],c=0,d=0;c<a.length;c++,d+=8)b[d>>>5]|=a[c]<<24-d%32;return b},wordsToBytes:function(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b},bytesToHex:function(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")},hexToBytes:function(a){for(var b=[],c=0;c<a.length;c+=2)b.push(parseInt(a.substr(c,2),16));return b},bytesToBase64:function(b){for(var c=[],d=0;d<b.length;d+=3)for(var e=b[d]<<16|b[d+1]<<8|b[d+2],f=0;4>f;f++)c.push(8*d+6*f<=8*b.length?a.charAt(e>>>6*(3-f)&63):"=");return c.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/gi,"");for(var c=[],d=0,e=0;d<b.length;e=++d%4)0!=e&&c.push((a.indexOf(b.charAt(d-1))&Math.pow(2,-2*e+8)-1)<<2*e|a.indexOf(b.charAt(d))>>>6-2*e);return c}};b.exports=c}()},{}],62:[function(a,b){var c=a("__browserify_Buffer");!function(){"use strict";function a(a){return new c(a,"base64").toString("binary")}b.exports=a}()},{__browserify_Buffer:63}],63:[function(a,b){a=function c(b,d,e){function f(h,i){if(!d[h]){if(!b[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);throw new Error("Cannot find module '"+h+"'")}var k=d[h]={exports:{}};b[h][0].call(k.exports,function(a){var c=b[h][1][a];return f(c?c:a)},k,k.exports,c,b,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({PcZj9L:[function(a,b,c){function d(a,b){var c=typeof a;if("base64"===b&&"string"===c)for(a=ib(a);a.length%4!==0;)a+="=";var e;if("number"===c)e=nb(a);else if("string"===c)e=d.byteLength(a,b);else{if("object"!==c)throw new Error("First argument needs to be a number, array or string.");e=nb(a.length)}var f=lb(new Cb(e));if(d.isBuffer(a))f.set(a);else if(ob(a))for(var g=0;e>g;g++)f[g]=d.isBuffer(a)?a.readUInt8(g):a[g];else"string"===c&&f.write(a,0,b);return f}function e(a,b,c,e){c=Number(c)||0;var f=a.length-c;e?(e=Number(e),e>f&&(e=f)):e=f;var g=b.length;if(g%2!==0)throw new Error("Invalid hex string");e>g/2&&(e=g/2);for(var h=0;e>h;h++){var i=parseInt(b.substr(2*h,2),16);if(isNaN(i))throw new Error("Invalid hex string");a[c+h]=i}return d._charsWritten=2*h,h}function f(a,b,c,e){return d._charsWritten=tb(qb(b),a,c,e)}function g(a,b,c,e){return d._charsWritten=tb(rb(b),a,c,e)}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,e){return d._charsWritten=tb(sb(b),a,c,e)}function j(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var j=d;d=b,b=c,c=j}b=Number(b)||0;var k=this.length-b;switch(c?(c=Number(c),c>k&&(c=k)):c=k,d=String(d||"utf8").toLowerCase()){case"hex":return e(this,a,b,c);case"utf8":case"utf-8":return f(this,a,b,c);case"ascii":return g(this,a,b,c);case"binary":return h(this,a,b,c);case"base64":return i(this,a,b,c);default:throw new Error("Unknown encoding")}}function k(a,b,c){var d=this instanceof kb?this._proxy:this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,c=void 0!==c?Number(c):c=d.length,c===b)return"";switch(a){case"hex":return r(d,b,c);case"utf8":case"utf-8":return o(d,b,c);case"ascii":return p(d,b,c);case"binary":return q(d,b,c);case"base64":return n(d,b,c);default:throw new Error("Unknown encoding")}}function l(){return{type:"Buffer",data:Array.prototype.slice.call(this,0)}}function m(a,b,c,d){var e=this;if(c||(c=0),d||0===d||(d=this.length),b||(b=0),d!==c&&0!==a.length&&0!==e.length){if(c>d)throw new Error("sourceEnd < sourceStart");if(0>b||b>=a.length)throw new Error("targetStart out of bounds");if(0>c||c>=e.length)throw new Error("sourceStart out of bounds");if(0>d||d>e.length)throw new Error("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);for(var f=0;d-c>f;f++)a[f+b]=this[f+c]}}function n(b,c,d){var e=b.slice(c,d);return a("base64-js").fromByteArray(e)}function o(a,b,c){for(var d=a.slice(b,c),e="",f="",g=0;g<d.length;)d[g]<=127?(e+=ub(f)+String.fromCharCode(d[g]),f=""):f+="%"+d[g].toString(16),g++;return e+ub(f)}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f++)e+=String.fromCharCode(d[f]);return e}function q(a,b,c){return p(a,b,c)}function r(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=pb(a[f]);return e}function s(a,b){var c=this.length;return a=mb(a,c,0),b=mb(b,c,c),lb(this.subarray(a,b))}function t(a,b){var c=this;return b||(yb(void 0!==a&&null!==a,"missing offset"),yb(a<c.length,"Trying to read beyond buffer length")),a>=c.length?void 0:c[a]}function u(a,b,c,d){d||(yb("boolean"==typeof c,"missing or invalid endian"),yb(void 0!==b&&null!==b,"missing offset"),yb(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){if(b+1===e){var f=new Ab(new Bb(2));return f.setUint8(0,a[e-1]),f.getUint16(0,c)}return a._dataview.getUint16(b,c)}}function v(a,b){return u(this,a,!0,b)}function w(a,b){return u(this,a,!1,b)}function x(a,b,c,d){d||(yb("boolean"==typeof c,"missing or invalid endian"),yb(void 0!==b&&null!==b,"missing offset"),yb(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){if(b+3>=e){for(var f=new Ab(new Bb(4)),g=0;e>g+b;g++)f.setUint8(g,a[g+b]);return f.getUint32(0,c)}return a._dataview.getUint32(b,c)}}function y(a,b){return x(this,a,!0,b)}function z(a,b){return x(this,a,!1,b)}function A(a,b){var c=this;return b||(yb(void 0!==a&&null!==a,"missing offset"),yb(a<c.length,"Trying to read beyond buffer length")),a>=c.length?void 0:c._dataview.getInt8(a)}function B(a,b,c,d){d||(yb("boolean"==typeof c,"missing or invalid endian"),yb(void 0!==b&&null!==b,"missing offset"),yb(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){if(b+1===e){var f=new Ab(new Bb(2));return f.setUint8(0,a[e-1]),f.getInt16(0,c)}return a._dataview.getInt16(b,c)}}function C(a,b){return B(this,a,!0,b)}function D(a,b){return B(this,a,!1,b)}function E(a,b,c,d){d||(yb("boolean"==typeof c,"missing or invalid endian"),yb(void 0!==b&&null!==b,"missing offset"),yb(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){if(b+3>=e){for(var f=new Ab(new Bb(4)),g=0;e>g+b;g++)f.setUint8(g,a[g+b]);return f.getInt32(0,c)}return a._dataview.getInt32(b,c)}}function F(a,b){return E(this,a,!0,b)}function G(a,b){return E(this,a,!1,b)}function H(a,b,c,d){return d||(yb("boolean"==typeof c,"missing or invalid endian"),yb(b+3<a.length,"Trying to read beyond buffer length")),a._dataview.getFloat32(b,c)}function I(a,b){return H(this,a,!0,b)}function J(a,b){return H(this,a,!1,b)}function K(a,b,c,d){return d||(yb("boolean"==typeof c,"missing or invalid endian"),yb(b+7<a.length,"Trying to read beyond buffer length")),a._dataview.getFloat64(b,c)}function L(a,b){return K(this,a,!0,b)}function M(a,b){return K(this,a,!1,b)}function N(a,b,c){var d=this;c||(yb(void 0!==a&&null!==a,"missing value"),yb(void 0!==b&&null!==b,"missing offset"),yb(b<d.length,"trying to write beyond buffer length"),vb(a,255)),b>=d.length||(d[b]=a)}function O(a,b,c,d,e){e||(yb(void 0!==b&&null!==b,"missing value"),yb("boolean"==typeof d,"missing or invalid endian"),yb(void 0!==c&&null!==c,"missing offset"),yb(c+1<a.length,"trying to write beyond buffer length"),vb(b,65535));var f=a.length;if(!(c>=f))if(c+1===f){var g=new Ab(new Bb(2));g.setUint16(0,b,d),a[c]=g.getUint8(0)}else a._dataview.setUint16(c,b,d)}function P(a,b,c){O(this,a,b,!0,c)}function Q(a,b,c){O(this,a,b,!1,c)}function R(a,b,c,d,e){e||(yb(void 0!==b&&null!==b,"missing value"),yb("boolean"==typeof d,"missing or invalid endian"),yb(void 0!==c&&null!==c,"missing offset"),yb(c+3<a.length,"trying to write beyond buffer length"),vb(b,4294967295));var f=a.length;if(!(c>=f))if(c+3>=f){var g=new Ab(new Bb(4));g.setUint32(0,b,d);for(var h=0;f>h+c;h++)a[h+c]=g.getUint8(h)}else a._dataview.setUint32(c,b,d)}function S(a,b,c){R(this,a,b,!0,c)}function T(a,b,c){R(this,a,b,!1,c)}function U(a,b,c){var d=this;c||(yb(void 0!==a&&null!==a,"missing value"),yb(void 0!==b&&null!==b,"missing offset"),yb(b<d.length,"Trying to write beyond buffer length"),wb(a,127,-128)),b>=d.length||d._dataview.setInt8(b,a)}function V(a,b,c,d,e){e||(yb(void 0!==b&&null!==b,"missing value"),yb("boolean"==typeof d,"missing or invalid endian"),yb(void 0!==c&&null!==c,"missing offset"),yb(c+1<a.length,"Trying to write beyond buffer length"),wb(b,32767,-32768));var f=a.length;if(!(c>=f))if(c+1===f){var g=new Ab(new Bb(2));g.setInt16(0,b,d),a[c]=g.getUint8(0)}else a._dataview.setInt16(c,b,d)}function W(a,b,c){V(this,a,b,!0,c)}function X(a,b,c){V(this,a,b,!1,c)}function Y(a,b,c,d,e){e||(yb(void 0!==b&&null!==b,"missing value"),yb("boolean"==typeof d,"missing or invalid endian"),yb(void 0!==c&&null!==c,"missing offset"),yb(c+3<a.length,"Trying to write beyond buffer length"),wb(b,2147483647,-2147483648));var f=a.length;if(!(c>=f))if(c+3>=f){var g=new Ab(new Bb(4));g.setInt32(0,b,d);for(var h=0;f>h+c;h++)a[h+c]=g.getUint8(h)}else a._dataview.setInt32(c,b,d)}function Z(a,b,c){Y(this,a,b,!0,c)}function $(a,b,c){Y(this,a,b,!1,c)}function _(a,b,c,d,e){e||(yb(void 0!==b&&null!==b,"missing value"),yb("boolean"==typeof d,"missing or invalid endian"),yb(void 0!==c&&null!==c,"missing offset"),yb(c+3<a.length,"Trying to write beyond buffer length"),xb(b,3.4028234663852886e38,-3.4028234663852886e38));var f=a.length;if(!(c>=f))if(c+3>=f){var g=new Ab(new Bb(4));g.setFloat32(0,b,d);for(var h=0;f>h+c;h++)a[h+c]=g.getUint8(h)}else a._dataview.setFloat32(c,b,d)}function ab(a,b,c){_(this,a,b,!0,c)}function bb(a,b,c){_(this,a,b,!1,c)}function cb(a,b,c,d,e){e||(yb(void 0!==b&&null!==b,"missing value"),yb("boolean"==typeof d,"missing or invalid endian"),yb(void 0!==c&&null!==c,"missing offset"),yb(c+7<a.length,"Trying to write beyond buffer length"),xb(b,1.7976931348623157e308,-1.7976931348623157e308));var f=a.length;if(!(c>=f))if(c+7>=f){var g=new Ab(new Bb(8));g.setFloat64(0,b,d);for(var h=0;f>h+c;h++)a[h+c]=g.getUint8(h)}else a._dataview.setFloat64(c,b,d)}function db(a,b,c){cb(this,a,b,!0,c)}function eb(a,b,c){cb(this,a,b,!1,c)}function fb(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),"string"==typeof a&&(a=a.charCodeAt(0)),"number"!=typeof a||isNaN(a))throw new Error("value is not a number");if(b>c)throw new Error("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new Error("start out of bounds");if(0>c||c>this.length)throw new Error("end out of bounds");for(var d=b;c>d;d++)this[d]=a}}function gb(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=pb(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"}function hb(){return new d(this).buffer}function ib(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function jb(){var a=new Cb(0);a.foo=function(){return 42};try{return 42===a.foo()}catch(b){return!1}}function kb(a){this._arr=a,0!==a.byteLength&&(this._dataview=new Ab(a.buffer,a.byteOffset,a.byteLength))}function lb(a){if(void 0===Db&&(Db=jb()),Db)return a.write=j,a.toString=k,a.toLocaleString=k,a.toJSON=l,a.copy=m,a.slice=s,a.readUInt8=t,a.readUInt16LE=v,a.readUInt16BE=w,a.readUInt32LE=y,a.readUInt32BE=z,a.readInt8=A,a.readInt16LE=C,a.readInt16BE=D,a.readInt32LE=F,a.readInt32BE=G,a.readFloatLE=I,a.readFloatBE=J,a.readDoubleLE=L,a.readDoubleBE=M,a.writeUInt8=N,a.writeUInt16LE=P,a.writeUInt16BE=Q,a.writeUInt32LE=S,a.writeUInt32BE=T,a.writeInt8=U,a.writeInt16LE=W,a.writeInt16BE=X,a.writeInt32LE=Z,a.writeInt32BE=$,a.writeFloatLE=ab,a.writeFloatBE=bb,a.writeDoubleLE=db,a.writeDoubleBE=eb,a.fill=fb,a.inspect=gb,a.toArrayBuffer=hb,a._isBuffer=!0,0!==a.byteLength&&(a._dataview=new Ab(a.buffer,a.byteOffset,a.byteLength)),a;var b=new kb(a),c=new Proxy(b,Eb);return b._proxy=c,c}function mb(a,b,c){return"number"!=typeof a?c:(a=~~a,a>=b?b:a>=0?a:(a+=b,a>=0?a:0))}function nb(a){return a=~~Math.ceil(+a),0>a?0:a}function ob(a){return Array.isArray(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function pb(a){return 16>a?"0"+a.toString(16):a.toString(16)}function qb(a){for(var b=[],c=0;c<a.length;c++)if(a.charCodeAt(c)<=127)b.push(a.charCodeAt(c));else for(var d=encodeURIComponent(a.charAt(c)).substr(1).split("%"),e=0;e<d.length;e++)b.push(parseInt(d[e],16));return b}function rb(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function sb(b){return a("base64-js").toByteArray(b)}function tb(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);)b[e+c]=a[e],e++;return e}function ub(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function vb(a,b){yb("number"==typeof a,"cannot write a non-number as a number"),yb(a>=0,"specified a negative value for writing an unsigned value"),yb(b>=a,"value is larger than maximum value for type"),yb(Math.floor(a)===a,"value has a fractional component")}function wb(a,b,c){yb("number"==typeof a,"cannot write a non-number as a number"),yb(b>=a,"value larger than maximum allowed value"),yb(a>=c,"value smaller than minimum allowed value"),yb(Math.floor(a)===a,"value has a fractional component")}function xb(a,b,c){yb("number"==typeof a,"cannot write a non-number as a number"),yb(b>=a,"value larger than maximum allowed value"),yb(a>=c,"value smaller than minimum allowed value")}function yb(a,b){if(!a)throw new Error(b||"Failed assertion")}var zb=a("typedarray"),Ab="undefined"==typeof DataView?zb.DataView:DataView,Bb="undefined"==typeof ArrayBuffer?zb.ArrayBuffer:ArrayBuffer,Cb="undefined"==typeof Uint8Array?zb.Uint8Array:Uint8Array;c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192;var Db;d.isEncoding=function(a){switch((a+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},d.isBuffer=function(a){return a&&a._isBuffer},d.byteLength=function(a,b){switch(b||"utf8"){case"hex":return a.length/2;case"utf8":case"utf-8":return qb(a).length;case"ascii":case"binary":return a.length;case"base64":return sb(a).length;default:throw new Error("Unknown encoding")}},d.concat=function(a,b){if(!Array.isArray(a))throw new Error("Usage: Buffer.concat(list, [totalLength])\nlist should be an Array.");var c,e;if(0===a.length)return new d(0);if(1===a.length)return a[0];if("number"!=typeof b)for(b=0,c=0;c<a.length;c++)e=a[c],b+=e.length;var f=new d(b),g=0;for(c=0;c<a.length;c++)e=a[c],e.copy(f,g),g+=e.length;return f},kb.prototype.write=j,kb.prototype.toString=k,kb.prototype.toLocaleString=k,kb.prototype.toJSON=l,kb.prototype.copy=m,kb.prototype.slice=s,kb.prototype.readUInt8=t,kb.prototype.readUInt16LE=v,kb.prototype.readUInt16BE=w,kb.prototype.readUInt32LE=y,kb.prototype.readUInt32BE=z,kb.prototype.readInt8=A,kb.prototype.readInt16LE=C,kb.prototype.readInt16BE=D,kb.prototype.readInt32LE=F,kb.prototype.readInt32BE=G,kb.prototype.readFloatLE=I,kb.prototype.readFloatBE=J,kb.prototype.readDoubleLE=L,kb.prototype.readDoubleBE=M,kb.prototype.writeUInt8=N,kb.prototype.writeUInt16LE=P,kb.prototype.writeUInt16BE=Q,kb.prototype.writeUInt32LE=S,kb.prototype.writeUInt32BE=T,kb.prototype.writeInt8=U,kb.prototype.writeInt16LE=W,kb.prototype.writeInt16BE=X,kb.prototype.writeInt32LE=Z,kb.prototype.writeInt32BE=$,kb.prototype.writeFloatLE=ab,kb.prototype.writeFloatBE=bb,kb.prototype.writeDoubleLE=db,kb.prototype.writeDoubleBE=eb,kb.prototype.fill=fb,kb.prototype.inspect=gb,kb.prototype.toArrayBuffer=hb,kb.prototype._isBuffer=!0,kb.prototype.subarray=function(){return this._arr.subarray.apply(this._arr,arguments)},kb.prototype.set=function(){return this._arr.set.apply(this._arr,arguments)};var Eb={get:function(a,b){return b in a?a[b]:a._arr[b]},set:function(a,b,c){a._arr[b]=c}}},{"base64-js":3,typedarray:4}],"native-buffer-browserify":[function(a,b){b.exports=a("PcZj9L")},{}],3:[function(a,b){!function(){"use strict";function a(a){var b,c,e,f,g,h;if(a.length%4>0)throw"Invalid string. Length must be a multiple of 4";for(g=a.indexOf("="),g=g>0?a.length-g:0,h=[],e=g>0?a.length-4:a.length,b=0,c=0;e>b;b+=4,c+=3)f=d.indexOf(a[b])<<18|d.indexOf(a[b+1])<<12|d.indexOf(a[b+2])<<6|d.indexOf(a[b+3]),h.push((16711680&f)>>16),h.push((65280&f)>>8),h.push(255&f);
return 2===g?(f=d.indexOf(a[b])<<2|d.indexOf(a[b+1])>>4,h.push(255&f)):1===g&&(f=d.indexOf(a[b])<<10|d.indexOf(a[b+1])<<4|d.indexOf(a[b+2])>>2,h.push(f>>8&255),h.push(255&f)),h}function c(a){function b(a){return d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[63&a]}var c,e,f,g=a.length%3,h="";for(c=0,f=a.length-g;f>c;c+=3)e=(a[c]<<16)+(a[c+1]<<8)+a[c+2],h+=b(e);switch(g){case 1:e=a[a.length-1],h+=d[e>>2],h+=d[e<<4&63],h+="==";break;case 2:e=(a[a.length-2]<<8)+a[a.length-1],h+=d[e>>10],h+=d[e>>4&63],h+=d[e<<2&63],h+="="}return h}var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";b.exports.toByteArray=a,b.exports.fromByteArray=c}()},{}],4:[function(a,b,c){function d(a){if(L&&K){var b,c=L(a);for(b=0;b<c.length;b+=1)K(a,c[b],{value:a[c[b]],writable:!1,enumerable:!1,configurable:!1})}}function e(a){function b(b){K(a,b,{get:function(){return a._getter(b)},set:function(c){a._setter(b,c)},enumerable:!0,configurable:!1})}if(K){if(a.length>B)throw new RangeError("Array too large for polyfill");var c;for(c=0;c<a.length;c+=1)b(c)}}function f(a,b){var c=32-b;return a<<c>>c}function g(a,b){var c=32-b;return a<<c>>>c}function h(a){return[255&a]}function i(a){return f(a[0],8)}function j(a){return[255&a]}function k(a){return g(a[0],8)}function l(a){return a=J(Number(a)),[0>a?0:a>255?255:255&a]}function m(a){return[a>>8&255,255&a]}function n(a){return f(a[0]<<8|a[1],16)}function o(a){return[a>>8&255,255&a]}function p(a){return g(a[0]<<8|a[1],16)}function q(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function r(a){return f(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function s(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function t(a){return g(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function u(a,b,c){function d(a){var b=F(a),c=a-b;return.5>c?b:c>.5?b+1:b%2?b+1:b}var e,f,g,h,i,j,k,l=(1<<b-1)-1;for(a!==a?(f=(1<<b)-1,g=I(2,c-1),e=0):1/0===a||a===-1/0?(f=(1<<b)-1,g=0,e=0>a?1:0):0===a?(f=0,g=0,e=1/a===-1/0?1:0):(e=0>a,a=E(a),a>=I(2,1-l)?(f=H(F(G(a)/D),1023),g=d(a/I(2,f)*I(2,c)),g/I(2,c)>=2&&(f+=1,g=1),f>l?(f=(1<<b)-1,g=0):(f+=l,g-=I(2,c))):(f=0,g=d(a/I(2,1-l-c)))),i=[],h=c;h;h-=1)i.push(g%2?1:0),g=F(g/2);for(h=b;h;h-=1)i.push(f%2?1:0),f=F(f/2);for(i.push(e?1:0),i.reverse(),j=i.join(""),k=[];j.length;)k.push(parseInt(j.substring(0,8),2)),j=j.substring(8);return k}function v(a,b,c){var d,e,f,g,h,i,j,k,l=[];for(d=a.length;d;d-=1)for(f=a[d-1],e=8;e;e-=1)l.push(f%2?1:0),f>>=1;return l.reverse(),g=l.join(""),h=(1<<b-1)-1,i=parseInt(g.substring(0,1),2)?-1:1,j=parseInt(g.substring(1,1+b),2),k=parseInt(g.substring(1+b),2),j===(1<<b)-1?0!==k?0/0:1/0*i:j>0?i*I(2,j-h)*(1+k/I(2,c)):0!==k?i*I(2,-(h-1))*(k/I(2,c)):0>i?-0:0}function w(a){return v(a,11,52)}function x(a){return u(a,11,52)}function y(a){return v(a,8,23)}function z(a){return u(a,8,23)}var A=void 0,B=1e5,C=function(){var a=Object.prototype.toString,b=Object.prototype.hasOwnProperty;return{Class:function(b){return a.call(b).replace(/^\[object *|\]$/g,"")},HasProperty:function(a,b){return b in a},HasOwnProperty:function(a,c){return b.call(a,c)},IsCallable:function(a){return"function"==typeof a},ToInt32:function(a){return a>>0},ToUint32:function(a){return a>>>0}}}(),D=Math.LN2,E=Math.abs,F=Math.floor,G=Math.log,H=Math.min,I=Math.pow,J=Math.round,K=Object.defineProperty||function(a,b,c){if(!a===Object(a))throw new TypeError("Object.defineProperty called on non-object");return C.HasProperty(c,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(a,b,c.get),C.HasProperty(c,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(a,b,c.set),C.HasProperty(c,"value")&&(a[b]=c.value),a},L=Object.getOwnPropertyNames||function(a){if(a!==Object(a))throw new TypeError("Object.getOwnPropertyNames called on non-object");var b,c=[];for(b in a)C.HasOwnProperty(a,b)&&c.push(b);return c};!function(){function a(a,c,g){var h;return h=function(a,c,f){var g,i,j,k;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===h)for(g=arguments[0],this.length=g.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new b(this.byteLength),this.byteOffset=0,j=0;j<this.length;j+=1)this._setter(j,g._getter(j));else if("object"!=typeof arguments[0]||(arguments[0]instanceof b||"ArrayBuffer"===C.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof b||"ArrayBuffer"===C.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=a,this.byteOffset=C.ToUint32(c),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=C.ToUint32(f),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(i=arguments[0],this.length=C.ToUint32(i.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new b(this.byteLength),this.byteOffset=0,j=0;j<this.length;j+=1)k=i[j],this._setter(j,Number(k));else{if(this.length=C.ToInt32(arguments[0]),0>f)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new b(this.byteLength),this.byteOffset=0}this.constructor=h,d(this),e(this)},h.prototype=new f,h.prototype.BYTES_PER_ELEMENT=a,h.prototype._pack=c,h.prototype._unpack=g,h.BYTES_PER_ELEMENT=a,h.prototype._getter=function(a){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if(a=C.ToUint32(a),a>=this.length)return A;var b,c,d=[];for(b=0,c=this.byteOffset+a*this.BYTES_PER_ELEMENT;b<this.BYTES_PER_ELEMENT;b+=1,c+=1)d.push(this.buffer._bytes[c]);return this._unpack(d)},h.prototype.get=h.prototype._getter,h.prototype._setter=function(a,b){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if(a=C.ToUint32(a),a>=this.length)return A;var c,d,e=this._pack(b);for(c=0,d=this.byteOffset+a*this.BYTES_PER_ELEMENT;c<this.BYTES_PER_ELEMENT;c+=1,d+=1)this.buffer._bytes[d]=e[c]},h.prototype.set=function(){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var a,b,c,d,e,f,g,h,i,j;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(a=arguments[0],c=C.ToUint32(arguments[1]),c+a.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(h=this.byteOffset+c*this.BYTES_PER_ELEMENT,i=a.length*this.BYTES_PER_ELEMENT,a.buffer===this.buffer){for(j=[],e=0,f=a.byteOffset;i>e;e+=1,f+=1)j[e]=a.buffer._bytes[f];for(e=0,g=h;i>e;e+=1,g+=1)this.buffer._bytes[g]=j[e]}else for(e=0,f=a.byteOffset,g=h;i>e;e+=1,f+=1,g+=1)this.buffer._bytes[g]=a.buffer._bytes[f]}else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(b=arguments[0],d=C.ToUint32(b.length),c=C.ToUint32(arguments[1]),c+d>this.length)throw new RangeError("Offset plus length of array is out of range");for(e=0;d>e;e+=1)f=b[e],this._setter(c+e,Number(f))}},h.prototype.subarray=function(a,b){function c(a,b,c){return b>a?b:a>c?c:a}a=C.ToInt32(a),b=C.ToInt32(b),arguments.length<1&&(a=0),arguments.length<2&&(b=this.length),0>a&&(a=this.length+a),0>b&&(b=this.length+b),a=c(a,0,this.length),b=c(b,0,this.length);var d=b-a;return 0>d&&(d=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d)},h}var b=function(a){if(a=C.ToInt32(a),0>a)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=a,this._bytes=[],this._bytes.length=a;var b;for(b=0;b<this.byteLength;b+=1)this._bytes[b]=0;d(this)};c.ArrayBuffer=c.ArrayBuffer||b;var f=function(){},g=a(1,h,i),u=a(1,j,k),v=a(1,l,k),B=a(2,m,n),D=a(2,o,p),E=a(4,q,r),F=a(4,s,t),G=a(4,z,y),H=a(8,x,w);c.Int8Array=c.Int8Array||g,c.Uint8Array=c.Uint8Array||u,c.Uint8ClampedArray=c.Uint8ClampedArray||v,c.Int16Array=c.Int16Array||B,c.Uint16Array=c.Uint16Array||D,c.Int32Array=c.Int32Array||E,c.Uint32Array=c.Uint32Array||F,c.Float32Array=c.Float32Array||G,c.Float64Array=c.Float64Array||H}(),function(){function a(a,b){return C.IsCallable(a.get)?a.get(b):a[b]}function b(b){return function(c,d){if(c=C.ToUint32(c),c+b.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");c+=this.byteOffset;var e,g=new Uint8Array(this.buffer,c,b.BYTES_PER_ELEMENT),h=[];for(e=0;e<b.BYTES_PER_ELEMENT;e+=1)h.push(a(g,e));return Boolean(d)===Boolean(f)&&h.reverse(),a(new b(new Uint8Array(h).buffer),0)}}function e(b){return function(c,d,e){if(c=C.ToUint32(c),c+b.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var g,h,i=new b([d]),j=new Uint8Array(i.buffer),k=[];for(g=0;g<b.BYTES_PER_ELEMENT;g+=1)k.push(a(j,g));Boolean(e)===Boolean(f)&&k.reverse(),h=new Uint8Array(this.buffer,c,b.BYTES_PER_ELEMENT),h.set(k)}}var f=function(){var b=new c.Uint16Array([4660]),d=new c.Uint8Array(b.buffer);return 18===a(d,0)}(),g=function(a,b,c){if(0===arguments.length)a=new ArrayBuffer(0);else if(!(a instanceof ArrayBuffer||"ArrayBuffer"===C.Class(a)))throw new TypeError("TypeError");if(this.buffer=a||new ArrayBuffer(0),this.byteOffset=C.ToUint32(b),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteLength=arguments.length<3?this.buffer.byteLength-this.byteOffset:C.ToUint32(c),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");d(this)};g.prototype.getUint8=b(c.Uint8Array),g.prototype.getInt8=b(c.Int8Array),g.prototype.getUint16=b(c.Uint16Array),g.prototype.getInt16=b(c.Int16Array),g.prototype.getUint32=b(c.Uint32Array),g.prototype.getInt32=b(c.Int32Array),g.prototype.getFloat32=b(c.Float32Array),g.prototype.getFloat64=b(c.Float64Array),g.prototype.setUint8=e(c.Uint8Array),g.prototype.setInt8=e(c.Int8Array),g.prototype.setUint16=e(c.Uint16Array),g.prototype.setInt16=e(c.Int16Array),g.prototype.setUint32=e(c.Uint32Array),g.prototype.setInt32=e(c.Int32Array),g.prototype.setFloat32=e(c.Float32Array),g.prototype.setFloat64=e(c.Float64Array),c.DataView=c.DataView||g}()},{}]},{},[]),b.exports=a("native-buffer-browserify").Buffer},{}],64:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],65:[function(a,b){var c=a("__browserify_Buffer");!function(){"use strict";function a(a){var b;return b=a instanceof c?a:new c(a.toString(),"binary"),b.toString("base64")}b.exports=a}()},{__browserify_Buffer:63}],66:[function(a,b,c){!function(d,e){"object"==typeof c?b.exports=c=e(a("./core"),a("./enc-base64"),a("./md5"),a("./evpkdf"),a("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(d.CryptoJS)}(this,function(a){return function(){var b=a,c=b.lib,d=c.BlockCipher,e=b.algo,f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[];!function(){for(var a=[],b=0;256>b;b++)a[b]=128>b?b<<1:b<<1^283;for(var c=0,d=0,b=0;256>b;b++){var e=d^d<<1^d<<2^d<<3^d<<4;e=e>>>8^255&e^99,f[c]=e,g[e]=c;var p=a[c],q=a[p],r=a[q],s=257*a[e]^16843008*e;h[c]=s<<24|s>>>8,i[c]=s<<16|s>>>16,j[c]=s<<8|s>>>24,k[c]=s;var s=16843009*r^65537*q^257*p^16843008*c;l[e]=s<<24|s>>>8,m[e]=s<<16|s>>>16,n[e]=s<<8|s>>>24,o[e]=s,c?(c=p^a[a[a[r^p]]],d^=a[a[d]]):c=d=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],q=e.AES=d.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,d=this._nRounds=c+6,e=4*(d+1),g=this._keySchedule=[],h=0;e>h;h++)if(c>h)g[h]=b[h];else{var i=g[h-1];h%c?c>6&&h%c==4&&(i=f[i>>>24]<<24|f[i>>>16&255]<<16|f[i>>>8&255]<<8|f[255&i]):(i=i<<8|i>>>24,i=f[i>>>24]<<24|f[i>>>16&255]<<16|f[i>>>8&255]<<8|f[255&i],i^=p[h/c|0]<<24),g[h]=g[h-c]^i}for(var j=this._invKeySchedule=[],k=0;e>k;k++){var h=e-k;if(k%4)var i=g[h];else var i=g[h-4];j[k]=4>k||4>=h?i:l[f[i>>>24]]^m[f[i>>>16&255]]^n[f[i>>>8&255]]^o[f[255&i]]}},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,h,i,j,k,f)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,l,m,n,o,g);var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;i>o;o++){var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],s=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++];j=p,k=q,l=r,m=s}var p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],s=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++];a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=s},keySize:8});b.AES=d._createHelper(q)}(),a.AES})},{"./cipher-core":67,"./core":68,"./enc-base64":69,"./evpkdf":71,"./md5":73}],67:[function(a,b,c){!function(d,e){"object"==typeof c?b.exports=c=e(a("./core")):"function"==typeof define&&define.amd?define(["./core"],e):e(d.CryptoJS)}(this,function(a){a.lib.Cipher||function(b){var c=a,d=c.lib,e=d.Base,f=d.WordArray,g=d.BufferedBlockAlgorithm,h=c.enc,i=(h.Utf8,h.Base64),j=c.algo,k=j.EvpKDF,l=d.Cipher=g.extend({cfg:e.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function a(a){return"string"==typeof a?x:u}return function(b){return{encrypt:function(c,d,e){return a(d).encrypt(b,c,d,e)},decrypt:function(c,d,e){return a(d).decrypt(b,c,d,e)}}}}()}),m=(d.StreamCipher=l.extend({_doFinalize:function(){var a=this._process(!0);return a},blockSize:1}),c.mode={}),n=d.BlockCipherMode=e.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}}),o=m.CBC=function(){function a(a,c,d){var e=this._iv;if(e){var f=e;this._iv=b}else var f=this._prevBlock;for(var g=0;d>g;g++)a[c+g]^=f[g]}var c=n.extend();return c.Encryptor=c.extend({processBlock:function(b,c){var d=this._cipher,e=d.blockSize;a.call(this,b,c,e),d.encryptBlock(b,c),this._prevBlock=b.slice(c,c+e)}}),c.Decryptor=c.extend({processBlock:function(b,c){var d=this._cipher,e=d.blockSize,f=b.slice(c,c+e);d.decryptBlock(b,c),a.call(this,b,c,e),this._prevBlock=f}}),c}(),p=c.pad={},q=p.Pkcs7={pad:function(a,b){for(var c=4*b,d=c-a.sigBytes%c,e=d<<24|d<<16|d<<8|d,g=[],h=0;d>h;h+=4)g.push(e);var i=f.create(g,d);a.concat(i)},unpad:function(a){var b=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=b}},r=(d.BlockCipher=l.extend({cfg:l.cfg.extend({mode:o,padding:q}),reset:function(){l.reset.call(this);var a=this.cfg,b=a.iv,c=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var d=c.createEncryptor;else{var d=c.createDecryptor;this._minBufferSize=1}this._mode=d.call(c,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else{var b=this._process(!0);a.unpad(b)}return b},blockSize:4}),d.CipherParams=e.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}})),s=c.format={},t=s.OpenSSL={stringify:function(a){var b=a.ciphertext,c=a.salt;if(c)var d=f.create([1398893684,1701076831]).concat(c).concat(b);else var d=b;return d.toString(i)},parse:function(a){var b=i.parse(a),c=b.words;if(1398893684==c[0]&&1701076831==c[1]){var d=f.create(c.slice(2,4));c.splice(0,4),b.sigBytes-=16}return r.create({ciphertext:b,salt:d})}},u=d.SerializableCipher=e.extend({cfg:e.extend({format:t}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d),f=e.finalize(b),g=e.cfg;return r.create({ciphertext:f,key:c,iv:g.iv,algorithm:a,mode:g.mode,padding:g.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);var e=a.createDecryptor(c,d).finalize(b.ciphertext);return e},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),v=c.kdf={},w=v.OpenSSL={execute:function(a,b,c,d){d||(d=f.random(8));var e=k.create({keySize:b+c}).compute(a,d),g=f.create(e.words.slice(b),4*c);return e.sigBytes=4*b,r.create({key:e,iv:g,salt:d})}},x=d.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:w}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=d.kdf.execute(c,a.keySize,a.ivSize);d.iv=e.iv;var f=u.encrypt.call(this,a,b,e.key,d);return f.mixIn(e),f},decrypt:function(a,b,c,d){d=this.cfg.extend(d),b=this._parse(b,d.format);var e=d.kdf.execute(c,a.keySize,a.ivSize,b.salt);d.iv=e.iv;var f=u.decrypt.call(this,a,b,e.key,d);return f}})}()})},{"./core":68}],68:[function(a,b,c){!function(a,d){"object"==typeof c?b.exports=c=d():"function"==typeof define&&define.amd?define([],d):a.CryptoJS=d()}(this,function(){var a=a||function(a,b){var c={},d=c.lib={},e=d.Base=function(){function a(){}return{extend:function(b){a.prototype=this;var c=new a;return b&&c.mixIn(b),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=d.WordArray=e.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;e>f;f++){var g=c[f>>>2]>>>24-f%4*8&255;b[d+f>>>2]|=g<<24-(d+f)%4*8}else if(c.length>65535)for(var f=0;e>f;f+=4)b[d+f>>>2]=c[f>>>2];else b.push.apply(b,c);return this.sigBytes+=e,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-c%4*8,b.length=a.ceil(c/4)},clone:function(){var a=e.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c,d=[],e=function(b){var b=b,c=987654321,d=4294967295;return function(){c=36969*(65535&c)+(c>>16)&d,b=18e3*(65535&b)+(b>>16)&d;var e=(c<<16)+b&d;return e/=4294967296,e+=.5,e*(a.random()>.5?1:-1)}},g=0;b>g;g+=4){var h=e(4294967296*(c||a.random()));c=987654071*h(),d.push(4294967296*h()|0)}return new f.init(d,b)}}),g=c.enc={},h=g.Hex={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new f.init(c,b/2)}},i=g.Latin1={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;c>e;e++){var f=b[e>>>2]>>>24-e%4*8&255;d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new f.init(c,b)}},j=g.Utf8={stringify:function(a){try{return decodeURIComponent(escape(i.stringify(a)))}catch(b){throw new Error("Malformed UTF-8 data")}},parse:function(a){return i.parse(unescape(encodeURIComponent(a)))}},k=d.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=j.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,g=this.blockSize,h=4*g,i=e/h;i=b?a.ceil(i):a.max((0|i)-this._minBufferSize,0);var j=i*g,k=a.min(4*j,e);if(j){for(var l=0;j>l;l+=g)this._doProcessBlock(d,l);var m=d.splice(0,j);c.sigBytes-=k}return new f.init(m,k)},clone:function(){var a=e.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0}),l=(d.Hasher=k.extend({cfg:e.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){a&&this._append(a);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new l.HMAC.init(a,c).finalize(b)}}}),c.algo={});return c}(Math);return a})},{}],69:[function(a,b,c){!function(d,e){"object"==typeof c?b.exports=c=e(a("./core")):"function"==typeof define&&define.amd?define(["./core"],e):e(d.CryptoJS)}(this,function(a){return function(){{var b=a,c=b.lib,d=c.WordArray,e=b.enc;e.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var e=[],f=0;c>f;f+=3)for(var g=b[f>>>2]>>>24-f%4*8&255,h=b[f+1>>>2]>>>24-(f+1)%4*8&255,i=b[f+2>>>2]>>>24-(f+2)%4*8&255,j=g<<16|h<<8|i,k=0;4>k&&c>f+.75*k;k++)e.push(d.charAt(j>>>6*(3-k)&63));var l=d.charAt(64);if(l)for(;e.length%4;)e.push(l);return e.join("")},parse:function(a){var b=a.length,c=this._map,e=c.charAt(64);if(e){var f=a.indexOf(e);-1!=f&&(b=f)}for(var g=[],h=0,i=0;b>i;i++)if(i%4){var j=c.indexOf(a.charAt(i-1))<<i%4*2,k=c.indexOf(a.charAt(i))>>>6-i%4*2;g[h>>>2]|=(j|k)<<24-h%4*8,h++}return d.create(g,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}}(),a.enc.Base64})},{"./core":68}],70:[function(a,b,c){!function(d,e){"object"==typeof c?b.exports=c=e(a("./core")):"function"==typeof define&&define.amd?define(["./core"],e):e(d.CryptoJS)}(this,function(a){return a.enc.Utf8})},{"./core":68}],71:[function(a,b,c){!function(d,e){"object"==typeof c?b.exports=c=e(a("./core"),a("./sha1"),a("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],e):e(d.CryptoJS)}(this,function(a){return function(){var b=a,c=b.lib,d=c.Base,e=c.WordArray,f=b.algo,g=f.MD5,h=f.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:g,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,d=c.hasher.create(),f=e.create(),g=f.words,h=c.keySize,i=c.iterations;g.length<h;){j&&d.update(j);var j=d.update(a).finalize(b);d.reset();for(var k=1;i>k;k++)j=d.finalize(j),d.reset();f.concat(j)}return f.sigBytes=4*h,f}});b.EvpKDF=function(a,b,c){return h.create(c).compute(a,b)}}(),a.EvpKDF})},{"./core":68,"./hmac":72,"./sha1":74}],72:[function(a,b,c){!function(d,e){"object"==typeof c?b.exports=c=e(a("./core")):"function"==typeof define&&define.amd?define(["./core"],e):e(d.CryptoJS)}(this,function(a){!function(){{var b=a,c=b.lib,d=c.Base,e=b.enc,f=e.Utf8,g=b.algo;g.HMAC=d.extend({init:function(a,b){a=this._hasher=new a.init,"string"==typeof b&&(b=f.parse(b));var c=a.blockSize,d=4*c;b.sigBytes>d&&(b=a.finalize(b)),b.clamp();for(var e=this._oKey=b.clone(),g=this._iKey=b.clone(),h=e.words,i=g.words,j=0;c>j;j++)h[j]^=1549556828,i[j]^=909522486;e.sigBytes=g.sigBytes=d,this.reset()},reset:function(){var a=this._hasher;a.reset(),a.update(this._iKey)},update:function(a){return this._hasher.update(a),this},finalize:function(a){var b=this._hasher,c=b.finalize(a);b.reset();var d=b.finalize(this._oKey.clone().concat(c));return d}})}}()})},{"./core":68}],73:[function(a,b,c){!function(d,e){"object"==typeof c?b.exports=c=e(a("./core")):"function"==typeof define&&define.amd?define(["./core"],e):e(d.CryptoJS)}(this,function(a){return function(b){function c(a,b,c,d,e,f,g){var h=a+(b&c|~b&d)+e+g;return(h<<f|h>>>32-f)+b}function d(a,b,c,d,e,f,g){var h=a+(b&d|c&~d)+e+g;return(h<<f|h>>>32-f)+b}function e(a,b,c,d,e,f,g){var h=a+(b^c^d)+e+g;return(h<<f|h>>>32-f)+b}function f(a,b,c,d,e,f,g){var h=a+(c^(b|~d))+e+g;return(h<<f|h>>>32-f)+b}var g=a,h=g.lib,i=h.WordArray,j=h.Hasher,k=g.algo,l=[];!function(){for(var a=0;64>a;a++)l[a]=4294967296*b.abs(b.sin(a+1))|0}();var m=k.MD5=j.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,b){for(var g=0;16>g;g++){var h=b+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var j=this._hash.words,k=a[b+0],m=a[b+1],n=a[b+2],o=a[b+3],p=a[b+4],q=a[b+5],r=a[b+6],s=a[b+7],t=a[b+8],u=a[b+9],v=a[b+10],w=a[b+11],x=a[b+12],y=a[b+13],z=a[b+14],A=a[b+15],B=j[0],C=j[1],D=j[2],E=j[3];B=c(B,C,D,E,k,7,l[0]),E=c(E,B,C,D,m,12,l[1]),D=c(D,E,B,C,n,17,l[2]),C=c(C,D,E,B,o,22,l[3]),B=c(B,C,D,E,p,7,l[4]),E=c(E,B,C,D,q,12,l[5]),D=c(D,E,B,C,r,17,l[6]),C=c(C,D,E,B,s,22,l[7]),B=c(B,C,D,E,t,7,l[8]),E=c(E,B,C,D,u,12,l[9]),D=c(D,E,B,C,v,17,l[10]),C=c(C,D,E,B,w,22,l[11]),B=c(B,C,D,E,x,7,l[12]),E=c(E,B,C,D,y,12,l[13]),D=c(D,E,B,C,z,17,l[14]),C=c(C,D,E,B,A,22,l[15]),B=d(B,C,D,E,m,5,l[16]),E=d(E,B,C,D,r,9,l[17]),D=d(D,E,B,C,w,14,l[18]),C=d(C,D,E,B,k,20,l[19]),B=d(B,C,D,E,q,5,l[20]),E=d(E,B,C,D,v,9,l[21]),D=d(D,E,B,C,A,14,l[22]),C=d(C,D,E,B,p,20,l[23]),B=d(B,C,D,E,u,5,l[24]),E=d(E,B,C,D,z,9,l[25]),D=d(D,E,B,C,o,14,l[26]),C=d(C,D,E,B,t,20,l[27]),B=d(B,C,D,E,y,5,l[28]),E=d(E,B,C,D,n,9,l[29]),D=d(D,E,B,C,s,14,l[30]),C=d(C,D,E,B,x,20,l[31]),B=e(B,C,D,E,q,4,l[32]),E=e(E,B,C,D,t,11,l[33]),D=e(D,E,B,C,w,16,l[34]),C=e(C,D,E,B,z,23,l[35]),B=e(B,C,D,E,m,4,l[36]),E=e(E,B,C,D,p,11,l[37]),D=e(D,E,B,C,s,16,l[38]),C=e(C,D,E,B,v,23,l[39]),B=e(B,C,D,E,y,4,l[40]),E=e(E,B,C,D,k,11,l[41]),D=e(D,E,B,C,o,16,l[42]),C=e(C,D,E,B,r,23,l[43]),B=e(B,C,D,E,u,4,l[44]),E=e(E,B,C,D,x,11,l[45]),D=e(D,E,B,C,A,16,l[46]),C=e(C,D,E,B,n,23,l[47]),B=f(B,C,D,E,k,6,l[48]),E=f(E,B,C,D,s,10,l[49]),D=f(D,E,B,C,z,15,l[50]),C=f(C,D,E,B,q,21,l[51]),B=f(B,C,D,E,x,6,l[52]),E=f(E,B,C,D,o,10,l[53]),D=f(D,E,B,C,v,15,l[54]),C=f(C,D,E,B,m,21,l[55]),B=f(B,C,D,E,t,6,l[56]),E=f(E,B,C,D,A,10,l[57]),D=f(D,E,B,C,r,15,l[58]),C=f(C,D,E,B,y,21,l[59]),B=f(B,C,D,E,p,6,l[60]),E=f(E,B,C,D,w,10,l[61]),D=f(D,E,B,C,n,15,l[62]),C=f(C,D,E,B,u,21,l[63]),j[0]=j[0]+B|0,j[1]=j[1]+C|0,j[2]=j[2]+D|0,j[3]=j[3]+E|0},_doFinalize:function(){var a=this._data,c=a.words,d=8*this._nDataBytes,e=8*a.sigBytes;c[e>>>5]|=128<<24-e%32;var f=b.floor(d/4294967296),g=d;c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8),a.sigBytes=4*(c.length+1),this._process();for(var h=this._hash,i=h.words,j=0;4>j;j++){var k=i[j];i[j]=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8)}return h},clone:function(){var a=j.clone.call(this);return a._hash=this._hash.clone(),a}});g.MD5=j._createHelper(m),g.HmacMD5=j._createHmacHelper(m)}(Math),a.MD5})},{"./core":68}],74:[function(a,b,c){!function(d,e){"object"==typeof c?b.exports=c=e(a("./core")):"function"==typeof define&&define.amd?define(["./core"],e):e(d.CryptoJS)}(this,function(a){return function(){var b=a,c=b.lib,d=c.WordArray,e=c.Hasher,f=b.algo,g=[],h=f.SHA1=e.extend({_doReset:function(){this._hash=new d.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)g[j]=0|a[b+j];else{var k=g[j-3]^g[j-8]^g[j-14]^g[j-16];g[j]=k<<1|k>>>31}var l=(d<<5|d>>>27)+i+g[j];l+=20>j?(e&f|~e&h)+1518500249:40>j?(e^f^h)+1859775393:60>j?(e&f|e&h|f&h)-1894007588:(e^f^h)-899497514,i=h,h=f,f=e<<30|e>>>2,e=d,d=l}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA1=e._createHelper(h),b.HmacSHA1=e._createHmacHelper(h)}(),a.SHA1})},{"./core":68}],75:[function(a,b){!function(a,c){"undefined"!=typeof b&&b.exports?b.exports=c():"function"==typeof define&&define.amd?define(c):this[a]=c()}("Diacritics",function(){for(var a={map:{}},b=[{base:" ",letters:""},{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"Th",letters:""},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"ff",letters:""},{base:"fi",letters:""},{base:"fl",letters:""},{base:"ffi",letters:""},{base:"ffl",letters:""},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"nn"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oe",letters:""},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"ss",letters:""},{base:"t",letters:"t"},{base:"th",letters:""},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],c=0,d=b.length;d>c;c++)for(var e=b[c].letters.split(""),f=0,g=e.length;g>f;f++)a.map[e[f]]=b[c].base;
return a.clean=function(b){if(!b||!b.length||b.length<1)return"";for(var c,d="",e=b.split(""),f=0,g=e.length;g>f;f++)c=e[f],d+=c in a.map?a.map[c]:c;return d},a})},{}],76:[function(a,b,c){var d=a("__browserify_process");!function(a){if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof c)b.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else Q=a()}(function(){"use strict";function a(a){return function(){return W.apply(a,arguments)}}function b(a){return a===Object(a)}function c(a){return"[object StopIteration]"===cb(a)||a instanceof S}function e(a,b){if(P&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(db)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var e=c.join("\n"+db+"\n");a.stack=f(e)}}function f(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];i(e)||g(e)||!e||c.push(e)}return c.join("\n")}function g(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return c===R&&d>=T&&hb>=d}function j(){if(P)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=h(c);if(!d)return;return R=d[0],d[1]}}function k(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function l(a){return s(a)?a:t(a)?C(a):B(a)}function m(){function a(a){b=a,f.source=a,Y(c,function(b,c){V(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=_(m.prototype),f=_(p.prototype);if(f.promiseDispatch=function(a,e,f){var g=X(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):V(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=r(b);return s(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},l.longStackSupport&&P)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(l(c))},e.fulfill=function(c){b||a(B(c))},e.reject=function(c){b||a(A(c))},e.notify=function(a){b||Y(d,function(b,c){V(function(){c(a)})},void 0)},e}function n(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=m();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function o(a){return n(function(b,c){for(var d=0,e=a.length;e>d;d++)l(a[d]).then(b,c)})}function p(a,b,c){void 0===b&&(b=function(a){return A(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=_(p.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=A(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function q(a,b,c,d){return l(a).then(b,c,d)}function r(a){if(s(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function s(a){return b(a)&&"function"==typeof a.promiseDispatch&&"function"==typeof a.inspect}function t(a){return b(a)&&"function"==typeof a.then}function u(a){return s(a)&&"pending"===a.inspect().state}function v(a){return!s(a)||"fulfilled"===a.inspect().state}function w(a){return s(a)&&"rejected"===a.inspect().state}function x(){eb.length=0,fb.length=0,gb||(gb=!0)}function y(a,b){gb&&(fb.push(a),eb.push(b&&"undefined"!=typeof b.stack?b.stack:"(no stack) "+b))}function z(a){if(gb){var b=Z(fb,a);-1!==b&&(fb.splice(b,1),eb.splice(b,1))}}function A(a){var b=p({when:function(b){return b&&z(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return y(b,a),b}function B(a){return p({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return bb(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function C(a){var b=m();return V(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function D(a){return p({isDef:function(){}},function(b,c){return J(a,b,c)},function(){return l(a).inspect()})}function E(a,b,c){return l(a).spread(b,c)}function F(a){return function(){function b(a,b){var g;if("undefined"==typeof StopIteration){try{g=d[a](b)}catch(h){return A(h)}return g.done?g.value:q(g.value,e,f)}try{g=d[a](b)}catch(h){return c(h)?h.value:A(h)}return q(g,e,f)}var d=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function G(a){l.done(l.async(a)())}function H(a){throw new S(a)}function I(a){return function(){return E([this,K(arguments)],function(b,c){return a.apply(b,c)})}}function J(a,b,c){return l(a).dispatch(b,c)}function K(a){return q(a,function(a){var b=0,c=m();return Y(a,function(d,e,f){var g;s(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,q(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function L(a){return q(a,function(a){return a=$(a,l),q(K($(a,function(a){return q(a,U,U)})),function(){return a})})}function M(a){return l(a).allSettled()}function N(a,b){return l(a).then(void 0,void 0,b)}function O(a,b){return l(a).nodeify(b)}var P=!1;try{throw new Error}catch(Q){P=!!Q.stack}var R,S,T=j(),U=function(){},V=function(){function a(){for(;b.next;){b=b.next;var c=b.task;b.task=void 0;var d=b.domain;d&&(b.domain=void 0,d.enter());try{c()}catch(f){if(g)throw d&&d.exit(),setTimeout(a,0),d&&d.enter(),f;setTimeout(function(){throw f},0)}d&&d.exit()}e=!1}var b={task:void 0,next:null},c=b,e=!1,f=void 0,g=!1;if(V=function(a){c=c.next={task:a,domain:g&&d.domain,next:null},e||(e=!0,f())},"undefined"!=typeof d&&d.nextTick)g=!0,f=function(){d.nextTick(a)};else if("function"==typeof setImmediate)f="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){f=i,h.port1.onmessage=a,a()};var i=function(){h.port2.postMessage(0)};f=function(){setTimeout(a,0),i()}}else f=function(){setTimeout(a,0)};return V}(),W=Function.call,X=a(Array.prototype.slice),Y=a(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),Z=a(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),$=a(Array.prototype.map||function(a,b){var c=this,d=[];return Y(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),_=Object.create||function(a){function b(){}return b.prototype=a,new b},ab=a(Object.prototype.hasOwnProperty),bb=Object.keys||function(a){var b=[];for(var c in a)ab(a,c)&&b.push(c);return b},cb=a(Object.prototype.toString);S="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var db="From previous event:";l.resolve=l,l.nextTick=V,l.longStackSupport=!1,l.defer=m,m.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):a.resolve(arguments.length>2?X(arguments,1):c)}},l.Promise=n,l.promise=n,n.race=o,n.all=K,n.reject=A,n.resolve=l,l.passByCopy=function(a){return a},p.prototype.passByCopy=function(){return this},l.join=function(a,b){return l(a).join(b)},p.prototype.join=function(a){return l([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},l.race=o,p.prototype.race=function(){return this.then(l.race)},l.makePromise=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(a,b,c){function d(b){try{return"function"==typeof a?a(b):b}catch(c){return A(c)}}function f(a){if("function"==typeof b){e(a,h);try{return b(a)}catch(c){return A(c)}}return A(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=m(),j=!1;return V(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(d(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!l.onerror)throw d;l.onerror(d)}c||i.notify(b)}]),i.promise},l.when=q,p.prototype.thenResolve=function(a){return this.then(function(){return a})},l.thenResolve=function(a,b){return l(a).thenResolve(b)},p.prototype.thenReject=function(a){return this.then(function(){throw a})},l.thenReject=function(a,b){return l(a).thenReject(b)},l.nearer=r,l.isPromise=s,l.isPromiseAlike=t,l.isPending=u,p.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=v,p.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,p.prototype.isRejected=function(){return"rejected"===this.inspect().state};var eb=[],fb=[],gb=!0;l.resetUnhandledRejections=x,l.getUnhandledReasons=function(){return eb.slice()},l.stopUnhandledRejectionTracking=function(){x(),gb=!1},x(),l.reject=A,l.fulfill=B,l.master=D,l.spread=E,p.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},l.async=F,l.spawn=G,l["return"]=H,l.promised=I,l.dispatch=J,p.prototype.dispatch=function(a,b){var c=this,d=m();return V(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},l.get=function(a,b){return l(a).dispatch("get",[b])},p.prototype.get=function(a){return this.dispatch("get",[a])},l.set=function(a,b,c){return l(a).dispatch("set",[b,c])},p.prototype.set=function(a,b){return this.dispatch("set",[a,b])},l.del=l["delete"]=function(a,b){return l(a).dispatch("delete",[b])},p.prototype.del=p.prototype["delete"]=function(a){return this.dispatch("delete",[a])},l.mapply=l.post=function(a,b,c){return l(a).dispatch("post",[b,c])},p.prototype.mapply=p.prototype.post=function(a,b){return this.dispatch("post",[a,b])},l.send=l.mcall=l.invoke=function(a,b){return l(a).dispatch("post",[b,X(arguments,2)])},p.prototype.send=p.prototype.mcall=p.prototype.invoke=function(a){return this.dispatch("post",[a,X(arguments,1)])},l.fapply=function(a,b){return l(a).dispatch("apply",[void 0,b])},p.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},l["try"]=l.fcall=function(a){return l(a).dispatch("apply",[void 0,X(arguments,1)])},p.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},l.fbind=function(a){var b=l(a),c=X(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(X(arguments))])}},p.prototype.fbind=function(){var a=this,b=X(arguments);return function(){return a.dispatch("apply",[this,b.concat(X(arguments))])}},l.keys=function(a){return l(a).dispatch("keys",[])},p.prototype.keys=function(){return this.dispatch("keys",[])},l.all=K,p.prototype.all=function(){return K(this)},l.allResolved=k(L,"allResolved","allSettled"),p.prototype.allResolved=function(){return L(this)},l.allSettled=M,p.prototype.allSettled=function(){return this.then(function(a){return K($(a,function(a){function b(){return a.inspect()}return a=l(a),a.then(b,b)}))})},l.fail=l["catch"]=function(a,b){return l(a).then(void 0,b)},p.prototype.fail=p.prototype["catch"]=function(a){return this.then(void 0,a)},l.progress=N,p.prototype.progress=function(a){return this.then(void 0,void 0,a)},l.fin=l["finally"]=function(a,b){return l(a)["finally"](b)},p.prototype.fin=p.prototype["finally"]=function(a){return a=l(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},l.done=function(a,b,c,d){return l(a).done(b,c,d)},p.prototype.done=function(a,b,c){var f=function(a){V(function(){if(e(a,g),!l.onerror)throw a;l.onerror(a)})},g=a||b||c?this.then(a,b,c):this;"object"==typeof d&&d&&d.domain&&(f=d.domain.bind(f)),g.then(void 0,f)},l.timeout=function(a,b,c){return l(a).timeout(b,c)},p.prototype.timeout=function(a,b){var c=m(),d=setTimeout(function(){c.reject(new Error(b||"Timed out after "+a+" ms"))},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},l.delay=function(a,b){return void 0===b&&(b=a,a=void 0),l(a).delay(b)},p.prototype.delay=function(a){return this.then(function(b){var c=m();return setTimeout(function(){c.resolve(b)},a),c.promise})},l.nfapply=function(a,b){return l(a).nfapply(b)},p.prototype.nfapply=function(a){var b=m(),c=X(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},l.nfcall=function(a){var b=X(arguments,1);return l(a).nfapply(b)},p.prototype.nfcall=function(){var a=X(arguments),b=m();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},l.nfbind=l.denodeify=function(a){var b=X(arguments,1);return function(){var c=b.concat(X(arguments)),d=m();return c.push(d.makeNodeResolver()),l(a).fapply(c).fail(d.reject),d.promise}},p.prototype.nfbind=p.prototype.denodeify=function(){var a=X(arguments);return a.unshift(this),l.denodeify.apply(void 0,a)},l.nbind=function(a,b){var c=X(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(X(arguments)),f=m();return e.push(f.makeNodeResolver()),l(d).fapply(e).fail(f.reject),f.promise}},p.prototype.nbind=function(){var a=X(arguments,0);return a.unshift(this),l.nbind.apply(void 0,a)},l.nmapply=l.npost=function(a,b,c){return l(a).npost(b,c)},p.prototype.nmapply=p.prototype.npost=function(a,b){var c=X(b||[]),d=m();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},l.nsend=l.nmcall=l.ninvoke=function(a,b){var c=X(arguments,2),d=m();return c.push(d.makeNodeResolver()),l(a).dispatch("post",[b,c]).fail(d.reject),d.promise},p.prototype.nsend=p.prototype.nmcall=p.prototype.ninvoke=function(a){var b=X(arguments,1),c=m();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},l.nodeify=O,p.prototype.nodeify=function(a){return a?void this.then(function(b){V(function(){a(null,b)})},function(b){V(function(){a(b)})}):this};var hb=j();return l})},{__browserify_process:64}],77:[function(a,b,c){!function(a){"use strict";var b={};b.init=function(){return"init"};var c=function(a){for(var b,c,d,e={},f=0;f<a.length;f++)b=a[f].split(" = "),c=b[0].trim().replace(/ /g,"_"),d=b[1].trim().replace(/"/g,""),e[c]=d;return e};b.textgridToJSON=function(a){for(var b,d,e,f,g,h=a.split("\n"),i={items:[]},j=null,k="Unknown",l=[];h.length>0;)if(b=h.shift())if(0!==b.search(/ /))d=b.split(" = "),2===d.length&&(f=d[0].trim().replace(/ /g,"_"),g=d[1].trim().replace(/"/g,""),i[f]=g,"File_name"===f&&(k=g+"",console.log(" Found a file name "+k),l.push(k)));else if(-1!==b.search(/\[[\0-9]+\]/)){if(d=b.split("["),e=d[0].trim(),"item"===e)console.log("  Found an item for "+k),j&&(j.fileName=k,i.items.push(j)),j={};else if("points"===e){var m=c([h.shift(),h.shift()]);j[e]=j[e]||[],j[e].push(m)}else if("intervals"===e){var n=c([h.shift(),h.shift(),h.shift()]);j[e]=j[e]||[],j[e].push(n)}}else d=b.split(" = "),2===d.length&&(f=d[0].trim().replace(/ /g,"_"),g=d[1].trim().replace(/"/g,""),f.indexOf(":_size")>-1&&(f=f.replace(":_","_"),g=parseInt(g,10)),j[f]=g);else b=h.shift(),b||(j&&(j.fileName=k,i.items.push(j)),j=null,k="Unknown",console.log("Reset filename if there is are two empty lines"));return j&&(j.fileName=k,i.items.push(j)),i.fileNames=l,i},b.textgridToIGT=function(a,b){return this.jsonToIGT(this.textgridToJSON(a,b),b)},b.jsonToIGT=function(a,b){var c={};a.intervalsByXmin={},a.intervalsByText={};var d,e,f,g,h,i,j,k,l=!1,m=0,n=/[ #?!'".,\/\(\)\*\#0-9-]/g,o=a.items.map(function(a){return a.name.indexOf("@")>-1&&(a.speaker=a.name.substring(a.name.indexOf("@")+1).trim(),a.name=a.name.substring(0,a.name.indexOf("@")).trim(),m++),b&&(a.speaker=a.name),"silences"===a.name&&(a.name="utterances"),a.name});if(o.length-m==0&&(l=!0),!a||!a.items)return a;for(d=0;d<a.items.length;d++)if(c[a.items[d].name]=a.items[d].intervals_size||a.items[d].points_size,a.items[d].intervals)for(e=0;e<a.items[d].intervals.length;e++)f=this.marginForConsideringIntervalsMatching(a.items[d].intervals[e].xmin),g=this.marginForConsideringIntervalsMatching(a.items[d].intervals[e].xmax),i=a.items[d].intervals[e],i.fileName=a.items[d].fileName,i.tierName=a.items[d].name,i.speaker=a.items[d].speaker,h=f+":"+g,a.intervalsByXmin[h]=a.intervalsByXmin[h]||[],a.intervalsByXmin[h].push(i),j=i.text?i.text.trim().toLocaleLowerCase().replace(n,""):"",j&&("utterance"===j&&a.items[d].intervals.length<3&&(j=i.fileName,j.indexOf(".")>-1&&(j=j.substring(0,i.fileName.lastIndexOf("."))),j=j.trim().replace(/_/g," "),i.text=j),a.intervalsByText[j]=a.intervalsByText[j]||[],k=a.intervalsByText[j].length,a.intervalsByText[j][k]=i);return a.probablyFromElanWithSpeakerEncodedInTierName=l,a.isIGTNestedOrAlignedOrBySpeaker=this.isIGTNestedOrAlignedOrBySpeaker(a),a},b.isIGTNestedOrAlignedOrBySpeaker=function(a){var b,c,d=a.intervalsByXmin,e={},f=0,g=!1,h=!1;for(var i in a.items)a.items.hasOwnProperty(i)&&a.items[i].speaker&&(g=!0);for(c in d)e[d[c].length]=e[d[c].length]?e[d[c].length]+1:1,f++;for(b in e)e[b]=e[b]/f,b>1&&e[b]>.1&&(h=!0);return a.fileNames&&a.fileNames.length>4&&(h=!1),{histogram:e,probablyAligned:h,probablyBySpeaker:g}},b.marginForConsideringIntervalsMatching=function(a,b){return b=b?100/b:5,(Math.round(a*b)/b).toFixed(2)},b.printIGT=function(a){for(var b in a)console.log(b),a.hasOwnProperty(b)&&console.log(a[b].map(function(a){return a.xmin+","+a.xmax+","+a.text}))},a.TextGrid=b}("object"==typeof c&&c||this)},{}],78:[function(a,b,c){(function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){return a instanceof z?a:this instanceof z?void(this._wrapped=a):new z(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=z),c._=z):a._=z,z.VERSION="1.6.0";var A=z.each=z.forEach=function(a,b,c){if(null==a)return a;if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;f>d;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g=z.keys(a),d=0,f=g.length;f>d;d++)if(b.call(c,a[g[d]],g[d],a)===e)return;return a};z.map=z.collect=function(a,b,c){var d=[];return null==a?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}if(A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},z.filter=z.select=function(a,b,c){var d=[];return null==a?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return null==a?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){return(d=d&&b.call(c,a,f,g))?void 0:e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return null==a?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){return d||(d=b.call(c,a,f,g))?e:void 0}),!!d)};z.contains=z.include=function(a,b){return null==a?!1:u&&a.indexOf===u?-1!=a.indexOf(b):C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,z.property(b))},z.where=function(a,b){return z.filter(a,z.matches(b))},z.findWhere=function(a,b){return z.find(a,z.matches(b))},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return A(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return A(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d},z.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=z.values(a)),a[z.random(a.length-1)]):z.shuffle(a).slice(0,Math.max(0,b))};var D=function(a){return null==a?z.identity:z.isFunction(a)?a:z.property(a)};z.sortBy=function(a,b,c){return b=D(b),z.pluck(z.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var E=function(a){return function(b,c,d){var e={};return c=D(c),A(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};z.groupBy=E(function(a,b,c){z.has(a,b)?a[b].push(c):a[b]=[c]}),z.indexBy=E(function(a,b,c){a[b]=c}),z.countBy=E(function(a,b){z.has(a,b)?a[b]++:a[b]=1}),z.sortedIndex=function(a,b,c,d){c=D(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return null==a?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:j.call(a,0,b)},z.initial=function(a,b,c){return j.call(a,0,a.length-(null==b||c?1:b))},z.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return b&&z.every(a,z.isArray)?k.apply(c,a):(A(a,function(a){z.isArray(a)||z.isArguments(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c)};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.partition=function(a,b){var c=[],d=[];return A(a,function(a){(b(a)?c:d).push(a)}),[c,d]},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){(b?d&&g[g.length-1]===c:z.contains(g,c))||(g.push(c),f.push(a[d]))}),f},z.union=function(){return z.uniq(z.flatten(arguments,!0))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.contains(b,a)})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){for(var a=z.max(z.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=z.pluck(arguments,""+c);return b},z.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=z.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(u&&a.indexOf===u)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var G=function(){};z.bind=function(a,b){var c,d;if(y&&a.bind===y)return y.apply(a,j.call(arguments,1));if(!z.isFunction(a))throw new TypeError;return c=j.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(j.call(arguments)));G.prototype=a.prototype;var e=new G;G.prototype=null;var f=a.apply(e,c.concat(j.call(arguments)));return Object(f)===f?f:e}},z.partial=function(a){var b=j.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===z&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},z.bindAll=function(a){var b=j.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:z.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=z.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},z.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=z.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=z.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},z.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},z.wrap=function(a,b){return z.partial(b,a)},z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},z.keys=function(a){if(!z.isObject(a))return[];if(x)return x(a);var b=[];for(var c in a)z.has(a,c)&&b.push(c);return b},z.values=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},z.pairs=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},z.invert=function(a){for(var b={},c=z.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var H=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(z.isFunction(g)&&g instanceof g&&z.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=H(a[i],b[i],c,d)););}else{for(var k in a)if(z.has(a,k)&&(i++,!(j=z.has(b,k)&&H(a[k],b[k],c,d))))break;if(j){for(k in b)if(z.has(b,k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};z.isEqual=function(a,b){return H(a,b,[],[])},z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===a.length;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!(!a||1!==a.nodeType)},z.isArray=w||function(a){return"[object Array]"==l.call(a)},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))}),"function"!=typeof/./&&(z.isFunction=function(a){return"function"==typeof a}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==l.call(a)},z.isNull=function(a){return null===a},z.isUndefined=function(a){return void 0===a},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.constant=function(a){return function(){return a}},z.property=function(a){return function(b){return b[a]}},z.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},z.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},z.now=Date.now||function(){return(new Date).getTime()};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=z.invert(I.escape);var J={escape:new RegExp("["+z.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(I.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return null==b?"":(""+b).replace(J[a],function(b){return I[a][b]})}}),z.result=function(a,b){if(null==a)return void 0;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),O.call(this,c.apply(z,a))}})};var K=0;z.uniqueId=function(a){var b=++K+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||L).source,(c.interpolate||L).source,(c.evaluate||L).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(N,function(a){return"\\"+M[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,z);var i=function(a){return d.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},z.chain=function(a){return z(a).chain()};var O=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],O.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return O.call(this,b.apply(this._wrapped,arguments))
}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return z})}).call(this)},{}],79:[function(a,b){b.exports={name:"fielddb",version:"2.28.0",description:"An offline/online field database which adapts to its user's terminology and I-Language",homepage:"https://github.com/OpenSourceFieldlinguistics/FieldDB/issues/milestones?state=closed",repository:{type:"git",url:"git://github.com/OpenSourceFieldlinguistics/FieldDB.git"},bugs:{url:"https://github.com/OpenSourceFieldlinguistics/FieldDB/issues"},keywords:["fielddb","client"],contributors:["cesine <cesine@yahoo.com>","trisapeace <trisapeace@gmail.com>","hisakonog <hisakonog@gmail.com>","Emmy Cathcart <maryellencathcart@gmail.com>","Tobin Skinner <tobin.skinner@gmail.com>","Yuliya Manyakina <yulia.manyakina@gmail.com>","Elise <elise.mcclay@gmail.com>","Josh Horner <josh.horner@gmail.com>","gretchenmcc <gretchen.mcculloch@gmail.com>","jrwdunham <jrwdunham@gmail.com>","ghazan <gay.hazan@gmail.com>","Fieldlinguist <info@fieldlinguist.com>","zazoo <kimdan.ng@gmail.com>","louisa-bielig <louisa.bielig@gmail.com>","lingllama <lingllama@lingsync.org>","geekrax <rakshit@thetechtime.com>","Yogurt1206 <sunx4@miamioh.edu>","Pablo Duboue <pablo.duboue@gmail.com>","Oriana <oriana.kilbourn-ceron@mail.mcgill.ca>"],dependencies:{MD5:"1.2.1",atob:"^1.1.2",btoa:"^1.1.2","crypto-js":"^3.1.2-5",diacritic:"0.0.2",q:"1.0.1",textgrid:"2.2.0",underscore:"^1.6.0"},devDependencies:{browserify:"3.2.2",grunt:"*","grunt-browserify":"1.3.2","grunt-contrib-concat":"0.3.0","grunt-contrib-jshint":"0.10.0","grunt-contrib-uglify":"0.2.7","grunt-contrib-watch":"0.6.1","grunt-exec":"^0.4.6","grunt-jasmine-node":"git://github.com/cesine/grunt-jasmine-node.git","grunt-jsdoc":"0.4.3","jasmine-node":"^1.14.5"},main:"./scripts/build_template_databases_using_fielddb.sh",bin:{fielddb:"./scripts/build_template_databases_using_fielddb.sh"},engines:{node:"~0.8 || ~0.10"},scripts:{test:"grunt"},license:"Apache 2.0",licenses:[{type:"Apache 2.0"}]}},{}]},{},[36]);